/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "cache_hit_rate_debug_160905-192032"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
INFO:clipper::configuration: spark_svm_r0:6001
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "cache_hit_rate_debug_160905-192032"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1962510726844082], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138974,
      "max": 138974,
      "mean": 138974.0,
      "std": null,
      "p95": 138974.0,
      "p99": 138974.0,
      "p50": 138974.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 931,
      "max": 7076,
      "mean": 5284.130325814536,
      "std": 1620.3100308391093,
      "p95": 7076.0,
      "p99": 7076.0,
      "p50": 5746.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996230094582133,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93496006937566,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 174, alpha = 89.18333338290198, beta = 4499.999991005059
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8692.220462846557, baseline: 217.9036942555276, increase: 39.890193199999224
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 86199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 80398
    },
    {
      "name": "pred_ones_counter",
      "count": 86199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89183
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4500000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 174
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8692220
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 217904
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4987296836390213
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 22843,
      "mean": 18923.739785992217,
      "std": 976.990153009911,
      "p95": 20121.0,
      "p99": 20225.739999999998,
      "p50": 19041.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0014591439688715954,
      "std": 0.03817550636665436,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2124,
      "max": 33383,
      "mean": 18198.889226653697,
      "std": 2143.906530436243,
      "p95": 19482.0,
      "p99": 22448.0,
      "p50": 18559.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 180,
      "mean": 158.26377952755906,
      "std": 37.589096092561408,
      "p95": 178.0,
      "p99": 178.0,
      "p50": 172.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8617.040004422533,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8037.129261946255,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13.624096940258236,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 172999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 162700
    },
    {
      "name": "pred_ones_counter",
      "count": 172999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89183
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4500000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 174
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8692220
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 217904
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5007138769588263
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22393,
      "mean": 18895.097519455252,
      "std": 973.5883635316108,
      "p95": 20121.0,
      "p99": 20222.87,
      "p50": 19007.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00048638132295719845,
      "std": 0.022051372084047815,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2366,
      "max": 33383,
      "mean": 18508.507782101166,
      "std": 1522.0894236969123,
      "p95": 19419.0,
      "p99": 20144.0,
      "p50": 18734.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 180,
      "mean": 165.85117227319064,
      "std": 28.157977648563784,
      "p95": 176.0,
      "p99": 178.0,
      "p50": 174.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8647.585750055936,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8132.7760923775399,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6.805288049078536,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-192155"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
INFO:clipper::configuration: spark_svm_r0:6001
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-192155"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1221549309029017], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 140468,
      "max": 140468,
      "mean": 140468.0,
      "std": null,
      "p95": 140468.0,
      "p99": 140468.0,
      "p50": 140468.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 922,
      "max": 6976,
      "mean": 5177.969773299748,
      "std": 1584.1043143941022,
      "p95": 6976.0,
      "p99": 6976.0,
      "p50": 5762.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.85,
      "std": 11.595257651298655,
      "p95": 36.95,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049960508715885528,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.83432394207238,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 177, alpha = 94.75362308278278, beta = 3217.63768423716
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8854.857345327893, baseline: 301.89669855434454, increase: 29.33075249822226
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85203
    },
    {
      "name": "queued_predictions",
      "count": 196
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 83223
    },
    {
      "name": "pred_ones_counter",
      "count": 85203
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 94754
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3217638
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8854857
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 301897
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4996302947079328
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23584,
      "mean": 18883.491488326847,
      "std": 978.5289752546012,
      "p95": 20121.0,
      "p99": 20237.87,
      "p50": 18968.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.11065175097276264,
      "std": 0.31373855149330145,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 836,
      "max": 32400,
      "mean": 15834.434581712063,
      "std": 5194.466819155195,
      "p95": 19318.0,
      "p99": 21945.0,
      "p50": 18369.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 113.07472826086956,
      "std": 64.79903931791466,
      "p95": 183.0,
      "p99": 183.0,
      "p50": 117.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8524.941845179723,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8319.409005370635,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1006.6106341116093,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 171199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168183
    },
    {
      "name": "pred_ones_counter",
      "count": 171199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 94754
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3217638
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8854857
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 301897
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4990449710570739
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 25800,
      "mean": 18893.482490272374,
      "std": 997.2134470113902,
      "p95": 20121.0,
      "p99": 20240.87,
      "p50": 19001.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.049854085603112847,
      "std": 0.2176698834672826,
      "p95": 0.34999999999990907,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 853,
      "max": 32400,
      "mean": 17270.574173151752,
      "std": 3929.7220389626647,
      "p95": 19191.0,
      "p99": 20428.0,
      "p50": 18516.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 138.30838815789475,
      "std": 59.30614826273799,
      "p95": 177.0,
      "p99": 183.0,
      "p50": 177.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8557.459779204251,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8406.703229025192,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 502.8182389372857,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 150
target_qps = 14000
name = "cache_hit_rate_debug_160905-192307"
cache_hit_rate = 0.0
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 150
target_qps = 14000
name = "cache_hit_rate_debug_160905-192307"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0466401004560435], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136139,
      "max": 136139,
      "mean": 136139.0,
      "std": null,
      "p95": 136139.0,
      "p99": 136139.0,
      "p50": 136139.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 933,
      "max": 7119,
      "mean": 5115.0125,
      "std": 1508.416726204497,
      "p95": 7119.0,
      "p99": 7119.0,
      "p50": 5513.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996064849521274,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98426538864625,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 180, alpha = 92.00000000593226, beta = 3464.999998663878
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8988.76404506426, baseline: 281.1357886910216, increase: 31.97303369633681
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 79833
    },
    {
      "name": "queued_predictions",
      "count": 161
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 79948
    },
    {
      "name": "pred_ones_counter",
      "count": 79834
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4998622140942456
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21512,
      "mean": 18880.78112840467,
      "std": 927.7535380396377,
      "p95": 20105.0,
      "p99": 20220.0,
      "p50": 18938.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7446498054474708,
      "std": 0.4361109099636062,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 436,
      "max": 35467,
      "mean": 8388.303988326848,
      "std": 5278.17205724135,
      "p95": 18559.75,
      "p99": 23384.0,
      "p50": 6901.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 46.780573434757169,
      "std": 38.31490616673352,
      "p95": 141.5,
      "p99": 180.0,
      "p50": 39.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7985.584901133614,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7992.079496139514,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5921.582753703268,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 161849
    },
    {
      "name": "queued_predictions",
      "count": 150
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 161886
    },
    {
      "name": "pred_ones_counter",
      "count": 161849
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005529845720393
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23744,
      "mean": 18912.647130350193,
      "std": 928.7822512292785,
      "p95": 20104.0,
      "p99": 20222.87,
      "p50": 18999.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8686770428015564,
      "std": 0.33779429743327807,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 436,
      "max": 35467,
      "mean": 7427.150778210117,
      "std": 4253.748170567423,
      "p95": 16286.0,
      "p99": 19520.0,
      "p50": 6673.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 44.73224647692733,
      "std": 33.77168466541029,
      "p95": 99.0,
      "p99": 167.0,
      "p50": 39.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8090.147948401282,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8091.997017648777,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7005.922214418627,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 242040
    },
    {
      "name": "queued_predictions",
      "count": 165
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 242111
    },
    {
      "name": "pred_ones_counter",
      "count": 242040
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5002644191042803
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23983,
      "mean": 18898.081955252917,
      "std": 935.5171383113236,
      "p95": 20101.0,
      "p99": 20221.0,
      "p50": 18983.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9088035019455253,
      "std": 0.28792335311367309,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 304,
      "max": 35467,
      "mean": 7047.233341439689,
      "std": 3852.458114998069,
      "p95": 15165.0,
      "p99": 19013.0,
      "p50": 6472.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 42.617672944904068,
      "std": 31.778291115218435,
      "p95": 93.0,
      "p99": 151.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8067.581658621556,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8068.081248185097,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7330.790818709295,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 320997
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 320999
    },
    {
      "name": "pred_ones_counter",
      "count": 320997
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005280423181525
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23983,
      "mean": 18896.958657587547,
      "std": 938.9562256661906,
      "p95": 20101.0,
      "p99": 20221.0,
      "p50": 18966.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9355544747081712,
      "std": 0.24557476591163397,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 288,
      "max": 35467,
      "mean": 6834.363691634241,
      "std": 3619.135417443222,
      "p95": 14054.5,
      "p99": 18766.0,
      "p50": 6357.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 40.996040868454667,
      "std": 30.766469808653594,
      "p95": 91.0,
      "p99": 147.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8022.679510824965,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8022.679310315353,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7460.93243438761,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 401249
    },
    {
      "name": "queued_predictions",
      "count": 150
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 401269
    },
    {
      "name": "pred_ones_counter",
      "count": 401249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005096585910495
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 23983,
      "mean": 18910.201848249028,
      "std": 938.2820766072434,
      "p95": 20100.35,
      "p99": 20222.739999999998,
      "p50": 18985.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9421206225680934,
      "std": 0.23354361339092687,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 288,
      "max": 35467,
      "mean": 6790.734557392996,
      "std": 3510.203943416297,
      "p95": 13135.75,
      "p99": 18592.0,
      "p50": 6372.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 40.69163424124513,
      "std": 30.43169072878469,
      "p95": 91.0,
      "p99": 137.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8022.652468065964,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8023.052031222621,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7519.776209533369,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192517"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192517"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::correction_policy: OLD correction state: [1.0466401004560435], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1210440574479517], offline_model_order: ["spark_svm"], labels: Some([1, -1])
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192547"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192547"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1698090764346734], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137062,
      "max": 137062,
      "mean": 137062.0,
      "std": null,
      "p95": 137062.0,
      "p99": 137062.0,
      "p50": 137062.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 955,
      "max": 7313,
      "mean": 5288.6375,
      "std": 1652.8696155501132,
      "p95": 7313.0,
      "p99": 7313.0,
      "p50": 5770.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995981981491386,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983933916327968,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 14
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 148, alpha = 118.3571428511616, beta = 2441.214285411812
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7415.5461632898405, baseline: 390.6904058069751, increase: 18.98062008452179
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 72091
    },
    {
      "name": "queued_predictions",
      "count": 108
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 72140
    },
    {
      "name": "pred_ones_counter",
      "count": 72091
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4999375788933431
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23474,
      "mean": 18880.5423151751,
      "std": 972.4306903278003,
      "p95": 20124.0,
      "p99": 20245.48,
      "p50": 18947.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7174124513618677,
      "std": 0.4503122699555603,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 414,
      "max": 27468,
      "mean": 8082.426799610895,
      "std": 4494.961263167854,
      "p95": 15930.0,
      "p99": 20665.0,
      "p50": 7413.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 39.7465564738292,
      "std": 34.72148926769851,
      "p95": 108.0,
      "p99": 148.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7208.759431420271,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7217.252711705346,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5339.399557954933,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 144752
    },
    {
      "name": "queued_predictions",
      "count": 82
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 144799
    },
    {
      "name": "pred_ones_counter",
      "count": 144752
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005941195976567
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21110,
      "mean": 18869.827821011673,
      "std": 975.6889917065835,
      "p95": 20125.0,
      "p99": 20228.61,
      "p50": 18937.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8287937743190662,
      "std": 0.3767348800120677,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 462,
      "max": 27468,
      "mean": 7613.477869649805,
      "std": 4002.6917709344268,
      "p95": 14789.0,
      "p99": 18865.0,
      "p50": 7325.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 38.26612050739958,
      "std": 33.059143312484618,
      "p95": 102.0,
      "p99": 148.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7237.326331484651,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7237.725846847264,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6054.251796191102,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 217398
    },
    {
      "name": "queued_predictions",
      "count": 67
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 217421
    },
    {
      "name": "pred_ones_counter",
      "count": 217398
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49969180949226768
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21110,
      "mean": 18889.655885214008,
      "std": 976.7637941832387,
      "p95": 20125.0,
      "p99": 20233.87,
      "p50": 18978.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8747568093385214,
      "std": 0.33103471669280218,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 27468,
      "mean": 7349.847762645914,
      "std": 3821.6476193201676,
      "p95": 13651.75,
      "p99": 17542.0,
      "p50": 7175.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 36.886174724342669,
      "std": 31.96990924695027,
      "p95": 99.0,
      "p99": 129.03999999999997,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7244.44599360633,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7245.945299384429,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6382.672365199822,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 290794
    },
    {
      "name": "queued_predictions",
      "count": 117
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 290747
    },
    {
      "name": "pred_ones_counter",
      "count": 290794
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004436130043949
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18910.096546692606,
      "std": 979.5994001827853,
      "p95": 20125.0,
      "p99": 20229.87,
      "p50": 19013.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8939688715953308,
      "std": 0.30791489977930289,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 27468,
      "mean": 7299.481517509727,
      "std": 3730.1388932070556,
      "p95": 13323.0,
      "p99": 16152.0,
      "p50": 7152.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 36.664186633039097,
      "std": 31.80020775709397,
      "p95": 99.0,
      "p99": 125.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7267.7995658949389,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7266.499954901,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6524.444600033257,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 366697
    },
    {
      "name": "queued_predictions",
      "count": 102
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 366799
    },
    {
      "name": "pred_ones_counter",
      "count": 366697
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006476736924491
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18899.617704280157,
      "std": 977.5880023645418,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 18994.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8976167315175098,
      "std": 0.3031885382117133,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6968.971181906615,
      "std": 3840.4484340255919,
      "p95": 13680.0,
      "p99": 16948.75,
      "p50": 6611.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 35.19357976653696,
      "std": 31.257740028481746,
      "p95": 97.0,
      "p99": 127.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7332.357820965076,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7333.717108249079,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6599.052443443987,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 438801
    },
    {
      "name": "queued_predictions",
      "count": 198
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 438914
    },
    {
      "name": "pred_ones_counter",
      "count": 438801
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004637637562357
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.960359922177,
      "std": 983.2459828260313,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 18999.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9071011673151751,
      "std": 0.29032591668986149,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6819.14968385214,
      "std": 3817.8305407057775,
      "p95": 13367.0,
      "p99": 16319.5,
      "p50": 6395.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.4136673151751,
      "std": 30.62983641369364,
      "p95": 94.0,
      "p99": 125.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7312.1529165770839,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7312.952423472452,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6638.216808903455,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 511790
    },
    {
      "name": "queued_predictions",
      "count": 74
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 511819
    },
    {
      "name": "pred_ones_counter",
      "count": 511790
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006604271283144
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.956955252917,
      "std": 983.5498692309328,
      "p95": 20125.0,
      "p99": 20225.0,
      "p50": 19001.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9141536964980545,
      "std": 0.2801710283447617,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6838.830860894942,
      "std": 3763.8161759656807,
      "p95": 13217.0,
      "p99": 16191.0,
      "p50": 6505.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.297665369649809,
      "std": 30.53655595454805,
      "p95": 94.0,
      "p99": 120.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7309.11619516658,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7309.401715260673,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6691.672135479064,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 584399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 584536
    },
    {
      "name": "pred_ones_counter",
      "count": 584399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008992144065955
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18908.502431906614,
      "std": 980.8706107047043,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 19022.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9229085603112841,
      "std": 0.26676891955118989,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 27468,
      "mean": 6898.44734922179,
      "std": 3708.287097898168,
      "p95": 12956.25,
      "p99": 15971.0,
      "p50": 6618.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.2942607003891,
      "std": 30.57166604982539,
      "p95": 94.0,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7303.0536590238739,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7304.428140237683,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6723.021179383488,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 656895
    },
    {
      "name": "queued_predictions",
      "count": 104
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 656999
    },
    {
      "name": "pred_ones_counter",
      "count": 656895
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009522069737172
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18909.29571984436,
      "std": 978.0749221038849,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 19020.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9263132295719845,
      "std": 0.2612922383119224,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 27468,
      "mean": 6953.464494163424,
      "std": 3677.536768430861,
      "p95": 12958.0,
      "p99": 15878.0,
      "p50": 6710.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.722033073929967,
      "std": 30.82523136061981,
      "p95": 95.0,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7296.891580569013,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7297.702275509229,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6732.30351228818,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 729199
    },
    {
      "name": "queued_predictions",
      "count": 191
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 729288
    },
    {
      "name": "pred_ones_counter",
      "count": 729199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5010374397112448
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.929717898834,
      "std": 975.3626217483393,
      "p95": 20125.0,
      "p99": 20210.0,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9287451361867705,
      "std": 0.25728137493278716,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 392,
      "max": 27468,
      "mean": 6913.025535019456,
      "std": 3652.891761623604,
      "p95": 12914.0,
      "p99": 15845.75,
      "p50": 6688.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.83681906614786,
      "std": 30.727019110477014,
      "p95": 95.0,
      "p99": 118.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7289.715754478917,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7291.175226241166,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6746.269768239542,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 801799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 801903
    },
    {
      "name": "pred_ones_counter",
      "count": 801799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008811435284903
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18893.650535019457,
      "std": 976.050503040309,
      "p95": 20124.35,
      "p99": 20209.61,
      "p50": 18988.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9289883268482491,
      "std": 0.2568755776225593,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 391,
      "max": 27468,
      "mean": 6911.895063229572,
      "std": 3619.0097912888038,
      "p95": 12862.0,
      "p99": 15772.0,
      "p50": 6720.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.8403453307393,
      "std": 30.823090660129308,
      "p95": 95.0,
      "p99": 119.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7287.240073058888,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7288.357837793566,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6764.002578835351,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 874676
    },
    {
      "name": "queued_predictions",
      "count": 123
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 874706
    },
    {
      "name": "pred_ones_counter",
      "count": 874676
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5007740008871856
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18897.176799610894,
      "std": 975.1945274906675,
      "p95": 20125.0,
      "p99": 20215.739999999998,
      "p50": 18993.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.930204280155642,
      "std": 0.2548334164790639,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 391,
      "max": 27468,
      "mean": 6916.402237354086,
      "std": 3607.703350516617,
      "p95": 12861.0,
      "p99": 15770.0,
      "p50": 6761.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.898224708171209,
      "std": 30.83848666864594,
      "p95": 96.0,
      "p99": 118.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7286.911498828903,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7286.9197688312,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6776.756238029747,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 880000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_debug_160905-192832"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_debug_160905-192832"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.117090283818511], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138162,
      "max": 138162,
      "mean": 138162.0,
      "std": null,
      "p95": 138162.0,
      "p99": 138162.0,
      "p50": 138162.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 918,
      "max": 7462,
      "mean": 5265.082706766917,
      "std": 1643.142879756096,
      "p95": 7462.0,
      "p99": 7462.0,
      "p50": 5772.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995856187085622,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93346917401399,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 141, alpha = 127.24999999026352, beta = 2081.7499998711905
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7041.550140360266, baseline: 452.69352651096375, increase: 15.554784259080249
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 78063
    },
    {
      "name": "queued_predictions",
      "count": 136
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 78099
    },
    {
      "name": "pred_ones_counter",
      "count": 78063
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.503003983961672
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18901.779912451362,
      "std": 961.2514427181122,
      "p95": 20122.0,
      "p99": 20220.87,
      "p50": 18995.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7373540856031129,
      "std": 0.4401251487318364,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 24112,
      "mean": 8082.413667315175,
      "std": 3983.9293084354169,
      "p95": 14737.0,
      "p99": 17948.0,
      "p50": 7783.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 46.10731132075472,
      "std": 36.022137321257329,
      "p95": 115.0,
      "p99": 141.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7808.813270494449,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7816.506905640654,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5853.5368687078639,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 154399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154511
    },
    {
      "name": "pred_ones_counter",
      "count": 154399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008711196316038
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18899.512645914398,
      "std": 961.9490781897035,
      "p95": 20126.0,
      "p99": 20240.0,
      "p50": 18986.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8375486381322957,
      "std": 0.36890922147356988,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 24112,
      "mean": 7635.700997081712,
      "std": 3767.8856205551994,
      "p95": 14402.0,
      "p99": 16244.0,
      "p50": 7506.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 42.009516041326808,
      "std": 34.027907194358778,
      "p95": 107.0,
      "p99": 141.0,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7717.426787311889,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7723.0245709652949,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6555.9958854214569,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 232704
    },
    {
      "name": "queued_predictions",
      "count": 100
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232705
    },
    {
      "name": "pred_ones_counter",
      "count": 232704
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49933821507150719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18892.014105058366,
      "std": 965.274386383227,
      "p95": 20126.0,
      "p99": 20239.87,
      "p50": 18967.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8640564202334631,
      "std": 0.34277032503024459,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7599.272495136187,
      "std": 3680.261403467432,
      "p95": 13624.5,
      "p99": 15196.0,
      "p50": 7493.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 42.150823827629917,
      "std": 34.123975995349379,
      "p95": 108.0,
      "p99": 139.76000000000023,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7755.836746249392,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7757.502625249466,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6796.002642478648,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 307799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 307900
    },
    {
      "name": "pred_ones_counter",
      "count": 307799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4997547100542887
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21477,
      "mean": 18895.060311284047,
      "std": 965.231445247902,
      "p95": 20127.0,
      "p99": 20235.87,
      "p50": 18978.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8847276264591439,
      "std": 0.319389200173484,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7404.2143725680939,
      "std": 3610.5495166077596,
      "p95": 13424.5,
      "p99": 15108.75,
      "p50": 7246.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 40.5451672372926,
      "std": 33.31931288369335,
      "p95": 106.0,
      "p99": 133.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7692.539349728392,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7695.063165871948,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6881.636713704904,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 385599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 385685
    },
    {
      "name": "pred_ones_counter",
      "count": 385599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4998820017686768
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21477,
      "mean": 18889.727626459146,
      "std": 963.3944201579374,
      "p95": 20125.0,
      "p99": 20227.87,
      "p50": 18965.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9000486381322957,
      "std": 0.2999716155680854,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7402.482611867705,
      "std": 3562.465992626655,
      "p95": 13147.0,
      "p99": 14904.5,
      "p50": 7250.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 40.88217412451362,
      "std": 33.39492575411227,
      "p95": 106.0,
      "p99": 130.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7709.540238895999,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7711.259540580598,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6966.183647157267,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-193013"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
INFO:clipper::configuration: spark_svm_r0:6001
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-193013"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0766467194252753], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 398
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138073,
      "max": 138073,
      "mean": 138073.0,
      "std": null,
      "p95": 138073.0,
      "p99": 138073.0,
      "p50": 138073.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 919,
      "max": 7167,
      "mean": 5252.912060301507,
      "std": 1657.5273152534649,
      "p95": 7167.0,
      "p99": 7167.0,
      "p50": 5781.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.9,
      "std": 11.670475568716127,
      "p95": 37.0,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995997207037721,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.88407087082538,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 180, alpha = 89.12413770509376, beta = 3961.6551802330328
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8998.200374704644, baseline: 246.86607724387383, increase: 36.449723976516665
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85951
    },
    {
      "name": "queued_predictions",
      "count": 117
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82824
    },
    {
      "name": "pred_ones_counter",
      "count": 85951
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501506672406371
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 22902,
      "mean": 18896.25170233463,
      "std": 976.5528801491375,
      "p95": 20122.0,
      "p99": 20235.0,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0014591439688715954,
      "std": 0.03817550636665436,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18204.089737354087,
      "std": 2158.322887555985,
      "p95": 19342.0,
      "p99": 23429.0,
      "p50": 18677.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 162.71905697445974,
      "std": 39.932542161980979,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 178.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8594.426578543105,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8279.724820910364,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13.523436114786925,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 172199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168504
    },
    {
      "name": "pred_ones_counter",
      "count": 172199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502052857449811
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 22746,
      "mean": 18909.097519455252,
      "std": 980.7940535128435,
      "p95": 20121.0,
      "p99": 20226.87,
      "p50": 19027.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00048638132295719845,
      "std": 0.022051372084047815,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18499.846060311284,
      "std": 1616.8552592104796,
      "p95": 19342.0,
      "p99": 20650.0,
      "p50": 18738.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 171.07005076142134,
      "std": 29.96468393001843,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 180.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8607.63325550928,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8422.932546558466,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6.755126127461825,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 258221
    },
    {
      "name": "queued_predictions",
      "count": 178
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 253104
    },
    {
      "name": "pred_ones_counter",
      "count": 258221
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501562614969348
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21824,
      "mean": 18924.381322957197,
      "std": 971.0069629178411,
      "p95": 20123.0,
      "p99": 20233.87,
      "p50": 19059.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00024319066147859923,
      "std": 0.015594571538795134,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18654.1170963035,
      "std": 1320.330947269255,
      "p95": 19393.0,
      "p99": 20425.0,
      "p50": 18808.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 173.95463917525775,
      "std": 25.001911978957265,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 180.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8607.34041828905,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8434.683175679009,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 4.501955799664567,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_0_hitrate_160905-193132"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_0_hitrate_160905-193132"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0363197366608055], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137183,
      "max": 137183,
      "mean": 137183.0,
      "std": null,
      "p95": 137183.0,
      "p99": 137183.0,
      "p50": 137183.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 947,
      "max": 7273,
      "mean": 5215.0925,
      "std": 1566.1894897291564,
      "p95": 7273.0,
      "p99": 7273.0,
      "p50": 5720.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995974992747094,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983906959725336,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 184, alpha = 86.78688531647678, beta = 4036.6065465186375
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9197.51968428712, baseline: 242.51869644050691, increase: 37.92499225536368
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 78799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 78922
    },
    {
      "name": "pred_ones_counter",
      "count": 78799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4986230789730834
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 22546,
      "mean": 18898.142509727626,
      "std": 977.7792157327097,
      "p95": 20127.0,
      "p99": 20238.0,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.41950389105058369,
      "std": 0.4935378533923545,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 419,
      "max": 36187,
      "mean": 12571.151264591439,
      "std": 6391.200626476156,
      "p95": 20033.0,
      "p99": 21231.0,
      "p50": 12382.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 67.91910499139415,
      "std": 57.82109087014513,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 47.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7877.287103867648,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7889.579870524998,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 3300.074478065033,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 157999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 158152
    },
    {
      "name": "pred_ones_counter",
      "count": 157999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003006348141444
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23103,
      "mean": 18893.03112840467,
      "std": 972.1366787712958,
      "p95": 20124.35,
      "p99": 20222.739999999998,
      "p50": 18992.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5860894941634242,
      "std": 0.4925927411433457,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 419,
      "max": 36187,
      "mean": 11014.523467898833,
      "std": 6237.256442666946,
      "p95": 19770.0,
      "p99": 20689.0,
      "p50": 10069.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 55.66772263287575,
      "std": 52.00098973247414,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 41.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7900.393480123478,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7905.2916548367879,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 4595.121900450551,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 236943
    },
    {
      "name": "queued_predictions",
      "count": 85
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 237001
    },
    {
      "name": "pred_ones_counter",
      "count": 236943
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.50101079162499
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23103,
      "mean": 18895.24805447471,
      "std": 985.5333291332711,
      "p95": 20125.0,
      "p99": 20229.35,
      "p50": 19005.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7037937743190662,
      "std": 0.45663859602042419,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9897.610651750972,
      "std": 5795.5138536070339,
      "p95": 19547.0,
      "p99": 20328.0,
      "p50": 8785.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 50.52419526753358,
      "std": 46.58035220890436,
      "p95": 176.39999999999965,
      "p99": 184.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7896.4955393850909,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7898.627987111495,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5491.886152705194,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 316599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 316697
    },
    {
      "name": "pred_ones_counter",
      "count": 316599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5000331649815698
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18892.974464980543,
      "std": 986.3101867861939,
      "p95": 20126.0,
      "p99": 20235.87,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7568093385214008,
      "std": 0.4290614565829399,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9351.744892996108,
      "std": 5393.446307462489,
      "p95": 19378.0,
      "p99": 20138.0,
      "p50": 8380.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 49.054677819083028,
      "std": 43.8262496082186,
      "p95": 135.0,
      "p99": 184.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7912.75942736034,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7915.208543727542,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5953.661458912244,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 397399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397498
    },
    {
      "name": "pred_ones_counter",
      "count": 397399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5001950181052293
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18874.67607003891,
      "std": 980.4665002654889,
      "p95": 20123.0,
      "p99": 20218.739999999998,
      "p50": 18972.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7431906614785993,
      "std": 0.43692645653101255,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9475.265928988327,
      "std": 5415.413053442102,
      "p95": 19353.0,
      "p99": 20156.0,
      "p50": 8481.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 49.25015487548011,
      "std": 44.574471521693009,
      "p95": 147.39999999999965,
      "p99": 184.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7945.938903625583,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7947.698085124973,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5895.421172349787,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 477199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 477280
    },
    {
      "name": "pred_ones_counter",
      "count": 477199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5002420373890139
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18879.354085603114,
      "std": 978.8460305671802,
      "p95": 20123.0,
      "p99": 20219.87,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7575389105058366,
      "std": 0.42862383061588335,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 385,
      "max": 36187,
      "mean": 9399.681298638132,
      "std": 5365.758752122233,
      "p95": 19309.0,
      "p99": 20134.0,
      "p50": 8436.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 48.86284046692607,
      "std": 44.1652305435335,
      "p95": 140.0,
      "p99": 184.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7951.021808297501,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7953.470958587626,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6020.595611244512,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 553360
    },
    {
      "name": "queued_predictions",
      "count": 98
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 553411
    },
    {
      "name": "pred_ones_counter",
      "count": 553360
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003126355356369
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18895.61794747082,
      "std": 976.132679868491,
      "p95": 20123.0,
      "p99": 20216.87,
      "p50": 18986.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7874513618677043,
      "std": 0.40916063801332916,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 9092.024197470817,
      "std": 5193.00069112836,
      "p95": 19240.5,
      "p99": 20032.0,
      "p50": 8161.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 46.96668287937743,
      "std": 42.44231353549235,
      "p95": 125.0,
      "p99": 184.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7903.365797364361,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7903.836860986604,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6206.771527379366,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 630599
    },
    {
      "name": "queued_predictions",
      "count": 162
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 630667
    },
    {
      "name": "pred_ones_counter",
      "count": 630599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004273714357301
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18889.407344357976,
      "std": 984.8574395732143,
      "p95": 20123.0,
      "p99": 20209.61,
      "p50": 18977.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8093385214007782,
      "std": 0.3928704811752237,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8843.176191634242,
      "std": 5041.7709236598179,
      "p95": 19194.0,
      "p99": 20016.75,
      "p50": 8019.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 45.61636673151751,
      "std": 41.20569567817415,
      "p95": 120.0,
      "p99": 184.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7880.12001644256,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7880.969662664852,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6359.595177812176,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 708199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 708250
    },
    {
      "name": "pred_ones_counter",
      "count": 708199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003452419447076
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18894.130593385213,
      "std": 989.7246049749693,
      "p95": 20123.0,
      "p99": 20209.61,
      "p50": 18991.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8258754863813229,
      "std": 0.3792626371743365,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8637.755107003892,
      "std": 4915.605085271368,
      "p95": 19133.0,
      "p99": 19923.0,
      "p50": 7874.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 44.80836575875487,
      "std": 40.07227142527107,
      "p95": 115.0,
      "p99": 184.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7866.484443588508,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7867.050850517336,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6481.460948068985,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 786398
    },
    {
      "name": "queued_predictions",
      "count": 104
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 786424
    },
    {
      "name": "pred_ones_counter",
      "count": 786398
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004196348413907
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18900.407101167315,
      "std": 983.7452818169536,
      "p95": 20123.35,
      "p99": 20199.87,
      "p50": 18987.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8392509727626459,
      "std": 0.36734397234078206,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8472.217898832685,
      "std": 4785.921201172395,
      "p95": 19080.0,
      "p99": 19923.0,
      "p50": 7769.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.97373540856031,
      "std": 39.17087970310475,
      "p95": 111.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7861.576181649186,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7861.826026318618,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6593.858151792913,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 864399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 864539
    },
    {
      "name": "pred_ones_counter",
      "count": 864399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004182096462397
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18889.647130350193,
      "std": 981.9386514440406,
      "p95": 20122.0,
      "p99": 20209.61,
      "p50": 18976.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8497081712062257,
      "std": 0.357400698115907,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8384.127675097276,
      "std": 4700.229860322658,
      "p95": 19024.25,
      "p99": 19881.0,
      "p50": 7734.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.79474708171206,
      "std": 38.707340945970567,
      "p95": 111.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7856.232989297048,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7857.0144942609299,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6657.936345604365,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 940480
    },
    {
      "name": "queued_predictions",
      "count": 119
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 940545
    },
    {
      "name": "pred_ones_counter",
      "count": 940480
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006145797890439
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 25732,
      "mean": 18889.54742217899,
      "std": 981.8773509291966,
      "p95": 20123.0,
      "p99": 20217.0,
      "p50": 18979.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8596789883268483,
      "std": 0.34736201408771497,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8252.424246108949,
      "std": 4622.506780631296,
      "p95": 18973.0,
      "p99": 19873.0,
      "p50": 7616.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.33925097276265,
      "std": 38.102882880271227,
      "p95": 110.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7835.281347329697,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7835.897755797324,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6719.21259447169,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_0_hitrate_160905-193132_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193449"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193449"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1377914204589354], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 139531,
      "max": 139531,
      "mean": 139531.0,
      "std": null,
      "p95": 139531.0,
      "p99": 139531.0,
      "p50": 139531.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 920,
      "max": 7093,
      "mean": 5223.6125,
      "std": 1587.1071119511062,
      "p95": 7093.0,
      "p99": 7093.0,
      "p50": 5852.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995841211983085,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98336684460689,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 122, alpha = 152.43333305695927, beta = 1443.7666717978948
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6087.631969749303, baseline: 626.4879068778929, increase: 9.717078179668402
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 83235
    },
    {
      "name": "queued_predictions",
      "count": 164
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 75155
    },
    {
      "name": "pred_ones_counter",
      "count": 83235
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09864626674180746
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009431128731904
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23021,
      "mean": 18885.234678988327,
      "std": 972.1736974501091,
      "p95": 20125.0,
      "p99": 20244.739999999998,
      "p50": 18962.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8083657587548638,
      "std": 0.3936346539529918,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 399,
      "max": 23814,
      "mean": 7784.210116731518,
      "std": 3878.780366785553,
      "p95": 13337.0,
      "p99": 16464.0,
      "p50": 7429.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 41.226001097092709,
      "std": 33.65354972647158,
      "p95": 122.0,
      "p99": 122.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8326.316428215187,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7513.075530526299,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6656.7667979881839,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 166399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 150082
    },
    {
      "name": "pred_ones_counter",
      "count": 166399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09839794956752442
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5011208000048077
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 20758,
      "mean": 18880.114299610894,
      "std": 973.9925324366317,
      "p95": 20125.0,
      "p99": 20245.87,
      "p50": 18985.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8927529182879378,
      "std": 0.3094647559341808,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7330.912329766537,
      "std": 3555.363071759113,
      "p95": 13065.0,
      "p99": 14597.0,
      "p50": 7213.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 38.49243395742498,
      "std": 31.999152305672433,
      "p95": 101.0,
      "p99": 122.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8317.557454598185,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7501.941691375391,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7383.732421322832,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 248400
    },
    {
      "name": "queued_predictions",
      "count": 199
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 224262
    },
    {
      "name": "pred_ones_counter",
      "count": 248399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09764721499281977
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501060793320424
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18880.413910505835,
      "std": 975.318082266892,
      "p95": 20125.0,
      "p99": 20246.87,
      "p50": 18984.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.915612840466926,
      "std": 0.2780013700889763,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7197.988934824903,
      "std": 3485.397826922628,
      "p95": 12960.0,
      "p99": 14261.0,
      "p50": 7155.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 37.476938502673799,
      "std": 31.58566907067813,
      "p95": 99.0,
      "p99": 122.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8280.002876488987,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7475.269186701416,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7542.696355885137,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 330799
    },
    {
      "name": "queued_predictions",
      "count": 115
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 298553
    },
    {
      "name": "pred_ones_counter",
      "count": 330799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09760542013937156
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5010504868515322
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18894.492704280157,
      "std": 965.7176380818265,
      "p95": 20124.0,
      "p99": 20251.35,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9348249027237354,
      "std": 0.24686458742979359,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7091.665612840467,
      "std": 3406.1593568776945,
      "p95": 12812.0,
      "p99": 14242.0,
      "p50": 7039.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 36.83565700185071,
      "std": 31.199765339608214,
      "p95": 97.0,
      "p99": 122.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8267.498470833061,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7461.58969426734,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7658.000490555727,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 415159
    },
    {
      "name": "queued_predictions",
      "count": 96
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 374707
    },
    {
      "name": "pred_ones_counter",
      "count": 415159
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09757642310489484
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009863690778714
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18892.09873540856,
      "std": 966.1754527898557,
      "p95": 20124.35,
      "p99": 20251.35,
      "p50": 18995.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9455252918287938,
      "std": 0.22697961023264066,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 270,
      "max": 23814,
      "mean": 6443.597641050584,
      "std": 3446.3689928357705,
      "p95": 12608.0,
      "p99": 14231.0,
      "p50": 6043.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 34.27407587548638,
      "std": 29.655077075825678,
      "p95": 94.0,
      "p99": 122.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8301.326269196115,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7492.413015851042,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7798.51303716263,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 499399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 450857
    },
    {
      "name": "pred_ones_counter",
      "count": 499399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09756224492042619
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008199856227185
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18897.383754863815,
      "std": 965.8501757585652,
      "p95": 20124.35,
      "p99": 20241.87,
      "p50": 18995.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9547665369649806,
      "std": 0.20784105028430645,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 270,
      "max": 23814,
      "mean": 6004.295355058366,
      "std": 3376.5824879986005,
      "p95": 12174.0,
      "p99": 14166.5,
      "p50": 5482.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 32.27419747081712,
      "std": 28.540058243908065,
      "p95": 89.0,
      "p99": 120.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8321.70667880866,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7511.942111375288,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7899.717351030607,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193633"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193633"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0240372545897012], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138222,
      "max": 138222,
      "mean": 138222.0,
      "std": null,
      "p95": 138222.0,
      "p99": 138222.0,
      "p50": 138222.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 931,
      "max": 7004,
      "mean": 5204.145363408521,
      "std": 1540.5413324240477,
      "p95": 7004.0,
      "p99": 7004.0,
      "p50": 5764.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049956657603862888,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.932709371255905,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 161, alpha = 104.5555554480285, beta = 3206.111115594119
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8034.110320297719, baseline: 302.05396657622896, increase: 26.59826126888541
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 84999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 76863
    },
    {
      "name": "pred_ones_counter",
      "count": 84999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09750114437962887
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49262932505088299
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 27279,
      "mean": 18864.857247081713,
      "std": 980.8923752942986,
      "p95": 20123.35,
      "p99": 20236.87,
      "p50": 18934.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6412937743190662,
      "std": 0.4796790860258598,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 431,
      "max": 30153,
      "mean": 9575.943093385215,
      "std": 5436.506992041733,
      "p95": 18525.0,
      "p99": 19930.0,
      "p50": 8203.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 48.665822784810128,
      "std": 43.94559906615598,
      "p95": 161.0,
      "p99": 175.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8503.340326648147,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7686.611917767288,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5459.276307057371,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 169599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 153085
    },
    {
      "name": "pred_ones_counter",
      "count": 169599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09770375561693531
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4946550392396182
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21587,
      "mean": 18856.573443579768,
      "std": 974.9023008413991,
      "p95": 20120.35,
      "p99": 20227.61,
      "p50": 18926.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7962062256809338,
      "std": 0.4028664071855287,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 384,
      "max": 30153,
      "mean": 7832.590831712062,
      "std": 4805.146165661678,
      "p95": 17953.0,
      "p99": 18972.0,
      "p50": 6806.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 39.44473073950013,
      "std": 36.48396906375819,
      "p95": 110.0,
      "p99": 165.35999999999968,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8477.449152500012,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7651.992279677881,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6774.459242888757,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 255595
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 230504
    },
    {
      "name": "pred_ones_counter",
      "count": 255595
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09839520752031408
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49496273401279369
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 21429,
      "mean": 18871.582928015563,
      "std": 980.2474684595923,
      "p95": 20122.0,
      "p99": 20234.87,
      "p50": 18947.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8482490272373541,
      "std": 0.3588229741541985,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 30153,
      "mean": 6667.666464007782,
      "std": 4638.637941082574,
      "p95": 16549.0,
      "p99": 18759.0,
      "p50": 5509.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 33.33516483516483,
      "std": 32.273826362860919,
      "p95": 93.0,
      "p99": 161.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8517.502269343404,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7682.64356570687,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7244.431114729431,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 340501
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 307155
    },
    {
      "name": "pred_ones_counter",
      "count": 340501
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09821454782440216
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49470926663945188
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 23426,
      "mean": 18880.895671206225,
      "std": 993.4534693327371,
      "p95": 20124.0,
      "p99": 20249.739999999998,
      "p50": 18962.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8706225680933852,
      "std": 0.3356580274843272,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 30153,
      "mean": 6588.269455252918,
      "std": 4385.974189173119,
      "p95": 16317.25,
      "p99": 18743.0,
      "p50": 5611.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 33.23820525291829,
      "std": 31.202547542037878,
      "p95": 90.0,
      "p99": 161.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8511.121345848149,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7677.018965739805,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7459.489606525332,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 430329
    },
    {
      "name": "queued_predictions",
      "count": 205
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 387111
    },
    {
      "name": "pred_ones_counter",
      "count": 430329
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09842473962446462
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49489344199438109
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 23426,
      "mean": 18889.921449416343,
      "std": 984.8089346216167,
      "p95": 20123.0,
      "p99": 20237.87,
      "p50": 18975.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8509241245136187,
      "std": 0.35620656313879658,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 326,
      "max": 30153,
      "mean": 6950.962548638132,
      "std": 4537.314953664425,
      "p95": 16314.0,
      "p99": 18533.0,
      "p50": 6006.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 35.110651750972767,
      "std": 33.42915445559517,
      "p95": 97.0,
      "p99": 161.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8605.372055944725,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7739.874198927789,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7383.535649801623,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193804"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
INFO:clipper::configuration: spark_svm_r0:6001
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193804"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0466401004560435], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 396
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136819,
      "max": 136819,
      "mean": 136819.0,
      "std": null,
      "p95": 136819.0,
      "p99": 136819.0,
      "p50": 136819.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 959,
      "max": 7073,
      "mean": 5181.106060606061,
      "std": 1536.097501145836,
      "p95": 7073.0,
      "p99": 7073.0,
      "p50": 5816.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.8,
      "std": 11.523888232710347,
      "p95": 36.9,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049957383853703598,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.78312598269306,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 182, alpha = 84.38888891094089, beta = 4638.55555152112
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9101.213495142229, baseline: 211.7323234716093, increase: 42.98452567806723
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 98249
    },
    {
      "name": "queued_predictions",
      "count": 230
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82470
    },
    {
      "name": "pred_ones_counter",
      "count": 98249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09388803704343057
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4931653248379118
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20532,
      "mean": 18863.76823929961,
      "std": 954.7236382978603,
      "p95": 20118.35,
      "p99": 20233.61,
      "p50": 18948.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.10043774319066148,
      "std": 0.3006193283126654,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1395,
      "max": 32611,
      "mean": 18248.84520914397,
      "std": 2243.252161753683,
      "p95": 19379.0,
      "p99": 24874.0,
      "p50": 18572.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 162.02357563850689,
      "std": 38.861750649804488,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 176.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9821.300493369181,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8243.97528546776,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 936.3886770294481,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 195999
    },
    {
      "name": "queued_predictions",
      "count": 180
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 166008
    },
    {
      "name": "pred_ones_counter",
      "count": 195999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09010138699860841
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4930229235863448
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20479,
      "mean": 18873.530398832685,
      "std": 956.4026399893969,
      "p95": 20118.35,
      "p99": 20218.0,
      "p50": 18971.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.09557392996108949,
      "std": 0.294041800223356,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2566,
      "max": 32611,
      "mean": 18800.1546692607,
      "std": 1660.917964015303,
      "p95": 19757.0,
      "p99": 20561.0,
      "p50": 19061.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 171.49586776859506,
      "std": 29.88281115896222,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 182.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9797.108838436854,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8297.993167081888,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 889.9100462813269,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 294870
    },
    {
      "name": "queued_predictions",
      "count": 144
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 251184
    },
    {
      "name": "pred_ones_counter",
      "count": 294870
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0857894397873992
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49394648489164719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20803,
      "mean": 18852.450875486382,
      "std": 959.8324179316363,
      "p95": 20119.0,
      "p99": 20218.61,
      "p50": 18930.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0914396887159533,
      "std": 0.28826841808746658,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2566,
      "max": 32611,
      "mean": 18913.156614785992,
      "std": 1377.991033399138,
      "p95": 19800.0,
      "p99": 20518.0,
      "p50": 19121.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 174.9192200557103,
      "std": 25.020167886401816,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 182.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9827.659141815455,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8370.607179939096,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 847.4275578159552,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193931"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193931"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1748452665894467], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 140086,
      "max": 140086,
      "mean": 140086.0,
      "std": null,
      "p95": 140086.0,
      "p99": 140086.0,
      "p50": 140086.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 928,
      "max": 7160,
      "mean": 5134.3,
      "std": 1508.9724133863129,
      "p95": 7160.0,
      "p99": 7160.0,
      "p50": 5688.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995757353067907,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98303140887915,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 173, alpha = 94.56000003110348, beta = 3598.1599970433927
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8668.620195128371, baseline: 270.80309386908175, increase: 32.01078714159435
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 95799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 81793
    },
    {
      "name": "pred_ones_counter",
      "count": 95799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09362597527057573
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5020720466810719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22803,
      "mean": 18848.96887159533,
      "std": 966.048070610432,
      "p95": 20113.0,
      "p99": 20220.739999999998,
      "p50": 18909.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.2176556420233463,
      "std": 0.4127021740945119,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 374,
      "max": 33548,
      "mean": 15507.834022373541,
      "std": 5005.762828712282,
      "p95": 19087.0,
      "p99": 23572.0,
      "p50": 17834.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 103.1437578814628,
      "std": 66.98097886564462,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 96.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9576.428544652565,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8176.333626160428,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2069.10085622008,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 198723
    },
    {
      "name": "queued_predictions",
      "count": 205
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168293
    },
    {
      "name": "pred_ones_counter",
      "count": 198722
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.08967701394998115
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5020581515886515
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22803,
      "mean": 18851.82879377432,
      "std": 964.9144194662504,
      "p95": 20103.0,
      "p99": 20220.739999999998,
      "p50": 18935.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.14931906614785993,
      "std": 0.3564460420955988,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 790,
      "max": 33548,
      "mean": 16712.412329766536,
      "std": 3809.5367168695736,
      "p95": 18760.0,
      "p99": 19887.0,
      "p50": 17868.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 130.1569992266048,
      "std": 62.51745966132635,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 173.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9936.35206292085,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8412.196162379432,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1476.321783106894,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 301701
    },
    {
      "name": "queued_predictions",
      "count": 170
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 254101
    },
    {
      "name": "pred_ones_counter",
      "count": 301701
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.08753739179980853
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5017782506521358
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17016,
      "max": 23699,
      "mean": 18830.33706225681,
      "std": 960.5290258216077,
      "p95": 20098.35,
      "p99": 20206.0,
      "p50": 18886.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1293774319066148,
      "std": 0.33565802748431797,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 790,
      "max": 33548,
      "mean": 17184.892752918287,
      "std": 3136.989980473423,
      "p95": 18661.0,
      "p99": 19567.25,
      "p50": 17944.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 142.03521520402459,
      "std": 56.49979104236921,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 173.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10054.121040944283,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8467.692580847566,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1269.9725636838735,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-194046"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
INFO:clipper::configuration: spark_svm_r0:6001
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-194046"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1384064028623473], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 134903,
      "max": 134903,
      "mean": 134903.0,
      "std": null,
      "p95": 134903.0,
      "p99": 134903.0,
      "p50": 134903.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 948,
      "max": 7296,
      "mean": 5291.165,
      "std": 1634.2336926463234,
      "p95": 7296.0,
      "p99": 7296.0,
      "p50": 5752.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995817252005758,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983275996318679,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 160, alpha = 104.56249998017225, beta = 3242.4374999157412
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8011.040216102295, baseline: 298.7750224174181, increase: 26.81295160246054
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85549
    },
    {
      "name": "queued_predictions",
      "count": 86
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77240
    },
    {
      "name": "pred_ones_counter",
      "count": 85549
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09762363519588953
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502051455890776
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18908.71546692607,
      "std": 977.2975092444279,
      "p95": 20122.0,
      "p99": 20222.87,
      "p50": 19028.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7188715953307393,
      "std": 0.44960469791133647,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 455,
      "max": 24960,
      "mean": 8465.185311284047,
      "std": 4806.673507672687,
      "p95": 16707.0,
      "p99": 19863.0,
      "p50": 7372.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 43.936291240045509,
      "std": 38.93162624736593,
      "p95": 133.04999999999996,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8553.09116486146,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7721.461183562845,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6182.401737407453,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 171199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154534
    },
    {
      "name": "pred_ones_counter",
      "count": 171199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09730511846626877
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501907137308045
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18911.427285992217,
      "std": 979.1948308306666,
      "p95": 20124.0,
      "p99": 20235.22,
      "p50": 19033.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8312256809338522,
      "std": 0.37459801614120427,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 444,
      "max": 24960,
      "mean": 7725.665734435797,
      "std": 4221.33583643407,
      "p95": 16436.0,
      "p99": 17550.0,
      "p50": 7015.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 40.99045092838196,
      "std": 35.05988379009931,
      "p95": 106.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8558.25855930824,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7724.360291267775,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7095.658898802374,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257457
    },
    {
      "name": "queued_predictions",
      "count": 142
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232382
    },
    {
      "name": "pred_ones_counter",
      "count": 257457
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09765177659851164
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5019284773768047
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18901.560068093386,
      "std": 979.4772970927469,
      "p95": 20125.0,
      "p99": 20222.87,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8584630350194552,
      "std": 0.3486169938656488,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 433,
      "max": 24960,
      "mean": 7511.822227626459,
      "std": 4066.7471829034304,
      "p95": 16260.0,
      "p99": 17521.0,
      "p50": 6884.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 40.704501664039238,
      "std": 34.26964598596498,
      "p95": 104.5,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8580.429875238036,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7745.812945968486,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7373.487364509223,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 342858
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 309437
    },
    {
      "name": "pred_ones_counter",
      "count": 342858
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09783993539339765
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502079578134388
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18902.549854085602,
      "std": 982.4467953096429,
      "p95": 20124.0,
      "p99": 20223.87,
      "p50": 18992.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8813229571984436,
      "std": 0.32344743698705849,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7283.132174124514,
      "std": 3917.732180742475,
      "p95": 15906.0,
      "p99": 17121.0,
      "p50": 6676.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.80447645999485,
      "std": 33.215921102215848,
      "p95": 101.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8569.689310492791,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7733.666366174007,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7551.835240069064,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 428796
    },
    {
      "name": "queued_predictions",
      "count": 102
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 386860
    },
    {
      "name": "pred_ones_counter",
      "count": 428796
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0979417017565948
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5021805240720529
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18886.199659533075,
      "std": 986.0035541398121,
      "p95": 20125.0,
      "p99": 20236.739999999998,
      "p50": 18978.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8925097276264592,
      "std": 0.3097732237633597,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7212.667193579767,
      "std": 3847.934551521682,
      "p95": 15224.0,
      "p99": 17121.0,
      "p50": 6626.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.507538910505839,
      "std": 32.77672122165385,
      "p95": 100.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8573.321584443096,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7734.801438074053,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7639.978208180285,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 513457
    },
    {
      "name": "queued_predictions",
      "count": 142
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 463288
    },
    {
      "name": "pred_ones_counter",
      "count": 513457
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0977941935245201
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5021686334006548
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18900.239785992217,
      "std": 990.8780360411107,
      "p95": 20128.0,
      "p99": 20244.0,
      "p50": 18989.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9010214007782101,
      "std": 0.29866959936231615,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7107.43579766537,
      "std": 3790.8447567918399,
      "p95": 14802.5,
      "p99": 17121.0,
      "p50": 6497.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.01714494163424,
      "std": 32.39569851203038,
      "p95": 99.0,
      "p99": 151.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8555.355759604974,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7720.4201941808009,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7681.6697188029,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "cache_hit_rate_10_hitrate_160905-194229"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "cache_hit_rate_10_hitrate_160905-194229"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0414933594463665], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 135776,
      "max": 135776,
      "mean": 135776.0,
      "std": null,
      "p95": 135776.0,
      "p99": 135776.0,
      "p50": 135776.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 888,
      "max": 6957,
      "mean": 5178.2205513784469,
      "std": 1613.5053093794502,
      "p95": 6957.0,
      "p99": 6957.0,
      "p50": 5609.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0499517441175952,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93075187637539,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 178, alpha = 94.33962265370529, beta = 3163.43396084343
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8919.673770680403, baseline: 306.95810324747185, increase: 29.0582775835349
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85328
    },
    {
      "name": "queued_predictions",
      "count": 107
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 76983
    },
    {
      "name": "pred_ones_counter",
      "count": 85329
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09863523573200993
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49967771800911767
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 25735,
      "mean": 18875.951605058366,
      "std": 980.2748473260082,
      "p95": 20126.35,
      "p99": 20241.35,
      "p50": 18942.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6840953307392996,
      "std": 0.46493169138350345,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 30650,
      "mean": 9057.051921206226,
      "std": 5323.108257786864,
      "p95": 18760.0,
      "p99": 21808.0,
      "p50": 8051.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 46.776427703523697,
      "std": 41.12403748668933,
      "p95": 136.0,
      "p99": 178.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8533.822086629216,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7696.981608378647,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5795.290760271785,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 170789
    },
    {
      "name": "queued_predictions",
      "count": 100
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154015
    },
    {
      "name": "pred_ones_counter",
      "count": 170789
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09845572272059641
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5019527018719004
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18872.29280155642,
      "std": 990.7961372142056,
      "p95": 20128.0,
      "p99": 20246.61,
      "p50": 18944.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8047178988326849,
      "std": 0.39646592301309727,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 30650,
      "mean": 7928.291585603113,
      "std": 4826.915878721373,
      "p95": 18555.0,
      "p99": 21076.0,
      "p50": 6908.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.979249800478857,
      "std": 35.950310089049029,
      "p95": 107.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8537.475839501712,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7699.8182076925,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6883.529356312023,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257330
    },
    {
      "name": "queued_predictions",
      "count": 154
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232092
    },
    {
      "name": "pred_ones_counter",
      "count": 257330
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09810706684687204
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5011813624528815
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 26199,
      "mean": 18884.645671206225,
      "std": 984.2248222783495,
      "p95": 20127.0,
      "p99": 20238.739999999998,
      "p50": 18967.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8054474708171207,
      "std": 0.3959039785933717,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 8026.265928988327,
      "std": 4909.525643823105,
      "p95": 18759.0,
      "p99": 19913.5,
      "p50": 6908.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 41.07096089187755,
      "std": 36.84820463604102,
      "p95": 109.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8576.913266946804,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7736.223419749053,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6960.217112462275,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 343199
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 309487
    },
    {
      "name": "pred_ones_counter",
      "count": 343199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09841823673150799
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49995775045964588
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 26199,
      "mean": 18869.010700389106,
      "std": 986.1511582487694,
      "p95": 20125.35,
      "p99": 20226.61,
      "p50": 18945.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8312256809338522,
      "std": 0.37459801614120427,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 7748.089858949416,
      "std": 4640.3874499429889,
      "p95": 18635.0,
      "p99": 19503.0,
      "p50": 6813.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.57249606712113,
      "std": 35.602408919480698,
      "p95": 104.54999999999927,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8577.490529868024,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7734.934382882639,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7209.166295083357,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 429247
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 387365
    },
    {
      "name": "pred_ones_counter",
      "count": 429247
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09785770344132147
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49931857415427485
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18867.885214007783,
      "std": 992.9667027331806,
      "p95": 20125.0,
      "p99": 20231.739999999998,
      "p50": 18946.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8467898832684825,
      "std": 0.36023372317140969,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 7729.9956225680939,
      "std": 4600.893729513997,
      "p95": 18594.0,
      "p99": 19534.25,
      "p50": 6834.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.50924124513619,
      "std": 35.04906881178408,
      "p95": 104.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8582.994112286413,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7745.282439417171,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7301.35571317493,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 513633
    },
    {
      "name": "queued_predictions",
      "count": 166
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 463457
    },
    {
      "name": "pred_ones_counter",
      "count": 513633
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09793907734347479
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49987637087180927
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18873.947714007783,
      "std": 994.1031212869704,
      "p95": 20127.0,
      "p99": 20232.0,
      "p50": 18968.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8657587548638133,
      "std": 0.3409527883211566,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 381,
      "max": 30650,
      "mean": 7628.030034046693,
      "std": 4511.536229343423,
      "p95": 18501.0,
      "p99": 19578.25,
      "p50": 6801.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.17157101167315,
      "std": 34.45049765501801,
      "p95": 103.0,
      "p99": 178.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8558.66475812462,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7722.330663035127,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7372.260661706713,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 599347
    },
    {
      "name": "queued_predictions",
      "count": 140
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 540709
    },
    {
      "name": "pred_ones_counter",
      "count": 599347
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09795041427086826
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49998081245088407
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18857.453550583657,
      "std": 996.0421601049025,
      "p95": 20124.0,
      "p99": 20228.87,
      "p50": 18943.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8708657587548638,
      "std": 0.3353892432896663,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 30650,
      "mean": 7539.488205252918,
      "std": 4398.11479539572,
      "p95": 17973.0,
      "p99": 19470.0,
      "p50": 6749.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.957076848249027,
      "std": 34.10901653365295,
      "p95": 102.0,
      "p99": 170.75,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8560.268195211383,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7722.104493944368,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7435.602173776678,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 685294
    },
    {
      "name": "queued_predictions",
      "count": 158
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 618123
    },
    {
      "name": "pred_ones_counter",
      "count": 685294
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09811190280282208
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4993608582593748
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18873.297178988327,
      "std": 994.7931821604859,
      "p95": 20124.35,
      "p99": 20227.87,
      "p50": 18969.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8752431906614786,
      "std": 0.3304831446981275,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7453.756809338522,
      "std": 4324.013985979321,
      "p95": 16824.0,
      "p99": 19462.75,
      "p50": 6700.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.780034046692609,
      "std": 33.86604920527658,
      "p95": 101.0,
      "p99": 163.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8564.479238949552,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7724.607468714656,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7498.2147360736139,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 771199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 695578
    },
    {
      "name": "pred_ones_counter",
      "count": 771199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09822672832088193
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49935360393361508
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18875.13959143969,
      "std": 991.4147148994297,
      "p95": 20126.0,
      "p99": 20232.0,
      "p50": 18964.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.881079766536965,
      "std": 0.32373399391623716,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7458.087427042801,
      "std": 4290.804445073395,
      "p95": 16588.0,
      "p99": 19461.75,
      "p50": 6698.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.70355058365759,
      "std": 33.841884810045879,
      "p95": 101.0,
      "p99": 160.5,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8566.411180094528,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7726.289471413557,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7529.669010406071,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 856998
    },
    {
      "name": "queued_predictions",
      "count": 186
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 772894
    },
    {
      "name": "pred_ones_counter",
      "count": 856998
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09808745846866017
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.499577595280269
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18869.734435797665,
      "std": 986.4342649102531,
      "p95": 20126.35,
      "p99": 20231.87,
      "p50": 18954.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8881322957198443,
      "std": 0.3152419526275824,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7438.880836575875,
      "std": 4269.477196190132,
      "p95": 16157.25,
      "p99": 19461.75,
      "p50": 6696.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.63691634241245,
      "std": 33.827559203529727,
      "p95": 101.0,
      "p99": 163.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8567.377977802129,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7727.443979605058,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7559.049008481007,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 944137
    },
    {
      "name": "queued_predictions",
      "count": 113
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 851609
    },
    {
      "name": "pred_ones_counter",
      "count": 944136
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09806724913952873
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4999179144552115
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18877.168774319067,
      "std": 984.6146833387284,
      "p95": 20126.35,
      "p99": 20232.0,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8910505836575876,
      "std": 0.3116136318863225,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7419.787329766537,
      "std": 4236.732862799876,
      "p95": 15958.0,
      "p99": 19513.0,
      "p50": 6684.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.528453307392997,
      "std": 33.545225845943289,
      "p95": 99.0,
      "p99": 157.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8580.838097946182,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7739.741729300844,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7608.949109852897,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_10_hitrate_160905-194229_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
