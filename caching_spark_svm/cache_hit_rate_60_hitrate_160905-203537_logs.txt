/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "cache_hit_rate_debug_160905-192032"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
INFO:clipper::configuration: spark_svm_r0:6001
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "cache_hit_rate_debug_160905-192032"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1962510726844082], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138974,
      "max": 138974,
      "mean": 138974.0,
      "std": null,
      "p95": 138974.0,
      "p99": 138974.0,
      "p50": 138974.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 931,
      "max": 7076,
      "mean": 5284.130325814536,
      "std": 1620.3100308391093,
      "p95": 7076.0,
      "p99": 7076.0,
      "p50": 5746.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996230094582133,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93496006937566,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 174, alpha = 89.18333338290198, beta = 4499.999991005059
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8692.220462846557, baseline: 217.9036942555276, increase: 39.890193199999224
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 86199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 80398
    },
    {
      "name": "pred_ones_counter",
      "count": 86199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89183
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4500000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 174
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8692220
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 217904
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4987296836390213
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 22843,
      "mean": 18923.739785992217,
      "std": 976.990153009911,
      "p95": 20121.0,
      "p99": 20225.739999999998,
      "p50": 19041.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0014591439688715954,
      "std": 0.03817550636665436,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2124,
      "max": 33383,
      "mean": 18198.889226653697,
      "std": 2143.906530436243,
      "p95": 19482.0,
      "p99": 22448.0,
      "p50": 18559.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 180,
      "mean": 158.26377952755906,
      "std": 37.589096092561408,
      "p95": 178.0,
      "p99": 178.0,
      "p50": 172.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8617.040004422533,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8037.129261946255,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13.624096940258236,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192032",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 172999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 162700
    },
    {
      "name": "pred_ones_counter",
      "count": 172999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89183
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4500000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 174
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8692220
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 217904
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5007138769588263
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22393,
      "mean": 18895.097519455252,
      "std": 973.5883635316108,
      "p95": 20121.0,
      "p99": 20222.87,
      "p50": 19007.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00048638132295719845,
      "std": 0.022051372084047815,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2366,
      "max": 33383,
      "mean": 18508.507782101166,
      "std": 1522.0894236969123,
      "p95": 19419.0,
      "p99": 20144.0,
      "p50": 18734.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 180,
      "mean": 165.85117227319064,
      "std": 28.157977648563784,
      "p95": 176.0,
      "p99": 178.0,
      "p50": 174.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8647.585750055936,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8132.7760923775399,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6.805288049078536,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-192155"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
INFO:clipper::configuration: spark_svm_r0:6001
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-192155"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1221549309029017], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 140468,
      "max": 140468,
      "mean": 140468.0,
      "std": null,
      "p95": 140468.0,
      "p99": 140468.0,
      "p50": 140468.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 922,
      "max": 6976,
      "mean": 5177.969773299748,
      "std": 1584.1043143941022,
      "p95": 6976.0,
      "p99": 6976.0,
      "p50": 5762.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.85,
      "std": 11.595257651298655,
      "p95": 36.95,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049960508715885528,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.83432394207238,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 177, alpha = 94.75362308278278, beta = 3217.63768423716
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8854.857345327893, baseline: 301.89669855434454, increase: 29.33075249822226
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85203
    },
    {
      "name": "queued_predictions",
      "count": 196
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 83223
    },
    {
      "name": "pred_ones_counter",
      "count": 85203
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 94754
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3217638
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8854857
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 301897
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4996302947079328
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23584,
      "mean": 18883.491488326847,
      "std": 978.5289752546012,
      "p95": 20121.0,
      "p99": 20237.87,
      "p50": 18968.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.11065175097276264,
      "std": 0.31373855149330145,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 836,
      "max": 32400,
      "mean": 15834.434581712063,
      "std": 5194.466819155195,
      "p95": 19318.0,
      "p99": 21945.0,
      "p50": 18369.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 113.07472826086956,
      "std": 64.79903931791466,
      "p95": 183.0,
      "p99": 183.0,
      "p50": 117.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8524.941845179723,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8319.409005370635,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1006.6106341116093,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192155",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 171199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168183
    },
    {
      "name": "pred_ones_counter",
      "count": 171199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 94754
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3217638
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8854857
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 301897
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4990449710570739
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 25800,
      "mean": 18893.482490272374,
      "std": 997.2134470113902,
      "p95": 20121.0,
      "p99": 20240.87,
      "p50": 19001.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.049854085603112847,
      "std": 0.2176698834672826,
      "p95": 0.34999999999990907,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 853,
      "max": 32400,
      "mean": 17270.574173151752,
      "std": 3929.7220389626647,
      "p95": 19191.0,
      "p99": 20428.0,
      "p50": 18516.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 138.30838815789475,
      "std": 59.30614826273799,
      "p95": 177.0,
      "p99": 183.0,
      "p50": 177.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8557.459779204251,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8406.703229025192,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 502.8182389372857,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 150
target_qps = 14000
name = "cache_hit_rate_debug_160905-192307"
cache_hit_rate = 0.0
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 150
target_qps = 14000
name = "cache_hit_rate_debug_160905-192307"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0466401004560435], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136139,
      "max": 136139,
      "mean": 136139.0,
      "std": null,
      "p95": 136139.0,
      "p99": 136139.0,
      "p50": 136139.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 933,
      "max": 7119,
      "mean": 5115.0125,
      "std": 1508.416726204497,
      "p95": 7119.0,
      "p99": 7119.0,
      "p50": 5513.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996064849521274,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98426538864625,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 180, alpha = 92.00000000593226, beta = 3464.999998663878
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8988.76404506426, baseline: 281.1357886910216, increase: 31.97303369633681
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 79833
    },
    {
      "name": "queued_predictions",
      "count": 161
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 79948
    },
    {
      "name": "pred_ones_counter",
      "count": 79834
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4998622140942456
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21512,
      "mean": 18880.78112840467,
      "std": 927.7535380396377,
      "p95": 20105.0,
      "p99": 20220.0,
      "p50": 18938.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7446498054474708,
      "std": 0.4361109099636062,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 436,
      "max": 35467,
      "mean": 8388.303988326848,
      "std": 5278.17205724135,
      "p95": 18559.75,
      "p99": 23384.0,
      "p50": 6901.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 46.780573434757169,
      "std": 38.31490616673352,
      "p95": 141.5,
      "p99": 180.0,
      "p50": 39.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7985.584901133614,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7992.079496139514,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5921.582753703268,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 161849
    },
    {
      "name": "queued_predictions",
      "count": 150
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 161886
    },
    {
      "name": "pred_ones_counter",
      "count": 161849
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005529845720393
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23744,
      "mean": 18912.647130350193,
      "std": 928.7822512292785,
      "p95": 20104.0,
      "p99": 20222.87,
      "p50": 18999.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8686770428015564,
      "std": 0.33779429743327807,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 436,
      "max": 35467,
      "mean": 7427.150778210117,
      "std": 4253.748170567423,
      "p95": 16286.0,
      "p99": 19520.0,
      "p50": 6673.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 44.73224647692733,
      "std": 33.77168466541029,
      "p95": 99.0,
      "p99": 167.0,
      "p50": 39.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8090.147948401282,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8091.997017648777,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7005.922214418627,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 242040
    },
    {
      "name": "queued_predictions",
      "count": 165
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 242111
    },
    {
      "name": "pred_ones_counter",
      "count": 242040
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5002644191042803
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23983,
      "mean": 18898.081955252917,
      "std": 935.5171383113236,
      "p95": 20101.0,
      "p99": 20221.0,
      "p50": 18983.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9088035019455253,
      "std": 0.28792335311367309,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 304,
      "max": 35467,
      "mean": 7047.233341439689,
      "std": 3852.458114998069,
      "p95": 15165.0,
      "p99": 19013.0,
      "p50": 6472.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 42.617672944904068,
      "std": 31.778291115218435,
      "p95": 93.0,
      "p99": 151.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8067.581658621556,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8068.081248185097,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7330.790818709295,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 320997
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 320999
    },
    {
      "name": "pred_ones_counter",
      "count": 320997
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005280423181525
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23983,
      "mean": 18896.958657587547,
      "std": 938.9562256661906,
      "p95": 20101.0,
      "p99": 20221.0,
      "p50": 18966.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9355544747081712,
      "std": 0.24557476591163397,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 288,
      "max": 35467,
      "mean": 6834.363691634241,
      "std": 3619.135417443222,
      "p95": 14054.5,
      "p99": 18766.0,
      "p50": 6357.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 40.996040868454667,
      "std": 30.766469808653594,
      "p95": 91.0,
      "p99": 147.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8022.679510824965,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8022.679310315353,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7460.93243438761,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192307",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 401249
    },
    {
      "name": "queued_predictions",
      "count": 150
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 401269
    },
    {
      "name": "pred_ones_counter",
      "count": 401249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 92000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3465000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8988764
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 281136
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005096585910495
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 23983,
      "mean": 18910.201848249028,
      "std": 938.2820766072434,
      "p95": 20100.35,
      "p99": 20222.739999999998,
      "p50": 18985.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9421206225680934,
      "std": 0.23354361339092687,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 288,
      "max": 35467,
      "mean": 6790.734557392996,
      "std": 3510.203943416297,
      "p95": 13135.75,
      "p99": 18592.0,
      "p50": 6372.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 180,
      "mean": 40.69163424124513,
      "std": 30.43169072878469,
      "p95": 91.0,
      "p99": 137.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8022.652468065964,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8023.052031222621,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7519.776209533369,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192517"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192517"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::correction_policy: OLD correction state: [1.0466401004560435], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1210440574479517], offline_model_order: ["spark_svm"], labels: Some([1, -1])
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192547"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 14000
name = "cache_hit_rate_debug_160905-192547"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1698090764346734], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137062,
      "max": 137062,
      "mean": 137062.0,
      "std": null,
      "p95": 137062.0,
      "p99": 137062.0,
      "p50": 137062.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 955,
      "max": 7313,
      "mean": 5288.6375,
      "std": 1652.8696155501132,
      "p95": 7313.0,
      "p99": 7313.0,
      "p50": 5770.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995981981491386,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983933916327968,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 14
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 148, alpha = 118.3571428511616, beta = 2441.214285411812
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7415.5461632898405, baseline: 390.6904058069751, increase: 18.98062008452179
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 72091
    },
    {
      "name": "queued_predictions",
      "count": 108
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 72140
    },
    {
      "name": "pred_ones_counter",
      "count": 72091
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4999375788933431
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23474,
      "mean": 18880.5423151751,
      "std": 972.4306903278003,
      "p95": 20124.0,
      "p99": 20245.48,
      "p50": 18947.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7174124513618677,
      "std": 0.4503122699555603,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 414,
      "max": 27468,
      "mean": 8082.426799610895,
      "std": 4494.961263167854,
      "p95": 15930.0,
      "p99": 20665.0,
      "p50": 7413.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 39.7465564738292,
      "std": 34.72148926769851,
      "p95": 108.0,
      "p99": 148.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7208.759431420271,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7217.252711705346,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5339.399557954933,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 144752
    },
    {
      "name": "queued_predictions",
      "count": 82
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 144799
    },
    {
      "name": "pred_ones_counter",
      "count": 144752
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5005941195976567
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21110,
      "mean": 18869.827821011673,
      "std": 975.6889917065835,
      "p95": 20125.0,
      "p99": 20228.61,
      "p50": 18937.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8287937743190662,
      "std": 0.3767348800120677,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 462,
      "max": 27468,
      "mean": 7613.477869649805,
      "std": 4002.6917709344268,
      "p95": 14789.0,
      "p99": 18865.0,
      "p50": 7325.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 38.26612050739958,
      "std": 33.059143312484618,
      "p95": 102.0,
      "p99": 148.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7237.326331484651,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7237.725846847264,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6054.251796191102,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 217398
    },
    {
      "name": "queued_predictions",
      "count": 67
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 217421
    },
    {
      "name": "pred_ones_counter",
      "count": 217398
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49969180949226768
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21110,
      "mean": 18889.655885214008,
      "std": 976.7637941832387,
      "p95": 20125.0,
      "p99": 20233.87,
      "p50": 18978.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8747568093385214,
      "std": 0.33103471669280218,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 27468,
      "mean": 7349.847762645914,
      "std": 3821.6476193201676,
      "p95": 13651.75,
      "p99": 17542.0,
      "p50": 7175.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 36.886174724342669,
      "std": 31.96990924695027,
      "p95": 99.0,
      "p99": 129.03999999999997,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7244.44599360633,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7245.945299384429,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6382.672365199822,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 290794
    },
    {
      "name": "queued_predictions",
      "count": 117
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 290747
    },
    {
      "name": "pred_ones_counter",
      "count": 290794
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004436130043949
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18910.096546692606,
      "std": 979.5994001827853,
      "p95": 20125.0,
      "p99": 20229.87,
      "p50": 19013.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8939688715953308,
      "std": 0.30791489977930289,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 27468,
      "mean": 7299.481517509727,
      "std": 3730.1388932070556,
      "p95": 13323.0,
      "p99": 16152.0,
      "p50": 7152.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 36.664186633039097,
      "std": 31.80020775709397,
      "p95": 99.0,
      "p99": 125.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7267.7995658949389,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7266.499954901,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6524.444600033257,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 366697
    },
    {
      "name": "queued_predictions",
      "count": 102
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 366799
    },
    {
      "name": "pred_ones_counter",
      "count": 366697
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006476736924491
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18899.617704280157,
      "std": 977.5880023645418,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 18994.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8976167315175098,
      "std": 0.3031885382117133,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6968.971181906615,
      "std": 3840.4484340255919,
      "p95": 13680.0,
      "p99": 16948.75,
      "p50": 6611.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 35.19357976653696,
      "std": 31.257740028481746,
      "p95": 97.0,
      "p99": 127.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7332.357820965076,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7333.717108249079,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6599.052443443987,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 438801
    },
    {
      "name": "queued_predictions",
      "count": 198
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 438914
    },
    {
      "name": "pred_ones_counter",
      "count": 438801
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004637637562357
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.960359922177,
      "std": 983.2459828260313,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 18999.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9071011673151751,
      "std": 0.29032591668986149,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6819.14968385214,
      "std": 3817.8305407057775,
      "p95": 13367.0,
      "p99": 16319.5,
      "p50": 6395.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.4136673151751,
      "std": 30.62983641369364,
      "p95": 94.0,
      "p99": 125.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7312.1529165770839,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7312.952423472452,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6638.216808903455,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 511790
    },
    {
      "name": "queued_predictions",
      "count": 74
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 511819
    },
    {
      "name": "pred_ones_counter",
      "count": 511790
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006604271283144
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.956955252917,
      "std": 983.5498692309328,
      "p95": 20125.0,
      "p99": 20225.0,
      "p50": 19001.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9141536964980545,
      "std": 0.2801710283447617,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 27468,
      "mean": 6838.830860894942,
      "std": 3763.8161759656807,
      "p95": 13217.0,
      "p99": 16191.0,
      "p50": 6505.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.297665369649809,
      "std": 30.53655595454805,
      "p95": 94.0,
      "p99": 120.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7309.11619516658,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7309.401715260673,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6691.672135479064,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 584399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 584536
    },
    {
      "name": "pred_ones_counter",
      "count": 584399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008992144065955
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18908.502431906614,
      "std": 980.8706107047043,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 19022.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9229085603112841,
      "std": 0.26676891955118989,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 27468,
      "mean": 6898.44734922179,
      "std": 3708.287097898168,
      "p95": 12956.25,
      "p99": 15971.0,
      "p50": 6618.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.2942607003891,
      "std": 30.57166604982539,
      "p95": 94.0,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7303.0536590238739,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7304.428140237683,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6723.021179383488,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 656895
    },
    {
      "name": "queued_predictions",
      "count": 104
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 656999
    },
    {
      "name": "pred_ones_counter",
      "count": 656895
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009522069737172
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18909.29571984436,
      "std": 978.0749221038849,
      "p95": 20125.0,
      "p99": 20221.0,
      "p50": 19020.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9263132295719845,
      "std": 0.2612922383119224,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 27468,
      "mean": 6953.464494163424,
      "std": 3677.536768430861,
      "p95": 12958.0,
      "p99": 15878.0,
      "p50": 6710.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.722033073929967,
      "std": 30.82523136061981,
      "p95": 95.0,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7296.891580569013,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7297.702275509229,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6732.30351228818,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 729199
    },
    {
      "name": "queued_predictions",
      "count": 191
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 729288
    },
    {
      "name": "pred_ones_counter",
      "count": 729199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5010374397112448
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18900.929717898834,
      "std": 975.3626217483393,
      "p95": 20125.0,
      "p99": 20210.0,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9287451361867705,
      "std": 0.25728137493278716,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 392,
      "max": 27468,
      "mean": 6913.025535019456,
      "std": 3652.891761623604,
      "p95": 12914.0,
      "p99": 15845.75,
      "p50": 6688.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.83681906614786,
      "std": 30.727019110477014,
      "p95": 95.0,
      "p99": 118.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7289.715754478917,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7291.175226241166,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6746.269768239542,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 801799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 801903
    },
    {
      "name": "pred_ones_counter",
      "count": 801799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008811435284903
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18893.650535019457,
      "std": 976.050503040309,
      "p95": 20124.35,
      "p99": 20209.61,
      "p50": 18988.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9289883268482491,
      "std": 0.2568755776225593,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 391,
      "max": 27468,
      "mean": 6911.895063229572,
      "std": 3619.0097912888038,
      "p95": 12862.0,
      "p99": 15772.0,
      "p50": 6720.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.8403453307393,
      "std": 30.823090660129308,
      "p95": 95.0,
      "p99": 119.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7287.240073058888,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7288.357837793566,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6764.002578835351,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192547",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 874676
    },
    {
      "name": "queued_predictions",
      "count": 123
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 874706
    },
    {
      "name": "pred_ones_counter",
      "count": 874676
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 118357
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2441214
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 148
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7415546
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 390690
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5007740008871856
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 25802,
      "mean": 18897.176799610894,
      "std": 975.1945274906675,
      "p95": 20125.0,
      "p99": 20215.739999999998,
      "p50": 18993.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.930204280155642,
      "std": 0.2548334164790639,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 391,
      "max": 27468,
      "mean": 6916.402237354086,
      "std": 3607.703350516617,
      "p95": 12861.0,
      "p99": 15770.0,
      "p50": 6761.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 148,
      "mean": 34.898224708171209,
      "std": 30.83848666864594,
      "p95": 96.0,
      "p99": 118.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7286.911498828903,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7286.9197688312,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6776.756238029747,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 880000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_debug_160905-192832"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_debug_160905-192832"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.117090283818511], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138162,
      "max": 138162,
      "mean": 138162.0,
      "std": null,
      "p95": 138162.0,
      "p99": 138162.0,
      "p50": 138162.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 918,
      "max": 7462,
      "mean": 5265.082706766917,
      "std": 1643.142879756096,
      "p95": 7462.0,
      "p99": 7462.0,
      "p50": 5772.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995856187085622,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93346917401399,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 141, alpha = 127.24999999026352, beta = 2081.7499998711905
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7041.550140360266, baseline: 452.69352651096375, increase: 15.554784259080249
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 78063
    },
    {
      "name": "queued_predictions",
      "count": 136
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 78099
    },
    {
      "name": "pred_ones_counter",
      "count": 78063
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.503003983961672
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18901.779912451362,
      "std": 961.2514427181122,
      "p95": 20122.0,
      "p99": 20220.87,
      "p50": 18995.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7373540856031129,
      "std": 0.4401251487318364,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 24112,
      "mean": 8082.413667315175,
      "std": 3983.9293084354169,
      "p95": 14737.0,
      "p99": 17948.0,
      "p50": 7783.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 46.10731132075472,
      "std": 36.022137321257329,
      "p95": 115.0,
      "p99": 141.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7808.813270494449,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7816.506905640654,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5853.5368687078639,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 154399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154511
    },
    {
      "name": "pred_ones_counter",
      "count": 154399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008711196316038
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18899.512645914398,
      "std": 961.9490781897035,
      "p95": 20126.0,
      "p99": 20240.0,
      "p50": 18986.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8375486381322957,
      "std": 0.36890922147356988,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 24112,
      "mean": 7635.700997081712,
      "std": 3767.8856205551994,
      "p95": 14402.0,
      "p99": 16244.0,
      "p50": 7506.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 42.009516041326808,
      "std": 34.027907194358778,
      "p95": 107.0,
      "p99": 141.0,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7717.426787311889,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7723.0245709652949,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6555.9958854214569,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 232704
    },
    {
      "name": "queued_predictions",
      "count": 100
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232705
    },
    {
      "name": "pred_ones_counter",
      "count": 232704
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49933821507150719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 21819,
      "mean": 18892.014105058366,
      "std": 965.274386383227,
      "p95": 20126.0,
      "p99": 20239.87,
      "p50": 18967.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8640564202334631,
      "std": 0.34277032503024459,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7599.272495136187,
      "std": 3680.261403467432,
      "p95": 13624.5,
      "p99": 15196.0,
      "p50": 7493.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 42.150823827629917,
      "std": 34.123975995349379,
      "p95": 108.0,
      "p99": 139.76000000000023,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7755.836746249392,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7757.502625249466,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6796.002642478648,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 307799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 307900
    },
    {
      "name": "pred_ones_counter",
      "count": 307799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4997547100542887
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21477,
      "mean": 18895.060311284047,
      "std": 965.231445247902,
      "p95": 20127.0,
      "p99": 20235.87,
      "p50": 18978.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8847276264591439,
      "std": 0.319389200173484,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7404.2143725680939,
      "std": 3610.5495166077596,
      "p95": 13424.5,
      "p99": 15108.75,
      "p50": 7246.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 40.5451672372926,
      "std": 33.31931288369335,
      "p95": 106.0,
      "p99": 133.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7692.539349728392,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7695.063165871948,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6881.636713704904,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-192832",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 385599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 385685
    },
    {
      "name": "pred_ones_counter",
      "count": 385599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 127250
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2081750
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 141
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7041550
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 452694
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4998820017686768
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21477,
      "mean": 18889.727626459146,
      "std": 963.3944201579374,
      "p95": 20125.0,
      "p99": 20227.87,
      "p50": 18965.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9000486381322957,
      "std": 0.2999716155680854,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 438,
      "max": 24112,
      "mean": 7402.482611867705,
      "std": 3562.465992626655,
      "p95": 13147.0,
      "p99": 14904.5,
      "p50": 7250.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 141,
      "mean": 40.88217412451362,
      "std": 33.39492575411227,
      "p95": 106.0,
      "p99": 130.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7709.540238895999,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7711.259540580598,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6966.183647157267,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-193013"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
INFO:clipper::configuration: spark_svm_r0:6001
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 16000
name = "cache_hit_rate_debug_160905-193013"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0766467194252753], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 398
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138073,
      "max": 138073,
      "mean": 138073.0,
      "std": null,
      "p95": 138073.0,
      "p99": 138073.0,
      "p50": 138073.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 919,
      "max": 7167,
      "mean": 5252.912060301507,
      "std": 1657.5273152534649,
      "p95": 7167.0,
      "p99": 7167.0,
      "p50": 5781.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.9,
      "std": 11.670475568716127,
      "p95": 37.0,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995997207037721,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.88407087082538,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 180, alpha = 89.12413770509376, beta = 3961.6551802330328
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8998.200374704644, baseline: 246.86607724387383, increase: 36.449723976516665
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85951
    },
    {
      "name": "queued_predictions",
      "count": 117
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82824
    },
    {
      "name": "pred_ones_counter",
      "count": 85951
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501506672406371
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 22902,
      "mean": 18896.25170233463,
      "std": 976.5528801491375,
      "p95": 20122.0,
      "p99": 20235.0,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0014591439688715954,
      "std": 0.03817550636665436,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18204.089737354087,
      "std": 2158.322887555985,
      "p95": 19342.0,
      "p99": 23429.0,
      "p50": 18677.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 162.71905697445974,
      "std": 39.932542161980979,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 178.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8594.426578543105,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8279.724820910364,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13.523436114786925,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 172199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168504
    },
    {
      "name": "pred_ones_counter",
      "count": 172199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502052857449811
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 22746,
      "mean": 18909.097519455252,
      "std": 980.7940535128435,
      "p95": 20121.0,
      "p99": 20226.87,
      "p50": 19027.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00048638132295719845,
      "std": 0.022051372084047815,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18499.846060311284,
      "std": 1616.8552592104796,
      "p95": 19342.0,
      "p99": 20650.0,
      "p50": 18738.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 171.07005076142134,
      "std": 29.96468393001843,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 180.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8607.63325550928,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8422.932546558466,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6.755126127461825,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_debug_160905-193013",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 258221
    },
    {
      "name": "queued_predictions",
      "count": 178
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 253104
    },
    {
      "name": "pred_ones_counter",
      "count": 258221
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89124
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3961655
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8998200
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 246866
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501562614969348
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21824,
      "mean": 18924.381322957197,
      "std": 971.0069629178411,
      "p95": 20123.0,
      "p99": 20233.87,
      "p50": 19059.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.00024319066147859923,
      "std": 0.015594571538795134,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1063,
      "max": 31303,
      "mean": 18654.1170963035,
      "std": 1320.330947269255,
      "p95": 19393.0,
      "p99": 20425.0,
      "p50": 18808.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 180,
      "mean": 173.95463917525775,
      "std": 25.001911978957265,
      "p95": 180.0,
      "p99": 180.0,
      "p50": 180.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8607.34041828905,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8434.683175679009,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 4.501955799664567,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_0_hitrate_160905-193132"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "cache_hit_rate_0_hitrate_160905-193132"
cache_hit_rate = 0.0
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0363197366608055], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137183,
      "max": 137183,
      "mean": 137183.0,
      "std": null,
      "p95": 137183.0,
      "p99": 137183.0,
      "p50": 137183.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 947,
      "max": 7273,
      "mean": 5215.0925,
      "std": 1566.1894897291564,
      "p95": 7273.0,
      "p99": 7273.0,
      "p50": 5720.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995974992747094,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983906959725336,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 184, alpha = 86.78688531647678, beta = 4036.6065465186375
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9197.51968428712, baseline: 242.51869644050691, increase: 37.92499225536368
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 78799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 78922
    },
    {
      "name": "pred_ones_counter",
      "count": 78799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4986230789730834
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 22546,
      "mean": 18898.142509727626,
      "std": 977.7792157327097,
      "p95": 20127.0,
      "p99": 20238.0,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.41950389105058369,
      "std": 0.4935378533923545,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 419,
      "max": 36187,
      "mean": 12571.151264591439,
      "std": 6391.200626476156,
      "p95": 20033.0,
      "p99": 21231.0,
      "p50": 12382.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 67.91910499139415,
      "std": 57.82109087014513,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 47.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7877.287103867648,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7889.579870524998,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 3300.074478065033,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 157999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 158152
    },
    {
      "name": "pred_ones_counter",
      "count": 157999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003006348141444
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23103,
      "mean": 18893.03112840467,
      "std": 972.1366787712958,
      "p95": 20124.35,
      "p99": 20222.739999999998,
      "p50": 18992.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5860894941634242,
      "std": 0.4925927411433457,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 419,
      "max": 36187,
      "mean": 11014.523467898833,
      "std": 6237.256442666946,
      "p95": 19770.0,
      "p99": 20689.0,
      "p50": 10069.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 55.66772263287575,
      "std": 52.00098973247414,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 41.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7900.393480123478,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7905.2916548367879,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 4595.121900450551,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 236943
    },
    {
      "name": "queued_predictions",
      "count": 85
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 237001
    },
    {
      "name": "pred_ones_counter",
      "count": 236943
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.50101079162499
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23103,
      "mean": 18895.24805447471,
      "std": 985.5333291332711,
      "p95": 20125.0,
      "p99": 20229.35,
      "p50": 19005.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7037937743190662,
      "std": 0.45663859602042419,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9897.610651750972,
      "std": 5795.5138536070339,
      "p95": 19547.0,
      "p99": 20328.0,
      "p50": 8785.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 50.52419526753358,
      "std": 46.58035220890436,
      "p95": 176.39999999999965,
      "p99": 184.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7896.4955393850909,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7898.627987111495,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5491.886152705194,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 316599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 316697
    },
    {
      "name": "pred_ones_counter",
      "count": 316599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5000331649815698
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18892.974464980543,
      "std": 986.3101867861939,
      "p95": 20126.0,
      "p99": 20235.87,
      "p50": 19003.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7568093385214008,
      "std": 0.4290614565829399,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9351.744892996108,
      "std": 5393.446307462489,
      "p95": 19378.0,
      "p99": 20138.0,
      "p50": 8380.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 49.054677819083028,
      "std": 43.8262496082186,
      "p95": 135.0,
      "p99": 184.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7912.75942736034,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7915.208543727542,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5953.661458912244,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 397399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397498
    },
    {
      "name": "pred_ones_counter",
      "count": 397399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5001950181052293
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18874.67607003891,
      "std": 980.4665002654889,
      "p95": 20123.0,
      "p99": 20218.739999999998,
      "p50": 18972.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7431906614785993,
      "std": 0.43692645653101255,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 36187,
      "mean": 9475.265928988327,
      "std": 5415.413053442102,
      "p95": 19353.0,
      "p99": 20156.0,
      "p50": 8481.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 49.25015487548011,
      "std": 44.574471521693009,
      "p95": 147.39999999999965,
      "p99": 184.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7945.938903625583,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7947.698085124973,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5895.421172349787,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 477199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 477280
    },
    {
      "name": "pred_ones_counter",
      "count": 477199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5002420373890139
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18879.354085603114,
      "std": 978.8460305671802,
      "p95": 20123.0,
      "p99": 20219.87,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7575389105058366,
      "std": 0.42862383061588335,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 385,
      "max": 36187,
      "mean": 9399.681298638132,
      "std": 5365.758752122233,
      "p95": 19309.0,
      "p99": 20134.0,
      "p50": 8436.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 48.86284046692607,
      "std": 44.1652305435335,
      "p95": 140.0,
      "p99": 184.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7951.021808297501,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7953.470958587626,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6020.595611244512,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 553360
    },
    {
      "name": "queued_predictions",
      "count": 98
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 553411
    },
    {
      "name": "pred_ones_counter",
      "count": 553360
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003126355356369
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23103,
      "mean": 18895.61794747082,
      "std": 976.132679868491,
      "p95": 20123.0,
      "p99": 20216.87,
      "p50": 18986.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7874513618677043,
      "std": 0.40916063801332916,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 9092.024197470817,
      "std": 5193.00069112836,
      "p95": 19240.5,
      "p99": 20032.0,
      "p50": 8161.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 46.96668287937743,
      "std": 42.44231353549235,
      "p95": 125.0,
      "p99": 184.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7903.365797364361,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7903.836860986604,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6206.771527379366,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 630599
    },
    {
      "name": "queued_predictions",
      "count": 162
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 630667
    },
    {
      "name": "pred_ones_counter",
      "count": 630599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004273714357301
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18889.407344357976,
      "std": 984.8574395732143,
      "p95": 20123.0,
      "p99": 20209.61,
      "p50": 18977.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8093385214007782,
      "std": 0.3928704811752237,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8843.176191634242,
      "std": 5041.7709236598179,
      "p95": 19194.0,
      "p99": 20016.75,
      "p50": 8019.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 45.61636673151751,
      "std": 41.20569567817415,
      "p95": 120.0,
      "p99": 184.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7880.12001644256,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7880.969662664852,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6359.595177812176,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 708199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 708250
    },
    {
      "name": "pred_ones_counter",
      "count": 708199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5003452419447076
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18894.130593385213,
      "std": 989.7246049749693,
      "p95": 20123.0,
      "p99": 20209.61,
      "p50": 18991.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8258754863813229,
      "std": 0.3792626371743365,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8637.755107003892,
      "std": 4915.605085271368,
      "p95": 19133.0,
      "p99": 19923.0,
      "p50": 7874.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 44.80836575875487,
      "std": 40.07227142527107,
      "p95": 115.0,
      "p99": 184.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7866.484443588508,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7867.050850517336,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6481.460948068985,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 786398
    },
    {
      "name": "queued_predictions",
      "count": 104
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 786424
    },
    {
      "name": "pred_ones_counter",
      "count": 786398
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004196348413907
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18900.407101167315,
      "std": 983.7452818169536,
      "p95": 20123.35,
      "p99": 20199.87,
      "p50": 18987.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8392509727626459,
      "std": 0.36734397234078206,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8472.217898832685,
      "std": 4785.921201172395,
      "p95": 19080.0,
      "p99": 19923.0,
      "p50": 7769.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.97373540856031,
      "std": 39.17087970310475,
      "p95": 111.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7861.576181649186,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7861.826026318618,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6593.858151792913,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 864399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 864539
    },
    {
      "name": "pred_ones_counter",
      "count": 864399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5004182096462397
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23103,
      "mean": 18889.647130350193,
      "std": 981.9386514440406,
      "p95": 20122.0,
      "p99": 20209.61,
      "p50": 18976.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8497081712062257,
      "std": 0.357400698115907,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8384.127675097276,
      "std": 4700.229860322658,
      "p95": 19024.25,
      "p99": 19881.0,
      "p50": 7734.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.79474708171206,
      "std": 38.707340945970567,
      "p95": 111.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7856.232989297048,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7857.0144942609299,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6657.936345604365,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_0_hitrate_160905-193132",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 940480
    },
    {
      "name": "queued_predictions",
      "count": 119
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 940545
    },
    {
      "name": "pred_ones_counter",
      "count": 940480
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86787
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4036607
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9197520
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 242519
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006145797890439
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 25732,
      "mean": 18889.54742217899,
      "std": 981.8773509291966,
      "p95": 20123.0,
      "p99": 20217.0,
      "p50": 18979.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8596789883268483,
      "std": 0.34736201408771497,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 36187,
      "mean": 8252.424246108949,
      "std": 4622.506780631296,
      "p95": 18973.0,
      "p99": 19873.0,
      "p50": 7616.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 184,
      "mean": 43.33925097276265,
      "std": 38.102882880271227,
      "p95": 110.0,
      "p99": 184.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 7835.281347329697,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7835.897755797324,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6719.21259447169,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_0_hitrate_160905-193132_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193449"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 15000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193449"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1377914204589354], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 139531,
      "max": 139531,
      "mean": 139531.0,
      "std": null,
      "p95": 139531.0,
      "p99": 139531.0,
      "p50": 139531.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 920,
      "max": 7093,
      "mean": 5223.6125,
      "std": 1587.1071119511062,
      "p95": 7093.0,
      "p99": 7093.0,
      "p50": 5852.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995841211983085,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98336684460689,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 13
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 122, alpha = 152.43333305695927, beta = 1443.7666717978948
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6087.631969749303, baseline: 626.4879068778929, increase: 9.717078179668402
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 83235
    },
    {
      "name": "queued_predictions",
      "count": 164
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 75155
    },
    {
      "name": "pred_ones_counter",
      "count": 83235
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09864626674180746
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009431128731904
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23021,
      "mean": 18885.234678988327,
      "std": 972.1736974501091,
      "p95": 20125.0,
      "p99": 20244.739999999998,
      "p50": 18962.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8083657587548638,
      "std": 0.3936346539529918,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 399,
      "max": 23814,
      "mean": 7784.210116731518,
      "std": 3878.780366785553,
      "p95": 13337.0,
      "p99": 16464.0,
      "p50": 7429.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 41.226001097092709,
      "std": 33.65354972647158,
      "p95": 122.0,
      "p99": 122.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8326.316428215187,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7513.075530526299,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6656.7667979881839,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 166399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 150082
    },
    {
      "name": "pred_ones_counter",
      "count": 166399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09839794956752442
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5011208000048077
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 20758,
      "mean": 18880.114299610894,
      "std": 973.9925324366317,
      "p95": 20125.0,
      "p99": 20245.87,
      "p50": 18985.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8927529182879378,
      "std": 0.3094647559341808,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7330.912329766537,
      "std": 3555.363071759113,
      "p95": 13065.0,
      "p99": 14597.0,
      "p50": 7213.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 38.49243395742498,
      "std": 31.999152305672433,
      "p95": 101.0,
      "p99": 122.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8317.557454598185,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7501.941691375391,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7383.732421322832,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 248400
    },
    {
      "name": "queued_predictions",
      "count": 199
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 224262
    },
    {
      "name": "pred_ones_counter",
      "count": 248399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09764721499281977
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501060793320424
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18880.413910505835,
      "std": 975.318082266892,
      "p95": 20125.0,
      "p99": 20246.87,
      "p50": 18984.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.915612840466926,
      "std": 0.2780013700889763,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7197.988934824903,
      "std": 3485.397826922628,
      "p95": 12960.0,
      "p99": 14261.0,
      "p50": 7155.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 37.476938502673799,
      "std": 31.58566907067813,
      "p95": 99.0,
      "p99": 122.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8280.002876488987,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7475.269186701416,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7542.696355885137,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 330799
    },
    {
      "name": "queued_predictions",
      "count": 115
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 298553
    },
    {
      "name": "pred_ones_counter",
      "count": 330799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09760542013937156
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5010504868515322
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18894.492704280157,
      "std": 965.7176380818265,
      "p95": 20124.0,
      "p99": 20251.35,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9348249027237354,
      "std": 0.24686458742979359,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 321,
      "max": 23814,
      "mean": 7091.665612840467,
      "std": 3406.1593568776945,
      "p95": 12812.0,
      "p99": 14242.0,
      "p50": 7039.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 36.83565700185071,
      "std": 31.199765339608214,
      "p95": 97.0,
      "p99": 122.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8267.498470833061,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7461.58969426734,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7658.000490555727,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 415159
    },
    {
      "name": "queued_predictions",
      "count": 96
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 374707
    },
    {
      "name": "pred_ones_counter",
      "count": 415159
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09757642310489484
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5009863690778714
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18892.09873540856,
      "std": 966.1754527898557,
      "p95": 20124.35,
      "p99": 20251.35,
      "p50": 18995.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9455252918287938,
      "std": 0.22697961023264066,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 270,
      "max": 23814,
      "mean": 6443.597641050584,
      "std": 3446.3689928357705,
      "p95": 12608.0,
      "p99": 14231.0,
      "p50": 6043.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 34.27407587548638,
      "std": 29.655077075825678,
      "p95": 94.0,
      "p99": 122.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8301.326269196115,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7492.413015851042,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7798.51303716263,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193449",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 499399
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 450857
    },
    {
      "name": "pred_ones_counter",
      "count": 499399
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 152433
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 1443767
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6087632
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 626488
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09756224492042619
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5008199856227185
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20885,
      "mean": 18897.383754863815,
      "std": 965.8501757585652,
      "p95": 20124.35,
      "p99": 20241.87,
      "p50": 18995.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9547665369649806,
      "std": 0.20784105028430645,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 270,
      "max": 23814,
      "mean": 6004.295355058366,
      "std": 3376.5824879986005,
      "p95": 12174.0,
      "p99": 14166.5,
      "p50": 5482.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 122,
      "mean": 32.27419747081712,
      "std": 28.540058243908065,
      "p95": 89.0,
      "p99": 120.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8321.70667880866,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7511.942111375288,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7899.717351030607,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193633"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193633"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0240372545897012], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138222,
      "max": 138222,
      "mean": 138222.0,
      "std": null,
      "p95": 138222.0,
      "p99": 138222.0,
      "p50": 138222.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 931,
      "max": 7004,
      "mean": 5204.145363408521,
      "std": 1540.5413324240477,
      "p95": 7004.0,
      "p99": 7004.0,
      "p50": 5764.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049956657603862888,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.932709371255905,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 161, alpha = 104.5555554480285, beta = 3206.111115594119
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8034.110320297719, baseline: 302.05396657622896, increase: 26.59826126888541
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 84999
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 76863
    },
    {
      "name": "pred_ones_counter",
      "count": 84999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09750114437962887
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49262932505088299
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 27279,
      "mean": 18864.857247081713,
      "std": 980.8923752942986,
      "p95": 20123.35,
      "p99": 20236.87,
      "p50": 18934.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6412937743190662,
      "std": 0.4796790860258598,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 431,
      "max": 30153,
      "mean": 9575.943093385215,
      "std": 5436.506992041733,
      "p95": 18525.0,
      "p99": 19930.0,
      "p50": 8203.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 48.665822784810128,
      "std": 43.94559906615598,
      "p95": 161.0,
      "p99": 175.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8503.340326648147,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7686.611917767288,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5459.276307057371,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 169599
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 153085
    },
    {
      "name": "pred_ones_counter",
      "count": 169599
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09770375561693531
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4946550392396182
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21587,
      "mean": 18856.573443579768,
      "std": 974.9023008413991,
      "p95": 20120.35,
      "p99": 20227.61,
      "p50": 18926.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7962062256809338,
      "std": 0.4028664071855287,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 384,
      "max": 30153,
      "mean": 7832.590831712062,
      "std": 4805.146165661678,
      "p95": 17953.0,
      "p99": 18972.0,
      "p50": 6806.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 39.44473073950013,
      "std": 36.48396906375819,
      "p95": 110.0,
      "p99": 165.35999999999968,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8477.449152500012,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7651.992279677881,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6774.459242888757,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 255595
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 230504
    },
    {
      "name": "pred_ones_counter",
      "count": 255595
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09839520752031408
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49496273401279369
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 21429,
      "mean": 18871.582928015563,
      "std": 980.2474684595923,
      "p95": 20122.0,
      "p99": 20234.87,
      "p50": 18947.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8482490272373541,
      "std": 0.3588229741541985,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 30153,
      "mean": 6667.666464007782,
      "std": 4638.637941082574,
      "p95": 16549.0,
      "p99": 18759.0,
      "p50": 5509.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 33.33516483516483,
      "std": 32.273826362860919,
      "p95": 93.0,
      "p99": 161.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8517.502269343404,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7682.64356570687,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7244.431114729431,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 340501
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 307155
    },
    {
      "name": "pred_ones_counter",
      "count": 340501
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09821454782440216
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49470926663945188
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 23426,
      "mean": 18880.895671206225,
      "std": 993.4534693327371,
      "p95": 20124.0,
      "p99": 20249.739999999998,
      "p50": 18962.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8706225680933852,
      "std": 0.3356580274843272,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 310,
      "max": 30153,
      "mean": 6588.269455252918,
      "std": 4385.974189173119,
      "p95": 16317.25,
      "p99": 18743.0,
      "p50": 5611.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 33.23820525291829,
      "std": 31.202547542037878,
      "p95": 90.0,
      "p99": 161.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8511.121345848149,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7677.018965739805,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7459.489606525332,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193633",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 430329
    },
    {
      "name": "queued_predictions",
      "count": 205
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 387111
    },
    {
      "name": "pred_ones_counter",
      "count": 430329
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 104556
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3206111
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8034110
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 302054
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09842473962446462
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49489344199438109
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 23426,
      "mean": 18889.921449416343,
      "std": 984.8089346216167,
      "p95": 20123.0,
      "p99": 20237.87,
      "p50": 18975.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8509241245136187,
      "std": 0.35620656313879658,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 326,
      "max": 30153,
      "mean": 6950.962548638132,
      "std": 4537.314953664425,
      "p95": 16314.0,
      "p99": 18533.0,
      "p50": 6006.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 35.110651750972767,
      "std": 33.42915445559517,
      "p95": 97.0,
      "p99": 161.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8605.372055944725,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7739.874198927789,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7383.535649801623,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193804"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
INFO:clipper::configuration: spark_svm_r0:6001
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193804"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0466401004560435], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 396
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136819,
      "max": 136819,
      "mean": 136819.0,
      "std": null,
      "p95": 136819.0,
      "p99": 136819.0,
      "p50": 136819.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 959,
      "max": 7073,
      "mean": 5181.106060606061,
      "std": 1536.097501145836,
      "p95": 7073.0,
      "p99": 7073.0,
      "p50": 5816.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.8,
      "std": 11.523888232710347,
      "p95": 36.9,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049957383853703598,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.78312598269306,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 12
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 182, alpha = 84.38888891094089, beta = 4638.55555152112
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9101.213495142229, baseline: 211.7323234716093, increase: 42.98452567806723
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 98249
    },
    {
      "name": "queued_predictions",
      "count": 230
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82470
    },
    {
      "name": "pred_ones_counter",
      "count": 98249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09388803704343057
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4931653248379118
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20532,
      "mean": 18863.76823929961,
      "std": 954.7236382978603,
      "p95": 20118.35,
      "p99": 20233.61,
      "p50": 18948.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.10043774319066148,
      "std": 0.3006193283126654,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1395,
      "max": 32611,
      "mean": 18248.84520914397,
      "std": 2243.252161753683,
      "p95": 19379.0,
      "p99": 24874.0,
      "p50": 18572.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 162.02357563850689,
      "std": 38.861750649804488,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 176.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9821.300493369181,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8243.97528546776,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 936.3886770294481,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 195999
    },
    {
      "name": "queued_predictions",
      "count": 180
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 166008
    },
    {
      "name": "pred_ones_counter",
      "count": 195999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09010138699860841
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4930229235863448
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20479,
      "mean": 18873.530398832685,
      "std": 956.4026399893969,
      "p95": 20118.35,
      "p99": 20218.0,
      "p50": 18971.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.09557392996108949,
      "std": 0.294041800223356,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2566,
      "max": 32611,
      "mean": 18800.1546692607,
      "std": 1660.917964015303,
      "p95": 19757.0,
      "p99": 20561.0,
      "p50": 19061.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 171.49586776859506,
      "std": 29.88281115896222,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 182.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9797.108838436854,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8297.993167081888,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 889.9100462813269,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193804",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 294870
    },
    {
      "name": "queued_predictions",
      "count": 144
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 251184
    },
    {
      "name": "pred_ones_counter",
      "count": 294870
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 84389
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4638556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9101213
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 211732
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0857894397873992
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49394648489164719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 20803,
      "mean": 18852.450875486382,
      "std": 959.8324179316363,
      "p95": 20119.0,
      "p99": 20218.61,
      "p50": 18930.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.0914396887159533,
      "std": 0.28826841808746658,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2566,
      "max": 32611,
      "mean": 18913.156614785992,
      "std": 1377.991033399138,
      "p95": 19800.0,
      "p99": 20518.0,
      "p50": 19121.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 4,
      "max": 182,
      "mean": 174.9192200557103,
      "std": 25.020167886401816,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 182.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9827.659141815455,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8370.607179939096,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 847.4275578159552,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193931"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 20000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-193931"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1748452665894467], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 140086,
      "max": 140086,
      "mean": 140086.0,
      "std": null,
      "p95": 140086.0,
      "p99": 140086.0,
      "p50": 140086.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 928,
      "max": 7160,
      "mean": 5134.3,
      "std": 1508.9724133863129,
      "p95": 7160.0,
      "p99": 7160.0,
      "p50": 5688.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995757353067907,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98303140887915,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 173, alpha = 94.56000003110348, beta = 3598.1599970433927
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8668.620195128371, baseline: 270.80309386908175, increase: 32.01078714159435
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 95799
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 81793
    },
    {
      "name": "pred_ones_counter",
      "count": 95799
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09362597527057573
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5020720466810719
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22803,
      "mean": 18848.96887159533,
      "std": 966.048070610432,
      "p95": 20113.0,
      "p99": 20220.739999999998,
      "p50": 18909.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.2176556420233463,
      "std": 0.4127021740945119,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 374,
      "max": 33548,
      "mean": 15507.834022373541,
      "std": 5005.762828712282,
      "p95": 19087.0,
      "p99": 23572.0,
      "p50": 17834.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 103.1437578814628,
      "std": 66.98097886564462,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 96.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9576.428544652565,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8176.333626160428,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2069.10085622008,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 198723
    },
    {
      "name": "queued_predictions",
      "count": 205
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 168293
    },
    {
      "name": "pred_ones_counter",
      "count": 198722
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.08967701394998115
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5020581515886515
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22803,
      "mean": 18851.82879377432,
      "std": 964.9144194662504,
      "p95": 20103.0,
      "p99": 20220.739999999998,
      "p50": 18935.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.14931906614785993,
      "std": 0.3564460420955988,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 790,
      "max": 33548,
      "mean": 16712.412329766536,
      "std": 3809.5367168695736,
      "p95": 18760.0,
      "p99": 19887.0,
      "p50": 17868.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 130.1569992266048,
      "std": 62.51745966132635,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 173.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9936.35206292085,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8412.196162379432,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1476.321783106894,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-193931",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 301701
    },
    {
      "name": "queued_predictions",
      "count": 170
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 254101
    },
    {
      "name": "pred_ones_counter",
      "count": 301701
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94560
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3598160
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 173
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8668620
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 270803
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.08753739179980853
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5017782506521358
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17016,
      "max": 23699,
      "mean": 18830.33706225681,
      "std": 960.5290258216077,
      "p95": 20098.35,
      "p99": 20206.0,
      "p50": 18886.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1293774319066148,
      "std": 0.33565802748431797,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 790,
      "max": 33548,
      "mean": 17184.892752918287,
      "std": 3136.989980473423,
      "p95": 18661.0,
      "p99": 19567.25,
      "p50": 17944.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 142.03521520402459,
      "std": 56.49979104236921,
      "p95": 173.0,
      "p99": 175.0,
      "p50": 173.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10054.121040944283,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8467.692580847566,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1269.9725636838735,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-194046"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
INFO:clipper::configuration: spark_svm_r0:6001
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "DEBUG_cache_hit_rate_10_hitrate_160905-194046"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1384064028623473], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 134903,
      "max": 134903,
      "mean": 134903.0,
      "std": null,
      "p95": 134903.0,
      "p99": 134903.0,
      "p50": 134903.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 948,
      "max": 7296,
      "mean": 5291.165,
      "std": 1634.2336926463234,
      "p95": 7296.0,
      "p99": 7296.0,
      "p50": 5752.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995817252005758,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983275996318679,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 160, alpha = 104.56249998017225, beta = 3242.4374999157412
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8011.040216102295, baseline: 298.7750224174181, increase: 26.81295160246054
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85549
    },
    {
      "name": "queued_predictions",
      "count": 86
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77240
    },
    {
      "name": "pred_ones_counter",
      "count": 85549
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09762363519588953
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502051455890776
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18908.71546692607,
      "std": 977.2975092444279,
      "p95": 20122.0,
      "p99": 20222.87,
      "p50": 19028.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7188715953307393,
      "std": 0.44960469791133647,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 455,
      "max": 24960,
      "mean": 8465.185311284047,
      "std": 4806.673507672687,
      "p95": 16707.0,
      "p99": 19863.0,
      "p50": 7372.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 43.936291240045509,
      "std": 38.93162624736593,
      "p95": 133.04999999999996,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8553.09116486146,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7721.461183562845,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6182.401737407453,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 171199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154534
    },
    {
      "name": "pred_ones_counter",
      "count": 171199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09730511846626877
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.501907137308045
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18911.427285992217,
      "std": 979.1948308306666,
      "p95": 20124.0,
      "p99": 20235.22,
      "p50": 19033.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8312256809338522,
      "std": 0.37459801614120427,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 444,
      "max": 24960,
      "mean": 7725.665734435797,
      "std": 4221.33583643407,
      "p95": 16436.0,
      "p99": 17550.0,
      "p50": 7015.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 40.99045092838196,
      "std": 35.05988379009931,
      "p95": 106.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8558.25855930824,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7724.360291267775,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7095.658898802374,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257457
    },
    {
      "name": "queued_predictions",
      "count": 142
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232382
    },
    {
      "name": "pred_ones_counter",
      "count": 257457
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09765177659851164
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5019284773768047
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23390,
      "mean": 18901.560068093386,
      "std": 979.4772970927469,
      "p95": 20125.0,
      "p99": 20222.87,
      "p50": 19009.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8584630350194552,
      "std": 0.3486169938656488,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 433,
      "max": 24960,
      "mean": 7511.822227626459,
      "std": 4066.7471829034304,
      "p95": 16260.0,
      "p99": 17521.0,
      "p50": 6884.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 40.704501664039238,
      "std": 34.26964598596498,
      "p95": 104.5,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8580.429875238036,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7745.812945968486,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7373.487364509223,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 342858
    },
    {
      "name": "queued_predictions",
      "count": 141
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 309437
    },
    {
      "name": "pred_ones_counter",
      "count": 342858
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09783993539339765
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.502079578134388
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18902.549854085602,
      "std": 982.4467953096429,
      "p95": 20124.0,
      "p99": 20223.87,
      "p50": 18992.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8813229571984436,
      "std": 0.32344743698705849,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7283.132174124514,
      "std": 3917.732180742475,
      "p95": 15906.0,
      "p99": 17121.0,
      "p50": 6676.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.80447645999485,
      "std": 33.215921102215848,
      "p95": 101.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8569.689310492791,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7733.666366174007,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7551.835240069064,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 428796
    },
    {
      "name": "queued_predictions",
      "count": 102
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 386860
    },
    {
      "name": "pred_ones_counter",
      "count": 428796
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0979417017565948
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5021805240720529
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18886.199659533075,
      "std": 986.0035541398121,
      "p95": 20125.0,
      "p99": 20236.739999999998,
      "p50": 18978.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8925097276264592,
      "std": 0.3097732237633597,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7212.667193579767,
      "std": 3847.934551521682,
      "p95": 15224.0,
      "p99": 17121.0,
      "p50": 6626.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.507538910505839,
      "std": 32.77672122165385,
      "p95": 100.0,
      "p99": 160.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8573.321584443096,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7734.801438074053,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7639.978208180285,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_10_hitrate_160905-194046",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 513457
    },
    {
      "name": "queued_predictions",
      "count": 142
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 463288
    },
    {
      "name": "pred_ones_counter",
      "count": 513457
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 104562
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3242437
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 160
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 8011040
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 298775
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.0977941935245201
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5021686334006548
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 28252,
      "mean": 18900.239785992217,
      "std": 990.8780360411107,
      "p95": 20128.0,
      "p99": 20244.0,
      "p50": 18989.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9010214007782101,
      "std": 0.29866959936231615,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24960,
      "mean": 7107.43579766537,
      "std": 3790.8447567918399,
      "p95": 14802.5,
      "p99": 17121.0,
      "p50": 6497.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.01714494163424,
      "std": 32.39569851203038,
      "p95": 99.0,
      "p99": 151.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8555.355759604974,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7720.4201941808009,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7681.6697188029,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "cache_hit_rate_10_hitrate_160905-194229"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 200
target_qps = 18000
name = "cache_hit_rate_10_hitrate_160905-194229"
cache_hit_rate = 0.1
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0414933594463665], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 135776,
      "max": 135776,
      "mean": 135776.0,
      "std": null,
      "p95": 135776.0,
      "p99": 135776.0,
      "p50": 135776.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 888,
      "max": 6957,
      "mean": 5178.2205513784469,
      "std": 1613.5053093794502,
      "p95": 6957.0,
      "p99": 6957.0,
      "p50": 5609.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0499517441175952,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93075187637539,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.2:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 178, alpha = 94.33962265370529, beta = 3163.43396084343
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8919.673770680403, baseline: 306.95810324747185, increase: 29.0582775835349
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 85328
    },
    {
      "name": "queued_predictions",
      "count": 107
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 76983
    },
    {
      "name": "pred_ones_counter",
      "count": 85329
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09863523573200993
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49967771800911767
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 25735,
      "mean": 18875.951605058366,
      "std": 980.2748473260082,
      "p95": 20126.35,
      "p99": 20241.35,
      "p50": 18942.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6840953307392996,
      "std": 0.46493169138350345,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 30650,
      "mean": 9057.051921206226,
      "std": 5323.108257786864,
      "p95": 18760.0,
      "p99": 21808.0,
      "p50": 8051.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 46.776427703523697,
      "std": 41.12403748668933,
      "p95": 136.0,
      "p99": 178.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8533.822086629216,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7696.981608378647,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5795.290760271785,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 170789
    },
    {
      "name": "queued_predictions",
      "count": 100
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 154015
    },
    {
      "name": "pred_ones_counter",
      "count": 170789
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09845572272059641
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5019527018719004
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18872.29280155642,
      "std": 990.7961372142056,
      "p95": 20128.0,
      "p99": 20246.61,
      "p50": 18944.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8047178988326849,
      "std": 0.39646592301309727,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 30650,
      "mean": 7928.291585603113,
      "std": 4826.915878721373,
      "p95": 18555.0,
      "p99": 21076.0,
      "p50": 6908.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.979249800478857,
      "std": 35.950310089049029,
      "p95": 107.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8537.475839501712,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7699.8182076925,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6883.529356312023,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257330
    },
    {
      "name": "queued_predictions",
      "count": 154
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 232092
    },
    {
      "name": "pred_ones_counter",
      "count": 257330
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09810706684687204
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5011813624528815
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 26199,
      "mean": 18884.645671206225,
      "std": 984.2248222783495,
      "p95": 20127.0,
      "p99": 20238.739999999998,
      "p50": 18967.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8054474708171207,
      "std": 0.3959039785933717,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 8026.265928988327,
      "std": 4909.525643823105,
      "p95": 18759.0,
      "p99": 19913.5,
      "p50": 6908.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 41.07096089187755,
      "std": 36.84820463604102,
      "p95": 109.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8576.913266946804,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7736.223419749053,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6960.217112462275,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 343199
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 309487
    },
    {
      "name": "pred_ones_counter",
      "count": 343199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09841823673150799
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49995775045964588
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 26199,
      "mean": 18869.010700389106,
      "std": 986.1511582487694,
      "p95": 20125.35,
      "p99": 20226.61,
      "p50": 18945.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8312256809338522,
      "std": 0.37459801614120427,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 7748.089858949416,
      "std": 4640.3874499429889,
      "p95": 18635.0,
      "p99": 19503.0,
      "p50": 6813.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.57249606712113,
      "std": 35.602408919480698,
      "p95": 104.54999999999927,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8577.490529868024,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7734.934382882639,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7209.166295083357,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 429247
    },
    {
      "name": "queued_predictions",
      "count": 152
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 387365
    },
    {
      "name": "pred_ones_counter",
      "count": 429247
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09785770344132147
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49931857415427485
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18867.885214007783,
      "std": 992.9667027331806,
      "p95": 20125.0,
      "p99": 20231.739999999998,
      "p50": 18946.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8467898832684825,
      "std": 0.36023372317140969,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 371,
      "max": 30650,
      "mean": 7729.9956225680939,
      "std": 4600.893729513997,
      "p95": 18594.0,
      "p99": 19534.25,
      "p50": 6834.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.50924124513619,
      "std": 35.04906881178408,
      "p95": 104.0,
      "p99": 178.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8582.994112286413,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7745.282439417171,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7301.35571317493,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 513633
    },
    {
      "name": "queued_predictions",
      "count": 166
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 463457
    },
    {
      "name": "pred_ones_counter",
      "count": 513633
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09793907734347479
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49987637087180927
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 26199,
      "mean": 18873.947714007783,
      "std": 994.1031212869704,
      "p95": 20127.0,
      "p99": 20232.0,
      "p50": 18968.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8657587548638133,
      "std": 0.3409527883211566,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 381,
      "max": 30650,
      "mean": 7628.030034046693,
      "std": 4511.536229343423,
      "p95": 18501.0,
      "p99": 19578.25,
      "p50": 6801.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 40.17157101167315,
      "std": 34.45049765501801,
      "p95": 103.0,
      "p99": 178.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8558.66475812462,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7722.330663035127,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7372.260661706713,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 599347
    },
    {
      "name": "queued_predictions",
      "count": 140
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 540709
    },
    {
      "name": "pred_ones_counter",
      "count": 599347
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09795041427086826
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49998081245088407
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18857.453550583657,
      "std": 996.0421601049025,
      "p95": 20124.0,
      "p99": 20228.87,
      "p50": 18943.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8708657587548638,
      "std": 0.3353892432896663,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 450,
      "max": 30650,
      "mean": 7539.488205252918,
      "std": 4398.11479539572,
      "p95": 17973.0,
      "p99": 19470.0,
      "p50": 6749.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.957076848249027,
      "std": 34.10901653365295,
      "p95": 102.0,
      "p99": 170.75,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8560.268195211383,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7722.104493944368,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7435.602173776678,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 685294
    },
    {
      "name": "queued_predictions",
      "count": 158
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 618123
    },
    {
      "name": "pred_ones_counter",
      "count": 685294
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09811190280282208
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4993608582593748
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18873.297178988327,
      "std": 994.7931821604859,
      "p95": 20124.35,
      "p99": 20227.87,
      "p50": 18969.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8752431906614786,
      "std": 0.3304831446981275,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7453.756809338522,
      "std": 4324.013985979321,
      "p95": 16824.0,
      "p99": 19462.75,
      "p50": 6700.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.780034046692609,
      "std": 33.86604920527658,
      "p95": 101.0,
      "p99": 163.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8564.479238949552,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7724.607468714656,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7498.2147360736139,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 771199
    },
    {
      "name": "queued_predictions",
      "count": 200
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 695578
    },
    {
      "name": "pred_ones_counter",
      "count": 771199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09822672832088193
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49935360393361508
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18875.13959143969,
      "std": 991.4147148994297,
      "p95": 20126.0,
      "p99": 20232.0,
      "p50": 18964.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.881079766536965,
      "std": 0.32373399391623716,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7458.087427042801,
      "std": 4290.804445073395,
      "p95": 16588.0,
      "p99": 19461.75,
      "p50": 6698.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.70355058365759,
      "std": 33.841884810045879,
      "p95": 101.0,
      "p99": 160.5,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8566.411180094528,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7726.289471413557,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7529.669010406071,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 856998
    },
    {
      "name": "queued_predictions",
      "count": 186
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 772894
    },
    {
      "name": "pred_ones_counter",
      "count": 856998
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09808745846866017
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.499577595280269
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18869.734435797665,
      "std": 986.4342649102531,
      "p95": 20126.35,
      "p99": 20231.87,
      "p50": 18954.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8881322957198443,
      "std": 0.3152419526275824,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7438.880836575875,
      "std": 4269.477196190132,
      "p95": 16157.25,
      "p99": 19461.75,
      "p50": 6696.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.63691634241245,
      "std": 33.827559203529727,
      "p95": 101.0,
      "p99": 163.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8567.377977802129,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7727.443979605058,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7559.049008481007,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_10_hitrate_160905-194229",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 944137
    },
    {
      "name": "queued_predictions",
      "count": 113
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 851609
    },
    {
      "name": "pred_ones_counter",
      "count": 944136
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 94340
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3163434
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 178
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8919674
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 306958
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.09806724913952873
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4999179144552115
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 26199,
      "mean": 18877.168774319067,
      "std": 984.6146833387284,
      "p95": 20126.35,
      "p99": 20232.0,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8910505836575876,
      "std": 0.3116136318863225,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 311,
      "max": 30650,
      "mean": 7419.787329766537,
      "std": 4236.732862799876,
      "p95": 15958.0,
      "p99": 19513.0,
      "p50": 6684.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 178,
      "mean": 39.528453307392997,
      "std": 33.545225845943289,
      "p95": 99.0,
      "p99": 157.75,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 8580.838097946182,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7739.741729300844,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7608.949109852897,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_10_hitrate_160905-194229_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-194818"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-194818"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
INFO:clipper::configuration: spark_svm_r0:6001
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [0.9913563580039485], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137763,
      "max": 137763,
      "mean": 137763.0,
      "std": null,
      "p95": 137763.0,
      "p99": 137763.0,
      "p50": 137763.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 955,
      "max": 7244,
      "mean": 5174.735,
      "std": 1588.7933410221029,
      "p95": 7244.0,
      "p99": 7244.0,
      "p50": 5724.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995735640057647,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98294355852562,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 177, alpha = 93.92105263399426, beta = 3401.605262540672
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8838.6725434295, baseline: 286.07995186843027, increase: 30.895812466769616
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 93939
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 75399
    },
    {
      "name": "pred_ones_counter",
      "count": 93939
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1983347316772693
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5140357040206943
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 21743,
      "mean": 18868.62135214008,
      "std": 965.3790230262259,
      "p95": 20128.0,
      "p99": 20242.0,
      "p50": 18960.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7334630350194552,
      "std": 0.4422019509289325,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 416,
      "max": 30573,
      "mean": 8637.083414396888,
      "std": 5564.753101222024,
      "p95": 18856.0,
      "p99": 24226.0,
      "p50": 7368.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 41.359846407021397,
      "std": 39.03501159143499,
      "p95": 118.59999999999991,
      "p99": 177.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9390.679935849997,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7537.312440639129,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6985.220978121261,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 187849
    },
    {
      "name": "queued_predictions",
      "count": 127
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 150773
    },
    {
      "name": "pred_ones_counter",
      "count": 187849
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19764330363080197
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5136465991301524
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24234,
      "mean": 18880.66293774319,
      "std": 976.4857630039863,
      "p95": 20129.0,
      "p99": 20249.0,
      "p50": 18970.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8256322957198443,
      "std": 0.37947151026866918,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 416,
      "max": 30573,
      "mean": 7730.375486381323,
      "std": 4874.962468871422,
      "p95": 18614.0,
      "p99": 20345.0,
      "p50": 6840.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 38.786265432098769,
      "std": 35.01902671696157,
      "p95": 103.0,
      "p99": 177.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9390.801300425517,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7537.762665919026,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7833.6519799035,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 282039
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 226431
    },
    {
      "name": "pred_ones_counter",
      "count": 282039
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19749237402527468
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5137977371923741
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 24234,
      "mean": 18872.269455252917,
      "std": 975.5208119996755,
      "p95": 20131.0,
      "p99": 20247.87,
      "p50": 18958.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.875,
      "std": 0.3307591350950052,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 416,
      "max": 30573,
      "mean": 7297.252553501946,
      "std": 4374.035357629751,
      "p95": 18218.0,
      "p99": 20157.0,
      "p50": 6673.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 37.193002628120897,
      "std": 32.5512579874944,
      "p95": 95.0,
      "p99": 177.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9398.74573420097,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7545.649344029937,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8307.618862082376,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 375993
    },
    {
      "name": "queued_predictions",
      "count": 206
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 302021
    },
    {
      "name": "pred_ones_counter",
      "count": 375993
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19692768986626758
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.513924461359653
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24234,
      "mean": 18886.72057392996,
      "std": 980.2736759058217,
      "p95": 20135.35,
      "p99": 20250.87,
      "p50": 18980.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8966439688715954,
      "std": 0.3044603501029616,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 441,
      "max": 30573,
      "mean": 7053.1293774319069,
      "std": 4138.4910510106169,
      "p95": 14984.0,
      "p99": 19460.75,
      "p50": 6497.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 36.58244163424124,
      "std": 31.61822322581823,
      "p95": 94.0,
      "p99": 147.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9399.172410759484,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7550.923553106631,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8484.78071185098,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 470713
    },
    {
      "name": "queued_predictions",
      "count": 108
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 378036
    },
    {
      "name": "pred_ones_counter",
      "count": 470713
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19703454178976724
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5138651365056839
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 24234,
      "mean": 18884.10505836576,
      "std": 973.2681760436524,
      "p95": 20138.0,
      "p99": 20252.0,
      "p50": 18960.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9039396887159533,
      "std": 0.2947097723613138,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 477,
      "max": 30573,
      "mean": 7103.522008754864,
      "std": 4153.51874856142,
      "p95": 15454.0,
      "p99": 19388.0,
      "p50": 6532.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 36.87037937743191,
      "std": 31.943180097839698,
      "p95": 94.0,
      "p99": 150.5,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9412.12911547468,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7558.9183271808919,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8527.727214820705,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-194818",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 563618
    },
    {
      "name": "queued_predictions",
      "count": 177
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 452499
    },
    {
      "name": "pred_ones_counter",
      "count": 563618
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 93921
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3401605
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8838673
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 286080
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1972188472760489
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5132004300785283
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 24234,
      "mean": 18884.529912451362,
      "std": 973.3764967910283,
      "p95": 20134.35,
      "p99": 20258.739999999998,
      "p50": 18974.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9122081712062257,
      "std": 0.2830263311288239,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 268,
      "max": 30573,
      "mean": 6751.325997081712,
      "std": 4092.169959731205,
      "p95": 14371.0,
      "p99": 19168.75,
      "p50": 6270.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 34.427529182879379,
      "std": 30.60939061062477,
      "p95": 91.0,
      "p99": 132.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9391.149553955429,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7540.15783936671,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8625.627208338039,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 22000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195004"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 22000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195004"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.2348426502658951], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 398
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136201,
      "max": 136201,
      "mean": 136201.0,
      "std": null,
      "p95": 136201.0,
      "p99": 136201.0,
      "p50": 136201.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 936,
      "max": 7319,
      "mean": 5247.427135678392,
      "std": 1652.452607678057,
      "p95": 7319.0,
      "p99": 7319.0,
      "p50": 5509.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.9,
      "std": 11.670475568716127,
      "p95": 37.0,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996131994609773,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.884607325469358,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 184, alpha = 86.00699303656836, beta = 4136.741253293796
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9217.50035907593, baseline: 236.81260204631334, increase: 38.92318347683739
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 110869
    },
    {
      "name": "queued_predictions",
      "count": 205
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 84287
    },
    {
      "name": "pred_ones_counter",
      "count": 110869
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1909717845760484
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49786236132407327
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17015,
      "max": 22108,
      "mean": 18823.3655155642,
      "std": 940.6556969822547,
      "p95": 20100.0,
      "p99": 20220.48,
      "p50": 18875.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.18433852140077823,
      "std": 0.3878071755956713,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1375,
      "max": 31694,
      "mean": 18158.499027237354,
      "std": 2253.9809764066787,
      "p95": 19378.0,
      "p99": 23065.0,
      "p50": 18564.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 163.3468992248062,
      "std": 40.662544608716327,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 179.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11084.49927562224,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8426.111498547645,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2133.920704139738,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 223535
    },
    {
      "name": "queued_predictions",
      "count": 280
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 170399
    },
    {
      "name": "pred_ones_counter",
      "count": 223535
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1826740060943462
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4981322835350169
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17015,
      "max": 22108,
      "mean": 18838.193336575874,
      "std": 941.6427929038331,
      "p95": 20101.35,
      "p99": 20226.61,
      "p50": 18878.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.17679961089494165,
      "std": 0.38154542511702169,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 31694,
      "mean": 18610.05739299611,
      "std": 1725.5255652513352,
      "p95": 19588.0,
      "p99": 20564.0,
      "p50": 18852.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 173.16971544715447,
      "std": 31.188800216135534,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11179.72482499954,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8517.720912437215,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2050.816208338308,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 339294
    },
    {
      "name": "queued_predictions",
      "count": 212
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 257247
    },
    {
      "name": "pred_ones_counter",
      "count": 339294
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.17567583488951594
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49844677477350027
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 20712,
      "mean": 18850.19406614786,
      "std": 929.7304282495746,
      "p95": 20100.0,
      "p99": 20214.87,
      "p50": 18910.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.16682879377431907,
      "std": 0.3728682854899373,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 31694,
      "mean": 18727.94880836576,
      "std": 1464.0958374917262,
      "p95": 19587.75,
      "p99": 20509.0,
      "p50": 18887.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 176.68063186813186,
      "std": 26.13236849267345,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11309.180621271116,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8572.76252454388,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1992.16513091085,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 454739
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 343543
    },
    {
      "name": "pred_ones_counter",
      "count": 454739
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.16920425796610245
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49875423044867497
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 20712,
      "mean": 18851.88035019455,
      "std": 921.7225786933144,
      "p95": 20096.0,
      "p99": 20205.739999999998,
      "p50": 18911.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1568579766536965,
      "std": 0.3637110425408537,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 31694,
      "mean": 18808.389348249028,
      "std": 1276.3779169219905,
      "p95": 19577.0,
      "p99": 20490.0,
      "p50": 18928.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 178.4638961038961,
      "std": 22.941495926208899,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11365.71142726646,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8586.486981028387,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1927.1194068581336,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 566279
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 429655
    },
    {
      "name": "pred_ones_counter",
      "count": 566279
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1655995862305141
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49821201210004259
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 21318,
      "mean": 18863.010457198445,
      "std": 922.5543100604048,
      "p95": 20099.0,
      "p99": 20210.87,
      "p50": 18928.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1571011673151751,
      "std": 0.3639403821771151,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 31694,
      "mean": 18873.260578793775,
      "std": 1175.6320125949354,
      "p95": 19604.0,
      "p99": 20234.0,
      "p50": 18973.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 179.54659423318013,
      "std": 20.69207123957125,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11322.86658825079,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8591.0410710969,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1878.5803355188128,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 680239
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 516135
    },
    {
      "name": "pred_ones_counter",
      "count": 680239
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.16024624554896034
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49771771392113658
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 21318,
      "mean": 18858.604085603114,
      "std": 925.6354046401672,
      "p95": 20102.0,
      "p99": 20222.87,
      "p50": 18927.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.15369649805447473,
      "std": 0.36070143469211,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 35839,
      "mean": 18901.273954280157,
      "std": 1146.4437187517036,
      "p95": 19597.0,
      "p99": 20128.5,
      "p50": 18980.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 180.27768075445338,
      "std": 18.988707554893133,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11334.633947721808,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8600.214329268261,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1819.3578811799787,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 794199
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 601879
    },
    {
      "name": "pred_ones_counter",
      "count": 794199
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1555791087574693
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4978575898483881
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21187,
      "mean": 18844.837791828795,
      "std": 925.36324105861,
      "p95": 20102.0,
      "p99": 20217.739999999998,
      "p50": 18910.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1512645914396887,
      "std": 0.3583501696764717,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 35839,
      "mean": 18929.190418287937,
      "std": 1069.2334010350467,
      "p95": 19602.0,
      "p99": 19932.25,
      "p50": 19008.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 180.79873835986784,
      "std": 17.656470426646423,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11343.048805407067,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8596.26223647927,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1767.2761270585559,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 904260
    },
    {
      "name": "queued_predictions",
      "count": 190
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 687255
    },
    {
      "name": "pred_ones_counter",
      "count": 904260
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.15287080546188293
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4979198460619733
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21187,
      "mean": 18846.218385214008,
      "std": 926.9135348128375,
      "p95": 20106.0,
      "p99": 20219.0,
      "p50": 18918.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.14761673151750974,
      "std": 0.35476279293768617,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 35839,
      "mean": 18955.482611867705,
      "std": 1037.0397823108243,
      "p95": 19610.0,
      "p99": 19959.75,
      "p50": 19031.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 181.1903506459267,
      "std": 16.57422067041546,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11301.283684239152,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8588.708554190258,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1729.5573603940352,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/DEBUG_cache_hit_rate_20_hitrate_160905-195004_results.json
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195004",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 1000000
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 772631
    },
    {
      "name": "pred_ones_counter",
      "count": 1000000
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 86007
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4136741
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 184
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9217500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 236813
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.150658
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.497915
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21187,
      "mean": 18842.658560311284,
      "std": 932.3961406132956,
      "p95": 20108.35,
      "p99": 20232.739999999998,
      "p50": 18907.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.14518482490272376,
      "std": 0.35232993107190349,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1816,
      "max": 35839,
      "mean": 18988.091196498055,
      "std": 955.2605906303776,
      "p95": 19644.0,
      "p99": 19949.25,
      "p50": 19051.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 184,
      "mean": 181.49659384543106,
      "std": 15.669160906919661,
      "p95": 184.0,
      "p99": 184.0,
      "p50": 184.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11108.528748461385,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8582.793484768052,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 1675.203386562162,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Shutting down metrics thread
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 21000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195231"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 21000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195231"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.153673546475399], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195231",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 132250,
      "max": 132250,
      "mean": 132250.0,
      "std": null,
      "p95": 132250.0,
      "p99": 132250.0,
      "p50": 132250.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 930,
      "max": 6990,
      "mean": 5078.765,
      "std": 1494.8183600688734,
      "p95": 6990.0,
      "p99": 6990.0,
      "p50": 5434.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995754108583115,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98301843093739,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 179, alpha = 90.32638889574842, beta = 3869.902776267339
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8932.881745143073, baseline: 252.51063973688468, increase: 35.376258816068535
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195231",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 109627
    },
    {
      "name": "queued_predictions",
      "count": 214
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82932
    },
    {
      "name": "pred_ones_counter",
      "count": 109625
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 90326
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3869903
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 179
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8932882
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 252511
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19128732702112165
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4952884834663626
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 22075,
      "mean": 18848.175340466925,
      "std": 941.4945145042156,
      "p95": 20117.0,
      "p99": 20249.87,
      "p50": 18895.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.21619649805447473,
      "std": 0.41169988137051519,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 552,
      "max": 33492,
      "mean": 17203.27188715953,
      "std": 3760.3505838155285,
      "p95": 19648.0,
      "p99": 23973.0,
      "p50": 18545.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 183,
      "mean": 137.37355371900828,
      "std": 58.39415024537986,
      "p95": 182.0,
      "p99": 183.0,
      "p50": 178.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10964.438750293904,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8308.398939504767,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2369.6369107965044,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195231",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 218436
    },
    {
      "name": "queued_predictions",
      "count": 148
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 166883
    },
    {
      "name": "pred_ones_counter",
      "count": 218436
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 90326
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3869903
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 179
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8932882
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 252511
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.18235094974929548
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49411958596757879
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 24029,
      "mean": 18846.837305447472,
      "std": 948.0470956586504,
      "p95": 20114.0,
      "p99": 20249.87,
      "p50": 18888.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.19455252918287939,
      "std": 0.3959039785933469,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 552,
      "max": 33492,
      "mean": 18133.198443579768,
      "std": 2836.637639772227,
      "p95": 19708.0,
      "p99": 21084.0,
      "p50": 18891.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 183,
      "mean": 155.52935694315006,
      "std": 48.45371430836309,
      "p95": 179.0,
      "p99": 183.0,
      "p50": 179.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10919.396390799313,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8341.816793842763,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2127.3024885731235,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195231",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 326023
    },
    {
      "name": "queued_predictions",
      "count": 178
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 249939
    },
    {
      "name": "pred_ones_counter",
      "count": 326023
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 90326
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3869903
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 179
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8932882
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 252511
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.17666155732679338
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4932688798029587
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17016,
      "max": 24029,
      "mean": 18838.674854085602,
      "std": 953.4286095049281,
      "p95": 20107.0,
      "p99": 20249.87,
      "p50": 18878.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.1833657587548638,
      "std": 0.38701315503417568,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 552,
      "max": 33492,
      "mean": 18502.7891536965,
      "std": 2415.9911694682898,
      "p95": 19825.0,
      "p99": 20657.0,
      "p50": 19048.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 183,
      "mean": 162.61483409238779,
      "std": 41.88931644094631,
      "p95": 179.0,
      "p99": 182.0,
      "p50": 179.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10865.008807183418,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8329.108889088244,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 2010.5205760635502,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195350"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
INFO:clipper::configuration: spark_svm_r0:6001
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "DEBUG_cache_hit_rate_20_hitrate_160905-195350"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1760580773364346], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195350",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 396
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 133321,
      "max": 133321,
      "mean": 133321.0,
      "std": null,
      "p95": 133321.0,
      "p99": 133321.0,
      "p50": 133321.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 934,
      "max": 6730,
      "mean": 5035.709595959596,
      "std": 1411.4267775422789,
      "p95": 6730.0,
      "p99": 6730.0,
      "p50": 5544.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.8,
      "std": 11.523888232710347,
      "p95": 36.9,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049958045233612819,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.78338788918945,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 135, alpha = 132.11504414995773, beta = 2120.433629737118
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6764.894745692958, baseline: 443.9415723143357, increase: 15.238254688396317
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195350",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 94819
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 76221
    },
    {
      "name": "pred_ones_counter",
      "count": 94819
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 132115
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2120434
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 135
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6764895
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 443942
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19660349961594715
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5125027684324872
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 23523,
      "mean": 18868.06930933852,
      "std": 978.2514329298965,
      "p95": 20125.0,
      "p99": 20254.87,
      "p50": 18945.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7582684824902723,
      "std": 0.42818451397627968,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 361,
      "max": 23403,
      "mean": 8075.320282101167,
      "std": 4378.46024352672,
      "p95": 15665.0,
      "p99": 18798.0,
      "p50": 7435.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 42.39666666666667,
      "std": 35.84252181704945,
      "p95": 121.0,
      "p99": 142.99,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9478.26129548866,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7628.468379601719,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7224.547775844389,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195350",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 189054
    },
    {
      "name": "queued_predictions",
      "count": 145
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 152155
    },
    {
      "name": "pred_ones_counter",
      "count": 189054
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 132115
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2120434
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 135
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6764895
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 443942
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19556657276201248
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5103250923016705
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 27137,
      "mean": 18879.596546692606,
      "std": 1001.2047050982193,
      "p95": 20125.0,
      "p99": 20278.96,
      "p50": 18956.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8360894941634242,
      "std": 0.37023936555277905,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 435,
      "max": 23403,
      "mean": 7364.498054474709,
      "std": 4029.8254534419208,
      "p95": 14270.0,
      "p99": 17666.0,
      "p50": 6744.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 39.23640113431297,
      "std": 33.153192101341797,
      "p95": 104.0,
      "p99": 135.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9450.714814148922,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7607.416178617681,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7957.825919336968,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195350",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 283324
    },
    {
      "name": "queued_predictions",
      "count": 158
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 228048
    },
    {
      "name": "pred_ones_counter",
      "count": 283324
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 132115
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2120434
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 135
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6764895
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 443942
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19519405112141159
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5095156075729553
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 26378,
      "mean": 18872.87475680934,
      "std": 980.2274700760214,
      "p95": 20125.0,
      "p99": 20271.87,
      "p50": 18940.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8628404669260701,
      "std": 0.3440575291971934,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 408,
      "max": 23403,
      "mean": 7194.531493190661,
      "std": 3897.898910946961,
      "p95": 14298.0,
      "p99": 16759.0,
      "p50": 6655.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 38.37247644683715,
      "std": 32.34392971159203,
      "p95": 100.0,
      "p99": 135.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9442.125473425034,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7600.525704749603,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8199.325046674645,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_20_hitrate_160905-195350",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 377602
    },
    {
      "name": "queued_predictions",
      "count": 160
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 303811
    },
    {
      "name": "pred_ones_counter",
      "count": 377602
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 132115
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2120434
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 135
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 6764895
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 443942
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1957274459974587
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5092663704111736
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 25730,
      "mean": 18889.673394941634,
      "std": 972.2428659091372,
      "p95": 20126.35,
      "p99": 20279.61,
      "p50": 18978.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8784046692607004,
      "std": 0.3268575955548989,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 293,
      "max": 23403,
      "mean": 6962.071619649805,
      "std": 3844.235466972322,
      "p95": 14220.0,
      "p99": 16569.0,
      "p50": 6419.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 169,
      "mean": 36.952809535392848,
      "std": 31.464183660732194,
      "p95": 97.0,
      "p99": 135.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9439.071042717182,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7593.548219407325,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8360.979886738565,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "cache_hit_rate_20_hitrate_160905-195510"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 20000
name = "cache_hit_rate_20_hitrate_160905-195510"
cache_hit_rate = 0.2
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.086523260998865], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 132207,
      "max": 132207,
      "mean": 132207.0,
      "std": null,
      "p95": 132207.0,
      "p99": 132207.0,
      "p50": 132207.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 920,
      "max": 6992,
      "mean": 5089.735,
      "std": 1518.2756575159575,
      "p95": 6992.0,
      "p99": 6992.0,
      "p50": 5638.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049955085382732387,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.982040142320085,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 177, alpha = 91.04000001900145, beta = 3911.1599979169473
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8838.845376568994, baseline: 249.8625757122905, increase: 35.374826947860605
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 93499
    },
    {
      "name": "queued_predictions",
      "count": 198
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 74935
    },
    {
      "name": "pred_ones_counter",
      "count": 93499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1987363522844915
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4942084942084942
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22003,
      "mean": 18895.96522373541,
      "std": 968.1719746611835,
      "p95": 20126.0,
      "p99": 20257.739999999998,
      "p50": 19004.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7619163424124513,
      "std": 0.42596238689903617,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 404,
      "max": 31675,
      "mean": 8659.213278210116,
      "std": 5099.870676562191,
      "p95": 19104.0,
      "p99": 22370.0,
      "p50": 7621.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 42.384049773755659,
      "std": 38.130670917666318,
      "p95": 120.0,
      "p99": 177.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9344.445647075803,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7489.125601736026,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7093.178794496116,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 187439
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 150268
    },
    {
      "name": "pred_ones_counter",
      "count": 187439
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19870083502523196
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49409674614141138
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22003,
      "mean": 18884.47568093385,
      "std": 978.4457998812712,
      "p95": 20125.0,
      "p99": 20253.0,
      "p50": 18987.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8674610894941635,
      "std": 0.3391169631710949,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 31675,
      "mean": 7556.589980544747,
      "std": 4460.352634234342,
      "p95": 17751.0,
      "p99": 19636.0,
      "p50": 6976.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 38.28484076433121,
      "std": 33.63967620981035,
      "p95": 98.69999999999982,
      "p99": 176.21999999999935,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9367.906343226945,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7510.157864849744,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8033.982274107288,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 281454
    },
    {
      "name": "queued_predictions",
      "count": 148
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 225642
    },
    {
      "name": "pred_ones_counter",
      "count": 281454
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1987109375
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49464566145800029
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21276,
      "mean": 18885.136916342413,
      "std": 986.1694387801559,
      "p95": 20126.0,
      "p99": 20247.87,
      "p50": 18989.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8764591439688716,
      "std": 0.3290970246762531,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 474,
      "max": 31675,
      "mean": 7454.053501945526,
      "std": 4440.899492843812,
      "p95": 18087.0,
      "p99": 19636.0,
      "p50": 6783.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 37.47683109118087,
      "std": 33.14185261879878,
      "p95": 95.0,
      "p99": 169.77999999999975,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9380.72081774642,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7519.0708218574759,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8200.058705223388,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 376859
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 302138
    },
    {
      "name": "pred_ones_counter",
      "count": 376859
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19849421474014729
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4947924820688905
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21276,
      "mean": 18901.859435797665,
      "std": 977.1348630995024,
      "p95": 20129.0,
      "p99": 20263.0,
      "p50": 19010.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8917801556420234,
      "std": 0.3106956473364396,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 282,
      "max": 31675,
      "mean": 7410.939931906615,
      "std": 4404.4158237695369,
      "p95": 18431.0,
      "p99": 19578.0,
      "p50": 6813.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 37.393316831683168,
      "std": 33.0353834001397,
      "p95": 95.0,
      "p99": 172.1899999999996,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9418.05200899733,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7550.705507315728,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8344.255524309923,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 470339
    },
    {
      "name": "queued_predictions",
      "count": 173
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 376960
    },
    {
      "name": "pred_ones_counter",
      "count": 470339
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19863255347366275
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4947240182081435
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23353,
      "mean": 18891.782101167315,
      "std": 976.1941051139988,
      "p95": 20131.0,
      "p99": 20263.0,
      "p50": 19002.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9102626459143969,
      "std": 0.2858398697207207,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 282,
      "max": 31675,
      "mean": 7201.150899805448,
      "std": 4201.325024013742,
      "p95": 16462.75,
      "p99": 19404.0,
      "p50": 6660.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 36.637402723735409,
      "std": 31.938643474144617,
      "p95": 93.0,
      "p99": 159.25,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9403.86532555005,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7536.543368462617,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8489.379315244472,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 565179
    },
    {
      "name": "queued_predictions",
      "count": 171
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 452852
    },
    {
      "name": "pred_ones_counter",
      "count": 565179
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19884673211285046
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4944805097146214
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23353,
      "mean": 18869.157587548638,
      "std": 978.8129932070516,
      "p95": 20130.0,
      "p99": 20265.61,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9178015564202334,
      "std": 0.27470021964204718,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 282,
      "max": 31675,
      "mean": 7076.668044747082,
      "std": 4096.051382918012,
      "p95": 15315.25,
      "p99": 19404.0,
      "p50": 6567.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 36.24963521400778,
      "std": 31.390892286750807,
      "p95": 93.0,
      "p99": 150.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9416.37137642625,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7544.906196995539,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8588.370755229325,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 658679
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 527740
    },
    {
      "name": "pred_ones_counter",
      "count": 658679
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1989348898693123
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49445784669011769
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23353,
      "mean": 18873.318336575874,
      "std": 980.1526892078487,
      "p95": 20128.35,
      "p99": 20259.35,
      "p50": 18968.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9226653696498055,
      "std": 0.2671541542681057,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 282,
      "max": 31675,
      "mean": 6981.138740272374,
      "std": 4037.668378459941,
      "p95": 14730.0,
      "p99": 19392.0,
      "p50": 6497.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 36.04851653696498,
      "std": 31.05575447349098,
      "p95": 92.0,
      "p99": 145.5,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9407.538446433831,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7536.518318470724,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8630.845328237196,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 751739
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 602315
    },
    {
      "name": "pred_ones_counter",
      "count": 751739
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19891377056461854
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49417151431547387
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23353,
      "mean": 18870.95379377432,
      "std": 981.1448578645506,
      "p95": 20128.35,
      "p99": 20254.87,
      "p50": 18965.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9243677042801557,
      "std": 0.26444102869593535,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 414,
      "max": 31675,
      "mean": 6955.620500972763,
      "std": 3999.0706813043755,
      "p95": 14414.0,
      "p99": 19392.0,
      "p50": 6499.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 35.8880107003891,
      "std": 30.992990655344529,
      "p95": 92.0,
      "p99": 140.75,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9393.467868671612,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7526.317682893557,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8640.98943577428,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 845239
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 677222
    },
    {
      "name": "pred_ones_counter",
      "count": 845239
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.19885766193274896
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4940851049229863
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 23353,
      "mean": 18876.42631322957,
      "std": 981.7476382050113,
      "p95": 20128.0,
      "p99": 20254.87,
      "p50": 18968.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9282587548638133,
      "std": 0.2580903678318553,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 414,
      "max": 31675,
      "mean": 6921.548394941634,
      "std": 3980.9994184301715,
      "p95": 14359.25,
      "p99": 19399.5,
      "p50": 6486.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 35.73285505836576,
      "std": 30.8028177563301,
      "p95": 91.0,
      "p99": 139.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9388.300995079555,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7522.090090341454,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8667.309254120348,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_20_hitrate_160905-195510",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 938739
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 752180
    },
    {
      "name": "pred_ones_counter",
      "count": 938739
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 91040
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3911160
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 177
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 8838845
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 249863
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.1988287028507102
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4939338836460401
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17013,
      "max": 23353,
      "mean": 18874.632295719843,
      "std": 985.6177375143097,
      "p95": 20127.0,
      "p99": 20259.61,
      "p50": 18972.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9294747081712063,
      "std": 0.25606136066496368,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 414,
      "max": 31675,
      "mean": 6905.932757782101,
      "std": 3988.5958074387469,
      "p95": 14538.25,
      "p99": 19328.0,
      "p50": 6459.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 177,
      "mean": 35.48844844357976,
      "std": 30.729163925797335,
      "p95": 91.0,
      "p99": 139.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 9384.564285202032,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7519.2233877217299,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8673.302522076328,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_20_hitrate_160905-195510_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 22000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-195821"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 22000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-195821"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.3279179195864705], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 132267,
      "max": 132267,
      "mean": 132267.0,
      "std": null,
      "p95": 132267.0,
      "p99": 132267.0,
      "p50": 132267.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 941,
      "max": 6712,
      "mean": 5052.791979949875,
      "std": 1504.9767788441555,
      "p95": 6712.0,
      "p99": 6712.0,
      "p50": 5520.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995899116210459,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.933644444733099,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 188, alpha = 86.09090916748093, beta = 3850.09090398922
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9383.493577392073, baseline: 254.05330532687714, increase: 36.93513676320338
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 116199
    },
    {
      "name": "queued_predictions",
      "count": 243
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 81914
    },
    {
      "name": "pred_ones_counter",
      "count": 116200
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 86091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3850091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 188
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9383494
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 254053
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2961878343910755
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.500946643717728
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 21047,
      "mean": 18909.06614785992,
      "std": 902.7177501392065,
      "p95": 20112.0,
      "p99": 20262.35,
      "p50": 18975.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5535019455252919,
      "std": 0.4971897605411663,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 386,
      "max": 35329,
      "mean": 13400.225924124514,
      "std": 6882.191426932925,
      "p95": 20153.0,
      "p99": 25069.25,
      "p50": 18740.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 188,
      "mean": 71.06157849089333,
      "std": 62.79679964039301,
      "p95": 188.0,
      "p99": 188.0,
      "p50": 48.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11625.219663452599,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8190.16979703205,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6586.105709060173,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 232319
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 163201
    },
    {
      "name": "pred_ones_counter",
      "count": 232319
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 86091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3850091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 188
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9383494
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 254053
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.29772210252903816
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5006262940181389
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 21047,
      "mean": 18902.69552529183,
      "std": 906.022048313711,
      "p95": 20112.0,
      "p99": 20252.61,
      "p50": 18973.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7699416342412452,
      "std": 0.42092113431335728,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 386,
      "max": 35329,
      "mean": 9886.339129377431,
      "std": 6373.920359271979,
      "p95": 19942.0,
      "p99": 22482.25,
      "p50": 7747.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 188,
      "mean": 50.58927464352139,
      "std": 46.59265267593872,
      "p95": 188.0,
      "p99": 188.0,
      "p50": 39.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11612.139476430808,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8157.372750263363,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9019.40981675973,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 344002
    },
    {
      "name": "queued_predictions",
      "count": 187
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 241703
    },
    {
      "name": "pred_ones_counter",
      "count": 344002
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 86091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3850091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 188
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9383494
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 254053
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2975516358744759
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49987500072673998
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 21047,
      "mean": 18892.99805447471,
      "std": 924.1804750537381,
      "p95": 20133.0,
      "p99": 20272.87,
      "p50": 18968.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8377918287937743,
      "std": 0.368686502658907,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 377,
      "max": 35329,
      "mean": 8761.455252918287,
      "std": 5737.566501896005,
      "p95": 19713.0,
      "p99": 20324.0,
      "p50": 7319.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 188,
      "mean": 45.524105461393599,
      "std": 40.951018926528629,
      "p95": 113.0,
      "p99": 188.0,
      "p50": 36.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11463.792285015781,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8055.348451061657,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9663.16543181289,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 456279
    },
    {
      "name": "queued_predictions",
      "count": 220
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 320772
    },
    {
      "name": "pred_ones_counter",
      "count": 456279
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 86091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3850091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 188
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9383494
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 254053
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.29715727745296269
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49941811917708248
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21047,
      "mean": 18906.574902723736,
      "std": 919.6658659634126,
      "p95": 20137.35,
      "p99": 20290.22,
      "p50": 18985.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.879863813229572,
      "std": 0.32516026164303277,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 377,
      "max": 35329,
      "mean": 8089.51969844358,
      "std": 5256.628113304842,
      "p95": 19566.0,
      "p99": 20203.0,
      "p50": 6947.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 188,
      "mean": 42.57658614281922,
      "std": 37.659494546655327,
      "p95": 99.0,
      "p99": 188.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11403.676486576258,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8016.981088220233,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10035.243405552224,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195821",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 568039
    },
    {
      "name": "queued_predictions",
      "count": 188
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399341
    },
    {
      "name": "pred_ones_counter",
      "count": 568039
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 86091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3850091
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 188
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9383494
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 254053
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2970437818755214
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4998248359707696
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22745,
      "mean": 18903.94552529183,
      "std": 932.26592282619,
      "p95": 20134.35,
      "p99": 20285.87,
      "p50": 18985.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8951848249027238,
      "std": 0.30635237561109987,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 377,
      "max": 35329,
      "mean": 7733.647616731518,
      "std": 4966.4726848825289,
      "p95": 19479.0,
      "p99": 20064.0,
      "p50": 6754.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 188,
      "mean": 40.63533560311284,
      "std": 35.55913825170219,
      "p95": 94.0,
      "p99": 188.0,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 11357.464074788724,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7985.248307494211,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10190.526806590218,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 24000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-195951"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 220
target_qps = 24000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-195951"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.111999579664969], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195951",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 132467,
      "max": 132467,
      "mean": 132467.0,
      "std": null,
      "p95": 132467.0,
      "p99": 132467.0,
      "p50": 132467.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 917,
      "max": 6654,
      "mean": 5011.924812030075,
      "std": 1435.343383131154,
      "p95": 6654.0,
      "p99": 6654.0,
      "p50": 5421.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0499548208600142,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93197949733646,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 9
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 183, alpha = 84.4428571685078, beta = 4538.842852362436
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9153.713792492475, baseline: 216.2963880727707, increase: 42.32023416596676
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195951",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 121326
    },
    {
      "name": "queued_predictions",
      "count": 219
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 83199
    },
    {
      "name": "pred_ones_counter",
      "count": 121326
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 84443
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 4538843
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 183
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9153714
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 216296
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2815112222734154
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49550804430963998
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 20611,
      "mean": 18903.083171206225,
      "std": 927.6251522821846,
      "p95": 20120.35,
      "p99": 20246.87,
      "p50": 18994.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.2811284046692607,
      "std": 0.44960469791131449,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1244,
      "max": 33416,
      "mean": 18334.028210116732,
      "std": 2231.02764987189,
      "p95": 19578.0,
      "p99": 24106.0,
      "p50": 18701.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 163.13529411764706,
      "std": 40.42129962131818,
      "p95": 183.0,
      "p99": 183.0,
      "p50": 179.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12135.976684592571,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8317.688326673939,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 3438.0348293494914,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195951",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 247490
    },
    {
      "name": "queued_predictions",
      "count": 229
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 167745
    },
    {
      "name": "pred_ones_counter",
      "count": 247490
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 84443
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 4538843
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 183
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9153714
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 216296
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.27387079715322606
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4962826780880036
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 20637,
      "mean": 18921.782101167315,
      "std": 918.6915728223808,
      "p95": 20126.35,
      "p99": 20262.48,
      "p50": 19027.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.26434824902723738,
      "std": 0.44103917811273798,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 1244,
      "max": 33416,
      "mean": 18820.238326848248,
      "std": 1663.5722734807517,
      "p95": 19854.0,
      "p99": 21131.0,
      "p50": 19047.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 172.57716049382717,
      "std": 30.903011177858575,
      "p95": 183.0,
      "p99": 183.0,
      "p50": 183.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12371.870641397356,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8385.162513792191,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 3398.48790631288,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-195951",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 378179
    },
    {
      "name": "queued_predictions",
      "count": 284
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 253206
    },
    {
      "name": "pred_ones_counter",
      "count": 378179
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 84443
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 4538843
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 183
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 9153714
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 216296
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2620863862517604
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4964606707405752
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 20611,
      "mean": 18922.08438715953,
      "std": 925.2253237522187,
      "p95": 20126.0,
      "p99": 20248.87,
      "p50": 19037.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.25753891050583657,
      "std": 0.43733183341285938,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2865,
      "max": 33416,
      "mean": 18961.23674610895,
      "std": 1367.6509108657379,
      "p95": 19878.0,
      "p99": 20600.0,
      "p50": 19125.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 183,
      "mean": 175.95969423210563,
      "std": 25.858952795577428,
      "p95": 183.0,
      "p99": 183.0,
      "p50": 183.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12606.161631949015,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8438.143624398734,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 3311.055981683679,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
bench_batch_size = 250
target_qps = 22000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-200117"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
INFO:clipper::configuration: spark_svm_r0:6001
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 22000
name = "DEBUG_cache_hit_rate_30_hitrate_160905-200117"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [0.9828625241602184], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-200117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 398
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137987,
      "max": 137987,
      "mean": 137987.0,
      "std": null,
      "p95": 137987.0,
      "p99": 137987.0,
      "p50": 137987.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 954,
      "max": 6935,
      "mean": 5130.547738693467,
      "std": 1534.2178757134209,
      "p95": 6935.0,
      "p99": 6935.0,
      "p50": 5670.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.9,
      "std": 11.670475568716127,
      "p95": 37.0,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995338350251546,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.881448620292408,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 151, alpha = 116.45454553350793, beta = 2418.9090865795433
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7548.6618252648295, baseline: 394.420740020858, increase: 19.138602662896574
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-200117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 106708
    },
    {
      "name": "queued_predictions",
      "count": 208
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 74704
    },
    {
      "name": "pred_ones_counter",
      "count": 106708
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 116455
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2418909
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 151
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7548662
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 394421
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.30041902837794867
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4861772313228624
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17027,
      "max": 22271,
      "mean": 18858.89299610895,
      "std": 958.0069789233509,
      "p95": 20130.0,
      "p99": 20297.87,
      "p50": 18921.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8341439688715954,
      "std": 0.3719965875459116,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 413,
      "max": 26217,
      "mean": 7561.316634241245,
      "std": 4424.031290325042,
      "p95": 15505.0,
      "p99": 19558.0,
      "p50": 6765.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 151,
      "mean": 38.19161982626469,
      "std": 33.52744459675874,
      "p95": 103.09999999999991,
      "p99": 151.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10670.437622986066,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7470.971904063768,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8985.164261724512,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-200117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 212226
    },
    {
      "name": "queued_predictions",
      "count": 134
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 148780
    },
    {
      "name": "pred_ones_counter",
      "count": 212226
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 116455
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2418909
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 151
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7548662
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 394421
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2991241288378226
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48555313675044528
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22559,
      "mean": 18850.11186770428,
      "std": 966.6551042747857,
      "p95": 20123.0,
      "p99": 20259.09,
      "p50": 18928.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8927529182879378,
      "std": 0.3094647559341808,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 418,
      "max": 26217,
      "mean": 7054.659168287938,
      "std": 3976.939238030348,
      "p95": 15309.0,
      "p99": 16812.0,
      "p50": 6473.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 151,
      "mean": 35.97099347353154,
      "std": 31.11180670182369,
      "p95": 94.0,
      "p99": 151.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10608.743305089203,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7438.000790623717,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9531.007446490466,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-200117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 318249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 223118
    },
    {
      "name": "pred_ones_counter",
      "count": 318249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 116455
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2418909
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 151
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7548662
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 394421
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2991971717336632
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4858616994868798
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22559,
      "mean": 18852.395914396886,
      "std": 964.2936624500551,
      "p95": 20125.0,
      "p99": 20260.35,
      "p50": 18924.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9056420233463035,
      "std": 0.2923616522373454,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 418,
      "max": 26217,
      "mean": 6928.581955252918,
      "std": 3841.0921164505468,
      "p95": 15030.0,
      "p99": 16805.0,
      "p50": 6411.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 151,
      "mean": 35.54532419945834,
      "std": 30.521013133786388,
      "p95": 93.0,
      "p99": 151.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10604.928339783171,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7434.9026154650359,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9700.993464989468,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_30_hitrate_160905-200117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 425382
    },
    {
      "name": "queued_predictions",
      "count": 223
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 298560
    },
    {
      "name": "pred_ones_counter",
      "count": 425382
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 116455
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2418909
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 151
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7548662
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 394421
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2983830039191361
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4857210695327964
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22675,
      "mean": 18879.36211089494,
      "std": 962.1760782719814,
      "p95": 20127.0,
      "p99": 20247.0,
      "p50": 18953.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9258268482490273,
      "std": 0.26208433688226676,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 418,
      "max": 26217,
      "mean": 6697.828064202335,
      "std": 3656.8309484162916,
      "p95": 14127.5,
      "p99": 16305.0,
      "p50": 6246.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 151,
      "mean": 35.13545719844358,
      "std": 29.730151846556024,
      "p95": 90.0,
      "p99": 133.75,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10632.504468854377,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7462.294338920597,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9903.947168279485,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 22000
name = "cache_hit_rate_30_hitrate_160905-200237"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 22000
name = "cache_hit_rate_30_hitrate_160905-200237"
cache_hit_rate = 0.3
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
INFO:clipper::configuration: spark_svm_r0:6001
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1798559295648487], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136007,
      "max": 136007,
      "mean": 136007.0,
      "std": null,
      "p95": 136007.0,
      "p99": 136007.0,
      "p50": 136007.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 962,
      "max": 7046,
      "mean": 5268.466165413533,
      "std": 1601.1093557525895,
      "p95": 7046.0,
      "p99": 7046.0,
      "p50": 5509.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0499612001319775,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.934524828375733,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 11
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 153, alpha = 111.7058824355593, beta = 2876.2941132045926
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7662.53048789223, baseline: 334.6720219073357, increase: 22.895641064414516
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 105497
    },
    {
      "name": "queued_predictions",
      "count": 191
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 73956
    },
    {
      "name": "pred_ones_counter",
      "count": 105497
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.29913138920954526
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5071708200233182
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23466,
      "mean": 18867.95744163424,
      "std": 968.357513165406,
      "p95": 20139.35,
      "p99": 20290.87,
      "p50": 18920.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8037451361867705,
      "std": 0.39721186059794907,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 433,
      "max": 28649,
      "mean": 7837.204158560311,
      "std": 4663.752430927667,
      "p95": 15538.0,
      "p99": 19804.0,
      "p50": 6739.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 37.96716264751154,
      "std": 34.81810978792537,
      "p95": 114.0,
      "p99": 153.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10546.297384813348,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7397.270133614304,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8519.179071853852,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 209249
    },
    {
      "name": "queued_predictions",
      "count": 222
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 146889
    },
    {
      "name": "pred_ones_counter",
      "count": 209249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2982417613894047
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5084898852563214
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22751,
      "mean": 18873.618920233464,
      "std": 966.6538812127794,
      "p95": 20134.35,
      "p99": 20258.739999999998,
      "p50": 18950.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8959143968871596,
      "std": 0.3054086996444045,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 28649,
      "mean": 6712.481395914397,
      "std": 4048.411784158791,
      "p95": 15277.0,
      "p99": 16896.0,
      "p50": 5933.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 33.27355072463768,
      "std": 30.01267210929985,
      "p95": 89.0,
      "p99": 153.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10459.326322193878,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7344.606166138175,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9341.30929942332,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 314249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 220238
    },
    {
      "name": "pred_ones_counter",
      "count": 314249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2991138286608225
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5076038428125468
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22751,
      "mean": 18894.465710116732,
      "std": 969.6985843456242,
      "p95": 20139.0,
      "p99": 20264.48,
      "p50": 18984.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9129377431906615,
      "std": 0.2819605545689735,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 28649,
      "mean": 6566.36515077821,
      "std": 3780.7641537896367,
      "p95": 14427.25,
      "p99": 16590.0,
      "p50": 5928.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 33.2083835946924,
      "std": 29.313170308450489,
      "p95": 87.0,
      "p99": 142.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10471.915848516132,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7339.128289320768,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9578.706450792575,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 420499
    },
    {
      "name": "queued_predictions",
      "count": 218
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 294798
    },
    {
      "name": "pred_ones_counter",
      "count": 420499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.29904187375361587
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5074613732731825
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22751,
      "mean": 18905.046935797665,
      "std": 957.2073581645079,
      "p95": 20131.7,
      "p99": 20260.739999999998,
      "p50": 18984.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9229085603112841,
      "std": 0.26676891955118989,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 369,
      "max": 28649,
      "mean": 6409.851653696498,
      "std": 3642.000388154248,
      "p95": 13962.0,
      "p99": 16590.0,
      "p50": 5851.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 33.05410992217899,
      "std": 28.923944099479415,
      "p95": 87.0,
      "p99": 132.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10509.38235150851,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7368.8813382221619,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9723.1614959414,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 526749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 369502
    },
    {
      "name": "pred_ones_counter",
      "count": 526749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2987481949681119
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5070289644593535
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22926,
      "mean": 18901.27626459144,
      "std": 964.6068185113132,
      "p95": 20140.35,
      "p99": 20275.87,
      "p50": 18975.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9343385214007782,
      "std": 0.24771954346713599,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 28649,
      "mean": 6340.5873054474709,
      "std": 3571.2289725292828,
      "p95": 13416.0,
      "p99": 16560.0,
      "p50": 5848.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 32.75632295719844,
      "std": 28.719393441972885,
      "p95": 87.0,
      "p99": 128.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10532.90788441157,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7387.786872759546,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9851.527214543397,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 632999
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 444177
    },
    {
      "name": "pred_ones_counter",
      "count": 632999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2983992078945249
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5069628861972926
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22926,
      "mean": 18897.56955252918,
      "std": 966.2190775343268,
      "p95": 20131.7,
      "p99": 20260.87,
      "p50": 18974.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9345817120622568,
      "std": 0.24729255453267388,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 28649,
      "mean": 6363.640564202335,
      "std": 3559.9204635922617,
      "p95": 13529.0,
      "p99": 16415.0,
      "p50": 5868.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 32.960846303501948,
      "std": 28.93024691794856,
      "p95": 88.0,
      "p99": 130.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10546.748996974262,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7400.680334686024,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9888.840114742527,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 738748
    },
    {
      "name": "queued_predictions",
      "count": 162
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 518534
    },
    {
      "name": "pred_ones_counter",
      "count": 738747
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2981621577729358
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5065482499421318
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22926,
      "mean": 18898.91439688716,
      "std": 967.8980900331287,
      "p95": 20137.0,
      "p99": 20260.0,
      "p50": 18979.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9394455252918288,
      "std": 0.23854028633896735,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 24236,
      "mean": 6322.558608949416,
      "std": 3500.065725651537,
      "p95": 13165.5,
      "p99": 16285.0,
      "p50": 5857.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 162,
      "mean": 32.63144455252918,
      "std": 28.51062750757066,
      "p95": 87.0,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10550.324824768686,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7405.359569256551,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9938.86059392566,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 844242
    },
    {
      "name": "queued_predictions",
      "count": 135
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 592239
    },
    {
      "name": "pred_ones_counter",
      "count": 844242
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.2985707788947104
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5065170887020546
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22926,
      "mean": 18881.258998054476,
      "std": 972.176678303779,
      "p95": 20135.35,
      "p99": 20257.739999999998,
      "p50": 18963.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9384727626459144,
      "std": 0.2403241187650188,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24236,
      "mean": 6342.9739785992219,
      "std": 3524.7936899257458,
      "p95": 13414.75,
      "p99": 16399.5,
      "p50": 5874.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 160,
      "mean": 32.62767509727627,
      "std": 28.369416274961674,
      "p95": 87.0,
      "p99": 122.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10549.846926756909,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7400.696614363024,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9940.178363838497,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_30_hitrate_160905-200237",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 950749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 667139
    },
    {
      "name": "pred_ones_counter",
      "count": 950749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 111706
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2876294
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 153
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7662530
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 334672
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.29845562403325345
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5065974300262215
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22751,
      "mean": 18877.164883268484,
      "std": 969.5258677436466,
      "p95": 20133.35,
      "p99": 20256.0,
      "p50": 18952.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9418774319066148,
      "std": 0.23400352929208119,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 24236,
      "mean": 6292.607368677042,
      "std": 3471.69996169097,
      "p95": 13102.0,
      "p99": 16303.0,
      "p50": 5861.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 160,
      "mean": 32.7011186770428,
      "std": 28.120887364711114,
      "p95": 86.75,
      "p99": 120.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 10562.108101179923,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7410.68359481868,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9986.612722030413,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_30_hitrate_160905-200237_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: Dropping ClipperServer
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200624"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200624"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1066345431329951], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200624",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 141342,
      "max": 141342,
      "mean": 141342.0,
      "std": null,
      "p95": 141342.0,
      "p99": 141342.0,
      "p50": 141342.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 885,
      "max": 7393,
      "mean": 5301.685,
      "std": 1687.6544624824265,
      "p95": 7393.0,
      "p99": 7393.0,
      "p50": 5728.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04996509688157338,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.986045742862335,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 105, alpha = 185.8333332782812, beta = 551.8333335825603
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 5233.166648727225, baseline: 1355.6258469093152, increase: 3.860332598893932
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200624",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 124499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 75182
    },
    {
      "name": "pred_ones_counter",
      "count": 124499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 185833
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 551833
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 105
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 5233167
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 1355626
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3967887518136418
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48293560590848119
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23827,
      "mean": 18912.849951361866,
      "std": 939.3739113226729,
      "p95": 20146.35,
      "p99": 20270.739999999998,
      "p50": 19025.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8988326848249028,
      "std": 0.3015868180588006,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 369,
      "max": 19394,
      "mean": 6484.98030155642,
      "std": 3299.8484732035128,
      "p95": 11296.0,
      "p99": 13401.0,
      "p50": 6466.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 105,
      "mean": 33.988245931283909,
      "std": 28.969780215152654,
      "p95": 105.0,
      "p99": 105.0,
      "p50": 23.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12445.67096100745,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7515.643929499577,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11227.665181786017,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200624",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 251999
    },
    {
      "name": "queued_predictions",
      "count": 280
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 151786
    },
    {
      "name": "pred_ones_counter",
      "count": 251999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 185833
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 551833
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 105
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 5233167
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 1355626
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3982852318266681
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48318842535089426
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 23783,
      "mean": 18900.874513618677,
      "std": 944.8427469198039,
      "p95": 20144.35,
      "p99": 20281.48,
      "p50": 19001.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9452821011673152,
      "std": 0.22745644021922607,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 369,
      "max": 19394,
      "mean": 6340.700389105058,
      "std": 3002.078044036026,
      "p95": 11156.0,
      "p99": 12415.0,
      "p50": 6442.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 105,
      "mean": 34.87936580882353,
      "std": 27.95366552006601,
      "p95": 89.0,
      "p99": 105.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12600.366165683074,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7587.380840332606,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11940.111802510253,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200731"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200731"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0562212213157902], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200731",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 140186,
      "max": 140186,
      "mean": 140186.0,
      "std": null,
      "p95": 140186.0,
      "p99": 140186.0,
      "p50": 140186.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 939,
      "max": 7276,
      "mean": 5280.38,
      "std": 1608.592197464713,
      "p95": 7276.0,
      "p99": 7276.0,
      "p50": 5751.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049952812076072338,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.98112682665588,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 8
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 175, alpha = 89.50781252961035, beta = 4339.17968236319
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8748.667195212294, baseline: 225.80053371415534, increase: 38.74511300441556
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200731",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 145499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 79944
    },
    {
      "name": "pred_ones_counter",
      "count": 145499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89508
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4339180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 175
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8748667
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 225801
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3703558858036762
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.486938054557076
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21782,
      "mean": 18930.70549610895,
      "std": 914.2384229672391,
      "p95": 20138.0,
      "p99": 20302.87,
      "p50": 19015.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.371352140077821,
      "std": 0.48322511807771076,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 845,
      "max": 32454,
      "mean": 18411.99805447471,
      "std": 2202.8215688424959,
      "p95": 19741.0,
      "p99": 23244.0,
      "p50": 18773.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 175,
      "mean": 157.06090373280945,
      "std": 38.154552880106709,
      "p95": 175.0,
      "p99": 175.0,
      "p50": 169.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14545.739918383342,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7992.111858374948,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5413.657270545421,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200731",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 293938
    },
    {
      "name": "queued_predictions",
      "count": 270
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 161494
    },
    {
      "name": "pred_ones_counter",
      "count": 293938
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89508
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4339180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 175
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8748667
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 225801
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.34748205351316077
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48530302308650127
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21518,
      "mean": 18941.823443579768,
      "std": 909.4869556276401,
      "p95": 20141.7,
      "p99": 20302.87,
      "p50": 19051.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.3329280155642023,
      "std": 0.4713183368247587,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2338,
      "max": 32454,
      "mean": 18805.89931906615,
      "std": 1628.659661623931,
      "p95": 19825.0,
      "p99": 20618.0,
      "p50": 19035.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 175,
      "mean": 165.6348717948718,
      "std": 28.97673098827524,
      "p95": 175.0,
      "p99": 175.0,
      "p50": 175.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14695.073292662175,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8072.679811877077,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 5118.770118103602,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200731",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 449999
    },
    {
      "name": "queued_predictions",
      "count": 344
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 265094
    },
    {
      "name": "pred_ones_counter",
      "count": 449999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 89508
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 4339180
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 175
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8748667
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 225801
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3295043744726207
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48495218878264176
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21518,
      "mean": 18953.678501945524,
      "std": 900.348290263271,
      "p95": 20135.0,
      "p99": 20295.87,
      "p50": 19081.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.31760700389105059,
      "std": 0.46560231440924568,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 2338,
      "max": 32454,
      "mean": 17218.24185311284,
      "std": 2348.020662699621,
      "p95": 19661.0,
      "p99": 20175.0,
      "p50": 18510.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 2,
      "max": 175,
      "mean": 169.17294192724953,
      "std": 23.29945724703065,
      "p95": 175.0,
      "p99": 175.0,
      "p50": 175.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14998.524861458114,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8834.301379398576,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 4949.872003835283,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 28000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200840"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 28000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-200840"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.2028732963620534], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200840",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 135760,
      "max": 135760,
      "mean": 135760.0,
      "std": null,
      "p95": 135760.0,
      "p99": 135760.0,
      "p50": 135760.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 942,
      "max": 7092,
      "mean": 5266.9175,
      "std": 1606.369820650114,
      "p95": 7092.0,
      "p99": 7092.0,
      "p50": 5882.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995662016887635,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.982654057145696,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 133, alpha = 135.93749998217058, beta = 1964.8125000918292
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6635.236599322753, baseline: 476.0204688633939, increase: 13.938973286518278
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200840",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 123759
    },
    {
      "name": "queued_predictions",
      "count": 248
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 74463
    },
    {
      "name": "pred_ones_counter",
      "count": 123759
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 135937
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1964813
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 133
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6635237
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 476020
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39818719910972769
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5253678520350035
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 23423,
      "mean": 18872.110894941634,
      "std": 969.4125226766629,
      "p95": 20151.35,
      "p99": 20328.87,
      "p50": 18931.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8358463035019456,
      "std": 0.37046003301997057,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 336,
      "max": 23585,
      "mean": 7899.187621595331,
      "std": 4471.93872142599,
      "p95": 15405.5,
      "p99": 17532.0,
      "p50": 6874.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 167,
      "mean": 38.08849104859335,
      "std": 34.91288831133592,
      "p95": 123.0,
      "p99": 133.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12371.797511945038,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7443.828648888569,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10372.375752371638,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200840",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257879
    },
    {
      "name": "queued_predictions",
      "count": 280
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 155248
    },
    {
      "name": "pred_ones_counter",
      "count": 257879
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 135937
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1964813
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 133
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6635237
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 476020
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3969181783319582
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5240287111397206
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23423,
      "mean": 18881.434824902724,
      "std": 948.9420634471802,
      "p95": 20146.35,
      "p99": 20297.87,
      "p50": 18980.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7349221789883269,
      "std": 0.44142831546942337,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 336,
      "max": 23585,
      "mean": 9140.51155155642,
      "std": 4475.576788612834,
      "p95": 14274.0,
      "p99": 16662.0,
      "p50": 9294.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 167,
      "mean": 45.917775805974567,
      "std": 41.89335270058098,
      "p95": 133.0,
      "p99": 133.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12894.556132816808,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7760.086330260632,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9666.95252521477,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200840",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 391439
    },
    {
      "name": "queued_predictions",
      "count": 240
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 235917
    },
    {
      "name": "pred_ones_counter",
      "count": 391439
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 135937
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1964813
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 133
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6635237
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 476020
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39747854748403668
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5248557246467521
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23423,
      "mean": 18846.69552529183,
      "std": 947.3460781454611,
      "p95": 20136.0,
      "p99": 20273.739999999998,
      "p50": 18910.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7580252918287938,
      "std": 0.42833114102930078,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 336,
      "max": 23585,
      "mean": 9055.834265564203,
      "std": 4389.2108286453699,
      "p95": 14219.0,
      "p99": 16289.0,
      "p50": 8920.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 167,
      "mean": 46.874031392807477,
      "std": 41.42442439416288,
      "p95": 133.0,
      "p99": 133.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13044.212107615023,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7861.6363728337159,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10064.764391082805,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-200840",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 521108
    },
    {
      "name": "queued_predictions",
      "count": 334
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 313876
    },
    {
      "name": "pred_ones_counter",
      "count": 521108
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 135937
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1964813
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 133
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6635237
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 476020
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3979829012622689
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5246167780959034
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17018,
      "max": 20694,
      "mean": 18850.431420233464,
      "std": 943.9382726527043,
      "p95": 20131.35,
      "p99": 20263.87,
      "p50": 18914.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.811284046692607,
      "std": 0.39133040307033919,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 314,
      "max": 23585,
      "mean": 8091.168287937743,
      "std": 4539.160349419705,
      "p95": 14148.0,
      "p99": 16289.0,
      "p50": 7354.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 167,
      "mean": 39.94159562285278,
      "std": 37.72788430740512,
      "p95": 133.0,
      "p99": 133.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13028.247626553508,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7845.220074342159,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10645.892628672938,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201000"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201000"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0331008953917344], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 135887,
      "max": 135887,
      "mean": 135887.0,
      "std": null,
      "p95": 135887.0,
      "p99": 135887.0,
      "p50": 135887.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 925,
      "max": 7590,
      "mean": 5334.4425,
      "std": 1682.6543229731699,
      "p95": 7590.0,
      "p99": 7590.0,
      "p50": 5781.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995909349424691,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.983644386252075,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 9
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 166, alpha = 97.5147058855662, beta = 3786.9264696029586
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8310.651077266943, baseline: 257.43728758467694, increase: 32.28223523965378
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 137499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82768
    },
    {
      "name": "pred_ones_counter",
      "count": 137499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 97515
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3786926
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 166
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8310651
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 257437
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3942242774902177
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4957490599931636
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 23363,
      "mean": 18928.837305447472,
      "std": 928.5734871461351,
      "p95": 20136.0,
      "p99": 20327.22,
      "p50": 19033.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.4657101167315175,
      "std": 0.4988834837390629,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 459,
      "max": 28299,
      "mean": 15245.46692607004,
      "std": 4511.399718792072,
      "p95": 19024.0,
      "p99": 22101.0,
      "p50": 16908.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 101.05982905982906,
      "std": 67.26881144426975,
      "p95": 166.0,
      "p99": 175.0,
      "p50": 117.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13745.790008787373,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8274.322667793262,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 6398.990554682028,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 274215
    },
    {
      "name": "queued_predictions",
      "count": 274
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 165529
    },
    {
      "name": "pred_ones_counter",
      "count": 274215
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 97515
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3786926
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 166
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8310651
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 257437
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3964144152021218
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4956475758073045
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 23363,
      "mean": 18914.35043774319,
      "std": 929.8878767870768,
      "p95": 20136.35,
      "p99": 20305.87,
      "p50": 19014.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.64931906614786,
      "std": 0.4772412444420223,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 500,
      "max": 28299,
      "mean": 12165.096911478598,
      "std": 5667.6439355432389,
      "p95": 18357.0,
      "p99": 19509.0,
      "p50": 15786.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 68.97041666666667,
      "std": 57.33851456058722,
      "p95": 166.0,
      "p99": 175.0,
      "p50": 50.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13708.670519537764,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8274.168398064234,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8926.680281188428,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 411249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 248210
    },
    {
      "name": "pred_ones_counter",
      "count": 411249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 97515
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3786926
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 166
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8310651
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 257437
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3966425191798765
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4957920870324305
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 25178,
      "mean": 18914.306663424126,
      "std": 938.9628428289531,
      "p95": 20126.35,
      "p99": 20302.0,
      "p50": 19014.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7315175097276264,
      "std": 0.4432238902256218,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 347,
      "max": 28299,
      "mean": 10851.723005836577,
      "std": 5580.305484568672,
      "p95": 17568.0,
      "p99": 19357.0,
      "p50": 9790.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 60.479171741778319,
      "std": 51.40090693005287,
      "p95": 166.0,
      "p99": 166.0,
      "p50": 46.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13704.628986715425,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8273.350236138405,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9960.498613508169,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 551249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 331606
    },
    {
      "name": "pred_ones_counter",
      "count": 551249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 97515
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3786926
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 166
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8310651
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 257437
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3970922884719646
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49543854047807797
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17010,
      "max": 25178,
      "mean": 18899.01288910506,
      "std": 944.5696032698066,
      "p95": 20119.0,
      "p99": 20290.739999999998,
      "p50": 19000.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.726896887159533,
      "std": 0.44560755381454006,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 500,
      "max": 28299,
      "mean": 10947.06420233463,
      "std": 5509.912129214491,
      "p95": 17427.0,
      "p99": 19147.0,
      "p50": 10063.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 61.148073022312377,
      "std": 52.0950881610343,
      "p95": 166.0,
      "p99": 166.0,
      "p50": 47.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13777.572909860919,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8287.953070839749,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9930.327542644845,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201000",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 696544
    },
    {
      "name": "queued_predictions",
      "count": 308
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 420084
    },
    {
      "name": "pred_ones_counter",
      "count": 696544
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 97515
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3786926
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 166
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8310651
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 257437
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3945242318311492
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4955752974686452
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 25178,
      "mean": 18907.191391050583,
      "std": 937.4057210520749,
      "p95": 20118.35,
      "p99": 20267.35,
      "p50": 19008.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6549124513618677,
      "std": 0.47545463231577309,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 500,
      "max": 28299,
      "mean": 12212.975437743191,
      "std": 5392.029312999968,
      "p95": 17346.25,
      "p99": 19031.0,
      "p50": 16000.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 175,
      "mean": 70.53122901276024,
      "std": 58.025344344500059,
      "p95": 166.0,
      "p99": 166.0,
      "p50": 52.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13929.638513899696,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8399.483870947102,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9062.903122242717,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 26000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201127"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 26000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201127"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
INFO:clipper::configuration: spark_svm_r0:6001
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0654879428717616], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201127",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 138231,
      "max": 138231,
      "mean": 138231.0,
      "std": null,
      "p95": 138231.0,
      "p99": 138231.0,
      "p50": 138231.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 873,
      "max": 7055,
      "mean": 5189.050125313283,
      "std": 1610.9414777444034,
      "p95": 7055.0,
      "p99": 7055.0,
      "p50": 5475.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995716422953139,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93291051916639,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 136, alpha = 133.3750002293168, beta = 1871.6249887080442
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6796.38941136446, baseline: 498.7531199588656, increase: 13.62676069459974
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201127",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 128515
    },
    {
      "name": "queued_predictions",
      "count": 275
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77450
    },
    {
      "name": "pred_ones_counter",
      "count": 128515
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 133375
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 1871625
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 136
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 6796389
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 498753
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39620312136035409
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47708827763296116
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22675,
      "mean": 18874.443579766536,
      "std": 937.0558689377637,
      "p95": 20123.0,
      "p99": 20252.96,
      "p50": 18954.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6741245136186771,
      "std": 0.46875803036963417,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 327,
      "max": 24535,
      "mean": 9918.862597276264,
      "std": 5025.905142713594,
      "p95": 15251.0,
      "p99": 17662.0,
      "p50": 11511.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 161,
      "mean": 47.66153846153846,
      "std": 45.508551178765198,
      "p95": 136.0,
      "p99": 136.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12847.492025486055,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7742.3397320680619,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8635.1446772146,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201127",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 266481
    },
    {
      "name": "queued_predictions",
      "count": 182
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 160840
    },
    {
      "name": "pred_ones_counter",
      "count": 266481
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 133375
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 1871625
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 136
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 6796389
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 498753
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3966961674041851
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47762129382582627
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22746,
      "mean": 18862.28137159533,
      "std": 938.2087032074919,
      "p95": 20123.0,
      "p99": 20256.0,
      "p50": 18929.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5989785992217899,
      "std": 0.4901649378420021,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 454,
      "max": 24535,
      "mean": 11193.054961089494,
      "std": 4585.564165183986,
      "p95": 14661.25,
      "p99": 16342.0,
      "p50": 14002.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 161,
      "mean": 60.110612855007477,
      "std": 52.44091738611428,
      "p95": 136.0,
      "p99": 136.0,
      "p50": 38.5
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13322.574059733264,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8040.761666917437,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 7842.200055313026,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201127",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 395870
    },
    {
      "name": "queued_predictions",
      "count": 259
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 238652
    },
    {
      "name": "pred_ones_counter",
      "count": 395869
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 133375
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 1871625
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 136
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 6796389
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 498753
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39674701927907327
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47753170872182468
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22746,
      "mean": 18853.14178015564,
      "std": 941.1261494485809,
      "p95": 20123.0,
      "p99": 20260.739999999998,
      "p50": 18919.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6719357976653697,
      "std": 0.4695654405982685,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 375,
      "max": 24535,
      "mean": 10291.908560311284,
      "std": 4739.046407315693,
      "p95": 14600.0,
      "p99": 16212.0,
      "p50": 13779.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 161,
      "mean": 52.3819139596137,
      "std": 47.98403381941736,
      "p95": 136.0,
      "p99": 136.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13193.766709275256,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7952.936605145922,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 8738.801299532124,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201245"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201245"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.3369837273917957], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 139633,
      "max": 139633,
      "mean": 139633.0,
      "std": null,
      "p95": 139633.0,
      "p99": 139633.0,
      "p50": 139633.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 939,
      "max": 6980,
      "mean": 5161.528822055137,
      "std": 1531.046559180438,
      "p95": 6980.0,
      "p99": 6980.0,
      "p50": 5511.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995833724465482,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.933395481563858,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 155, alpha = 109.23076924340613, beta = 3026.1538450699313
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7766.728337618229, baseline: 318.94013749857106, increase: 24.3516805333196
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 128022
    },
    {
      "name": "queued_predictions",
      "count": 256
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77564
    },
    {
      "name": "pred_ones_counter",
      "count": 128022
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 109231
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3026154
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 155
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 7766728
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 318940
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39522755265906858
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48139787381954809
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21695,
      "mean": 18938.34022373541,
      "std": 913.3114720928624,
      "p95": 20138.0,
      "p99": 20317.61,
      "p50": 19028.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8966439688715954,
      "std": 0.3044603501029616,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 284,
      "max": 27079,
      "mean": 7149.5893725680939,
      "std": 4267.055915083984,
      "p95": 15552.0,
      "p99": 20516.0,
      "p50": 6150.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 158,
      "mean": 39.4979633401222,
      "std": 31.83078182116475,
      "p95": 96.0,
      "p99": 155.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12808.27061355419,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7754.896719338997,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11449.46213723627,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 257412
    },
    {
      "name": "queued_predictions",
      "count": 238
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 155694
    },
    {
      "name": "pred_ones_counter",
      "count": 257412
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 109231
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3026154
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 155
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 7766728
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 318940
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3954705996506889
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47974064923158207
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 21416,
      "mean": 18929.002188715953,
      "std": 915.3974883399211,
      "p95": 20145.0,
      "p99": 20375.44,
      "p50": 19025.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9285019455252919,
      "std": 0.2576863036397936,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 284,
      "max": 27079,
      "mean": 6612.778453307393,
      "std": 3709.780311051044,
      "p95": 15223.0,
      "p99": 17609.0,
      "p50": 6092.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 158,
      "mean": 36.798392814937368,
      "std": 29.66518057107846,
      "p95": 85.39999999999964,
      "p99": 155.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12868.114571986584,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7782.470711264758,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 12060.10588406893,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 385999
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 233345
    },
    {
      "name": "pred_ones_counter",
      "count": 385999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 109231
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3026154
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 155
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 7766728
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 318940
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3956178527323048
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4801540936634551
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 21416,
      "mean": 18921.52164396887,
      "std": 920.0015261366793,
      "p95": 20144.35,
      "p99": 20346.0,
      "p50": 19015.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9484435797665369,
      "std": 0.2211566193499242,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 380,
      "max": 27079,
      "mean": 6486.041828793775,
      "std": 3494.4332011433455,
      "p95": 13385.0,
      "p99": 16638.0,
      "p50": 6065.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 158,
      "mean": 36.64337311557789,
      "std": 29.004153936195,
      "p95": 86.0,
      "p99": 140.3099999999995,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12862.980675587489,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7775.958035386016,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 12259.428466014479,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 528749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 319685
    },
    {
      "name": "pred_ones_counter",
      "count": 528749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 109231
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 3026154
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 155
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 7766728
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 318940
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3937568880092401
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4798136734064745
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 24924,
      "mean": 18929.158317120622,
      "std": 944.806798573078,
      "p95": 20148.0,
      "p99": 20393.35,
      "p50": 19039.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8105544747081712,
      "std": 0.39190977365698756,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 380,
      "max": 27079,
      "mean": 8810.966439688716,
      "std": 5041.415574939103,
      "p95": 16438.0,
      "p99": 16875.0,
      "p50": 7306.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 158,
      "mean": 45.32610236778676,
      "std": 41.42579073369423,
      "p95": 155.0,
      "p99": 155.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13214.94585585887,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7989.840105475836,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10760.881459264507,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "cache_hit_rate_40_hitrate_160905-201407"
cache_hit_rate = 0.4
salt_cache = false
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
INFO:clipper::configuration: spark_svm_r0:6001
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 25000
name = "cache_hit_rate_40_hitrate_160905-201407"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.106756659267392], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 133272,
      "max": 133272,
      "mean": 133272.0,
      "std": null,
      "p95": 133272.0,
      "p99": 133272.0,
      "p50": 133272.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 898,
      "max": 6252,
      "mean": 4863.523929471033,
      "std": 1316.587842886695,
      "p95": 6252.0,
      "p99": 6252.0,
      "p50": 5389.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.85,
      "std": 11.595257651298655,
      "p95": 36.95,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995501051752792,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.832141156888225,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 134, alpha = 136.23999996027655, beta = 1760.0000006746493
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6694.590772211974, baseline: 527.3594058057872, increase: 12.694550810149801
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 129499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 78252
    },
    {
      "name": "pred_ones_counter",
      "count": 129499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39595680891567566
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5101120471972757
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22774,
      "mean": 18926.997081712063,
      "std": 923.1912026151376,
      "p95": 20142.35,
      "p99": 20411.92,
      "p50": 19020.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9010214007782101,
      "std": 0.29866959936231615,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 497,
      "max": 24900,
      "mean": 7006.504012645914,
      "std": 3624.881483901162,
      "p95": 13730.0,
      "p99": 17115.0,
      "p50": 6525.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 41.20695102685624,
      "std": 30.95739337469411,
      "p95": 100.0,
      "p99": 134.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12945.822066049195,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7829.6305345294099,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11742.441241713575,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 260520
    },
    {
      "name": "queued_predictions",
      "count": 229
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 157065
    },
    {
      "name": "pred_ones_counter",
      "count": 260520
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3975240557010765
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5120067557193305
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22774,
      "mean": 18937.7796692607,
      "std": 926.7390584763106,
      "p95": 20136.35,
      "p99": 20351.0,
      "p50": 19060.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9443093385214008,
      "std": 0.2293512677506476,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 397,
      "max": 24900,
      "mean": 6547.919990272374,
      "std": 3251.2245177864626,
      "p95": 12418.0,
      "p99": 14960.5,
      "p50": 6224.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 38.289858605558269,
      "std": 29.00207409662908,
      "p95": 90.0,
      "p99": 126.9099999999994,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13025.665336899285,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7851.088987756121,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 12366.059788111479,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 391749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 236122
    },
    {
      "name": "pred_ones_counter",
      "count": 391749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3976464225674045
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5124327056354961
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 22774,
      "mean": 18928.982247081713,
      "std": 926.2400088805783,
      "p95": 20132.35,
      "p99": 20315.35,
      "p50": 19047.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9608463035019456,
      "std": 0.1939841121670339,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 400,
      "max": 24900,
      "mean": 6402.621230544747,
      "std": 3076.5868762546785,
      "p95": 11604.0,
      "p99": 14189.0,
      "p50": 6208.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 37.26226921256115,
      "std": 28.41201227258709,
      "p95": 88.0,
      "p99": 113.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13056.26713352224,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7868.8235053989,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 12579.422548382323,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 529249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 319246
    },
    {
      "name": "pred_ones_counter",
      "count": 529249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39685627357181038
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5126641713068896
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17031,
      "max": 21863,
      "mean": 18919.862354085602,
      "std": 920.9393679333578,
      "p95": 20117.35,
      "p99": 20297.87,
      "p50": 19027.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8618677042801557,
      "std": 0.3450807498528838,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 400,
      "max": 24900,
      "mean": 7468.862110894942,
      "std": 3854.2015096335619,
      "p95": 13766.0,
      "p99": 14208.0,
      "p50": 6882.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 41.79706729510343,
      "std": 34.794421322673297,
      "p95": 134.0,
      "p99": 134.0,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13227.555014861126,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7978.936044720992,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11564.685915570475,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 676874
    },
    {
      "name": "queued_predictions",
      "count": 305
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 407742
    },
    {
      "name": "pred_ones_counter",
      "count": 676871
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.395992173367298
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5124019200113463
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21863,
      "mean": 18916.8326848249,
      "std": 923.2152802209578,
      "p95": 20115.0,
      "p99": 20306.0,
      "p50": 19019.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7633754863813229,
      "std": 0.4250615157875478,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 400,
      "max": 24900,
      "mean": 8768.619649805447,
      "std": 4201.571221629189,
      "p95": 13767.0,
      "p99": 14158.5,
      "p50": 8340.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 49.115150778210118,
      "std": 41.60458800351452,
      "p95": 134.0,
      "p99": 134.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13536.154141393477,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8152.535604286092,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10466.725811604856,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 811499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 490613
    },
    {
      "name": "pred_ones_counter",
      "count": 811499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3955434500073299
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.512020347529695
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21863,
      "mean": 18921.921692607004,
      "std": 920.8167736953974,
      "p95": 20119.35,
      "p99": 20325.35,
      "p50": 19019.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7407587548638133,
      "std": 0.4382715305482967,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 349,
      "max": 29994,
      "mean": 9015.89627918288,
      "std": 4258.581740387644,
      "p95": 13783.75,
      "p99": 14221.0,
      "p50": 8672.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 50.451969844357979,
      "std": 42.73043633616906,
      "p95": 134.0,
      "p99": 134.0,
      "p50": 38.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13521.224432940977,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8174.610655327641,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10195.592818262128,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201407",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 941249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 568372
    },
    {
      "name": "pred_ones_counter",
      "count": 941249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 136240
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1760000
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 134
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6694591
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 527359
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39621709635379329
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5119059887447424
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17022,
      "max": 21863,
      "mean": 18912.132295719843,
      "std": 923.4675359542167,
      "p95": 20118.0,
      "p99": 20312.739999999998,
      "p50": 19013.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7750486381322957,
      "std": 0.4176010738022512,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 349,
      "max": 29994,
      "mean": 8626.708171206226,
      "std": 4218.48054198831,
      "p95": 13768.0,
      "p99": 14223.25,
      "p50": 8160.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 134,
      "mean": 47.622081712062257,
      "std": 40.70367228055497,
      "p95": 134.0,
      "p99": 134.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13442.627497548227,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8118.584307392261,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10567.241394532204,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_40_hitrate_160905-201407_results.json
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 24000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201609"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 24000
name = "DEBUG_cache_hit_rate_40_hitrate_160905-201609"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0201376036682315], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 135958,
      "max": 135958,
      "mean": 135958.0,
      "std": null,
      "p95": 135958.0,
      "p99": 135958.0,
      "p50": 135958.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 918,
      "max": 7316,
      "mean": 5185.765,
      "std": 1581.3806124328324,
      "p95": 7316.0,
      "p99": 7316.0,
      "p50": 5635.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995735140910205,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.982942560230588,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 142, alpha = 118.6666667821629, beta = 3092.33332756507
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7120.2928307825105, baseline: 311.4294617752844, increase: 22.863260239393284
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 128249
    },
    {
      "name": "queued_predictions",
      "count": 276
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77531
    },
    {
      "name": "pred_ones_counter",
      "count": 128249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39586850807235948
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4973917925285967
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17020,
      "max": 22521,
      "mean": 18918.06225680934,
      "std": 914.2326473664341,
      "p95": 20147.0,
      "p99": 20293.0,
      "p50": 19013.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6989299610894941,
      "std": 0.45877887579840045,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 341,
      "max": 26702,
      "mean": 9570.02480544747,
      "std": 5040.11564035178,
      "p95": 14824.0,
      "p99": 18822.0,
      "p50": 9104.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 48.43106674984404,
      "std": 44.46911939562816,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12828.882819787164,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7760.64330719862,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9114.394333941287,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 264999
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 160056
    },
    {
      "name": "pred_ones_counter",
      "count": 264999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39648782841782628
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4960245133000502
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22521,
      "mean": 18925.55569066148,
      "std": 915.6764629940286,
      "p95": 20139.35,
      "p99": 20281.87,
      "p50": 19027.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.6811770428015564,
      "std": 0.4660769323957313,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 341,
      "max": 26702,
      "mean": 10163.893725680933,
      "std": 4843.68830450861,
      "p95": 14939.0,
      "p99": 15874.0,
      "p50": 11588.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 55.11570247933884,
      "std": 47.80537793108961,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 40.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13246.160918639353,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8000.390282446927,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9157.811490259077,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 395499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 238674
    },
    {
      "name": "pred_ones_counter",
      "count": 395499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39668830496097276
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49597091269510165
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22521,
      "mean": 18917.99319066148,
      "std": 918.1572493685757,
      "p95": 20136.35,
      "p99": 20281.87,
      "p50": 19006.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7543774319066148,
      "std": 0.43050806544300776,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 341,
      "max": 26702,
      "mean": 9393.813229571984,
      "std": 4702.042643694411,
      "p95": 14922.0,
      "p99": 15865.0,
      "p50": 8827.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 50.26832350463353,
      "std": 44.06149865536911,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 37.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13179.532411001443,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7953.5260868917589,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10027.18893466749,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 520156
    },
    {
      "name": "queued_predictions",
      "count": 257
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 313909
    },
    {
      "name": "pred_ones_counter",
      "count": 520156
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3967079992236935
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4960204246418382
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22521,
      "mean": 18922.92607003891,
      "std": 918.2558922278233,
      "p95": 20142.0,
      "p99": 20281.87,
      "p50": 19006.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7969357976653697,
      "std": 0.40232884183418957,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 448,
      "max": 26702,
      "mean": 8756.6827577821,
      "std": 4565.721837617102,
      "p95": 14896.75,
      "p99": 15989.0,
      "p50": 7901.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 45.48746558469787,
      "std": 40.68704911951787,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 34.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13001.178982971478,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7845.615117954403,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10496.615282496903,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 647499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 390302
    },
    {
      "name": "pred_ones_counter",
      "count": 647499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3973437241894623
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4962231601902088
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17019,
      "max": 22521,
      "mean": 18916.87864785992,
      "std": 922.3691020991782,
      "p95": 20142.35,
      "p99": 20283.87,
      "p50": 19001.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8351167315175098,
      "std": 0.37112029178252828,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 412,
      "max": 26702,
      "mean": 8107.717898832685,
      "std": 4419.040560579406,
      "p95": 14857.75,
      "p99": 15865.0,
      "p50": 7270.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 41.92181420233463,
      "std": 37.93787481445809,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12947.424622114602,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7803.848679290855,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10911.260811531913,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 775999
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 467435
    },
    {
      "name": "pred_ones_counter",
      "count": 775999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3977525252850567
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49621326831606746
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 22521,
      "mean": 18904.71376459144,
      "std": 924.9433785323605,
      "p95": 20124.0,
      "p99": 20278.48,
      "p50": 18995.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8596789883268483,
      "std": 0.34736201408771497,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 412,
      "max": 26702,
      "mean": 7773.396157587548,
      "std": 4296.700807698758,
      "p95": 14819.0,
      "p99": 15512.0,
      "p50": 6978.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 39.9897859922179,
      "std": 36.247596576505419,
      "p95": 142.0,
      "p99": 142.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12929.631506193542,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7788.363390155026,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11185.445211998142,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_40_hitrate_160905-201609",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 896499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 539988
    },
    {
      "name": "pred_ones_counter",
      "count": 896499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 118667
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 3092333
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 142
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7120293
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 311429
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39775344048334596
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49654489296697487
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 22134,
      "mean": 18893.813472762646,
      "std": 924.779980135731,
      "p95": 20123.0,
      "p99": 20277.829999999998,
      "p50": 18974.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8745136186770428,
      "std": 0.33130989051163198,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 380,
      "max": 26702,
      "mean": 7506.257538910506,
      "std": 4249.01526765969,
      "p95": 14799.0,
      "p99": 15521.25,
      "p50": 6687.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 142,
      "mean": 38.112597276264597,
      "std": 34.687864315843729,
      "p95": 119.0,
      "p99": 142.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 12803.444288881272,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7711.894912528387,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11264.924916572183,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/DEBUG_cache_hit_rate_40_hitrate_160905-201609_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 24000
name = "cache_hit_rate_40_hitrate_160905-201812"
cache_hit_rate = 0.4
salt_cache = false
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
/tmp/digits_bench.toml contains:
num_message_encodes = 1
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 24000
name = "cache_hit_rate_40_hitrate_160905-201812"
cache_hit_rate = 0.4
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [0.9563178494148898], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137235,
      "max": 137235,
      "mean": 137235.0,
      "std": null,
      "p95": 137235.0,
      "p99": 137235.0,
      "p50": 137235.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 925,
      "max": 6805,
      "mean": 5122.50626566416,
      "std": 1488.3732238937483,
      "p95": 6805.0,
      "p99": 6805.0,
      "p50": 5683.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995714426379331,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.93290554020872,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 10
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 161, alpha = 106.8541663591239, beta = 2797.6875119416904
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 8049.51369033664, baseline: 344.28839753644365, increase: 23.380148003635767
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 133499
    },
    {
      "name": "queued_predictions",
      "count": 254
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 81077
    },
    {
      "name": "pred_ones_counter",
      "count": 133499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3938079893535098
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5038314893744522
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 22042,
      "mean": 18947.7076848249,
      "std": 915.8823026315643,
      "p95": 20132.0,
      "p99": 20321.48,
      "p50": 19061.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7648346303501945,
      "std": 0.4241537104829239,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 445,
      "max": 29708,
      "mean": 9386.83730544747,
      "std": 5116.8629142017539,
      "p95": 16300.0,
      "p99": 19277.0,
      "p50": 7828.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 165,
      "mean": 54.34383378016086,
      "std": 44.08534352742141,
      "p95": 161.0,
      "p99": 161.0,
      "p50": 44.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13355.236679901578,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8105.388747463972,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10223.534314530832,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 271188
    },
    {
      "name": "queued_predictions",
      "count": 273
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 163945
    },
    {
      "name": "pred_ones_counter",
      "count": 271188
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3956369423232067
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5049707214183519
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 24806,
      "mean": 18935.81736381323,
      "std": 921.1527007968928,
      "p95": 20129.35,
      "p99": 20307.0,
      "p50": 19043.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.7565661478599222,
      "std": 0.42920695709467218,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 457,
      "max": 29708,
      "mean": 9804.159168287937,
      "std": 5192.678851161628,
      "p95": 16466.0,
      "p99": 17334.0,
      "p50": 8712.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 165,
      "mean": 53.78451951459495,
      "std": 46.68197195580708,
      "p95": 161.0,
      "p99": 161.0,
      "p50": 42.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13556.179033077105,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8197.109315434978,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 10371.571287570881,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 402408
    },
    {
      "name": "queued_predictions",
      "count": 206
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 242958
    },
    {
      "name": "pred_ones_counter",
      "count": 402408
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3964467206803539
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5047141209916304
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 24806,
      "mean": 18927.91950389105,
      "std": 925.2551945183362,
      "p95": 20137.35,
      "p99": 20297.96,
      "p50": 19032.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.835603112840467,
      "std": 0.3706804095352052,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 369,
      "max": 29708,
      "mean": 8398.307879377431,
      "std": 4989.511381186561,
      "p95": 16395.0,
      "p99": 16802.0,
      "p50": 7083.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 165,
      "mean": 44.41645338208409,
      "std": 40.253201445169647,
      "p95": 161.0,
      "p99": 161.0,
      "p50": 35.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13410.395093144563,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8097.436228969872,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11269.992477445508,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 530999
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 320355
    },
    {
      "name": "pred_ones_counter",
      "count": 530999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39697768842859
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5044472776784891
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17029,
      "max": 24806,
      "mean": 18912.967655642024,
      "std": 928.9340970840823,
      "p95": 20125.35,
      "p99": 20291.0,
      "p50": 19016.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.8745136186770428,
      "std": 0.33130989051163198,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 359,
      "max": 29708,
      "mean": 7178.227626459144,
      "std": 4969.586172827686,
      "p95": 16350.0,
      "p99": 16619.25,
      "p50": 5645.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 165,
      "mean": 35.86648832684825,
      "std": 35.15282284443192,
      "p95": 102.0,
      "p99": 161.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13272.604243348438,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8007.095224157453,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11658.21996229922,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 659499
    },
    {
      "name": "queued_predictions",
      "count": 276
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397875
    },
    {
      "name": "pred_ones_counter",
      "count": 659499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.3969292561858209
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5043980354784465
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17026,
      "max": 24806,
      "mean": 18925.973249027236,
      "std": 931.0778283351328,
      "p95": 20129.35,
      "p99": 20269.61,
      "p50": 19029.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9002918287937743,
      "std": 0.2996469380353263,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 29708,
      "mean": 6452.565053501946,
      "std": 4809.207180565815,
      "p95": 16326.5,
      "p99": 16641.5,
      "p50": 4736.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 163,
      "mean": 31.948321984435798,
      "std": 32.03736386707575,
      "p95": 89.0,
      "p99": 161.0,
      "p50": 22.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13188.151445823236,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7955.870557158669,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11862.724956064481,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 788968
    },
    {
      "name": "queued_predictions",
      "count": 237
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 475877
    },
    {
      "name": "pred_ones_counter",
      "count": 788968
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39689484594604187
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5047036128207988
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17029,
      "max": 24806,
      "mean": 18925.397373540854,
      "std": 925.8888797439869,
      "p95": 20135.35,
      "p99": 20276.48,
      "p50": 19025.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.914396887159533,
      "std": 0.27981111547877537,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 351,
      "max": 29708,
      "mean": 6101.620500972763,
      "std": 4691.269437140411,
      "p95": 16285.0,
      "p99": 16649.0,
      "p50": 4502.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 161,
      "mean": 30.554231517509728,
      "std": 30.425175936192728,
      "p95": 83.0,
      "p99": 161.0,
      "p50": 22.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13146.226799025511,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7929.834049920235,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 11991.817476318485,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_40_hitrate_160905-201812",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 911705
    },
    {
      "name": "queued_predictions",
      "count": 242
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 549794
    },
    {
      "name": "pred_ones_counter",
      "count": 911705
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 106854
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 2797688
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 161
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 8049514
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 344288
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.39702284677255758
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5043462523513637
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17029,
      "max": 23616,
      "mean": 18915.264105058366,
      "std": 925.4781345178637,
      "p95": 20136.0,
      "p99": 20266.61,
      "p50": 19012.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9236381322957199,
      "std": 0.2656085266946572,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 359,
      "max": 29708,
      "mean": 6096.331225680934,
      "std": 4486.900282670695,
      "p95": 16224.0,
      "p99": 16648.0,
      "p50": 4689.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 161,
      "mean": 30.616853112840468,
      "std": 29.799422109969215,
      "p95": 83.0,
      "p99": 161.0,
      "p50": 22.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 13021.190967203844,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7852.6114124939099,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 12011.628954327689,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_40_hitrate_160905-201812_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "DEBUG_cache_hit_rate_50_hitrate_160905-202504"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
/tmp/digits_bench.toml contains:
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "DEBUG_cache_hit_rate_50_hitrate_160905-202504"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: spark_svm_r0:6001
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [0.9949133255634057], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 141127,
      "max": 141127,
      "mean": 141127.0,
      "std": null,
      "p95": 141127.0,
      "p99": 141127.0,
      "p50": 141127.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 948,
      "max": 6966,
      "mean": 5226.8421052631579,
      "std": 1571.6700900607382,
      "p95": 6966.0,
      "p99": 6966.0,
      "p50": 5838.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049958988666203917,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.933639465408768,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 9
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 150, alpha = 117.24999995053997, beta = 2437.7500010432004
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7490.5431916085045, baseline: 391.3894323330961, increase: 19.138337862003386
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 145499
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 73367
    },
    {
      "name": "pred_ones_counter",
      "count": 145499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.496442514185346
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4659757111732727
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 22171,
      "mean": 18957.910749027236,
      "std": 937.3202052512229,
      "p95": 20176.35,
      "p99": 20428.61,
      "p50": 19076.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9226653696498055,
      "std": 0.2671541542681057,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 416,
      "max": 25995,
      "mean": 6390.372689688716,
      "std": 3615.9241155445868,
      "p95": 14586.0,
      "p99": 17762.0,
      "p50": 5837.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 33.16772151898734,
      "std": 26.951459586081734,
      "p95": 79.0,
      "p99": 148.95999999999914,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14545.212078147213,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7334.333210672916,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13548.240324542294,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 294356
    },
    {
      "name": "queued_predictions",
      "count": 284
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 147799
    },
    {
      "name": "pred_ones_counter",
      "count": 294356
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.4981994915812231
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4652257810270557
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22171,
      "mean": 18973.7203307393,
      "std": 921.6562226483235,
      "p95": 20169.0,
      "p99": 20386.61,
      "p50": 19103.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9584143968871596,
      "std": 0.1996645580714795,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 330,
      "max": 25995,
      "mean": 6187.579158560311,
      "std": 3259.140547694687,
      "p95": 11926.0,
      "p99": 15957.0,
      "p50": 5877.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 33.16558223019969,
      "std": 25.80187859496246,
      "p95": 77.0,
      "p99": 116.42000000000007,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14719.654256203212,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7388.893670891391,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14131.375547657479,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 443008
    },
    {
      "name": "queued_predictions",
      "count": 357
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 222496
    },
    {
      "name": "pred_ones_counter",
      "count": 443008
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.4980399763624307
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.464919369401907
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 22171,
      "mean": 18970.3453307393,
      "std": 923.128386208587,
      "p95": 20168.0,
      "p99": 20387.0,
      "p50": 19095.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9676556420233463,
      "std": 0.1769344900387925,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 330,
      "max": 25995,
      "mean": 5967.911843385214,
      "std": 3028.7907026811487,
      "p95": 10867.0,
      "p99": 15246.0,
      "p50": 5731.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 32.56923302107728,
      "std": 25.103443587025063,
      "p95": 75.0,
      "p99": 108.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14767.605647648681,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7415.010450055174,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14332.738679980268,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 588820
    },
    {
      "name": "queued_predictions",
      "count": 334
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 295706
    },
    {
      "name": "pred_ones_counter",
      "count": 588820
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.4979971280853563
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4650436466152644
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17036,
      "max": 22171,
      "mean": 18966.662694552528,
      "std": 926.6482525660906,
      "p95": 20174.0,
      "p99": 20415.879999999997,
      "p50": 19086.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9720330739299611,
      "std": 0.16489811948079378,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 403,
      "max": 25995,
      "mean": 5878.0143482490279,
      "std": 2955.9277440355347,
      "p95": 10780.0,
      "p99": 15228.0,
      "p50": 5668.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 31.823929961089495,
      "std": 24.580317909411819,
      "p95": 74.0,
      "p99": 101.75,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14719.748936507138,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7391.315203386383,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14354.023435044362,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 748749
    },
    {
      "name": "queued_predictions",
      "count": 440
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 375708
    },
    {
      "name": "pred_ones_counter",
      "count": 748749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49837756596185447
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4650663974175592
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17036,
      "max": 22171,
      "mean": 18978.602626459146,
      "std": 915.6142029761841,
      "p95": 20171.0,
      "p99": 20437.87,
      "p50": 19095.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9737354085603113,
      "std": 0.15994056312441336,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 403,
      "max": 25995,
      "mean": 6058.213399805448,
      "std": 3012.3591067661006,
      "p95": 11651.25,
      "p99": 15132.0,
      "p50": 5822.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 32.89214494163424,
      "std": 25.425402501643469,
      "p95": 77.0,
      "p99": 109.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14972.895101619977,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7511.96996027778,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14607.96158699515,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202504",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 912883
    },
    {
      "name": "queued_predictions",
      "count": 325
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 457896
    },
    {
      "name": "pred_ones_counter",
      "count": 912883
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 117250
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 2437750
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 7490543
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 391389
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49847570323518849
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.46524362924931236
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17017,
      "max": 22171,
      "mean": 18973.7203307393,
      "std": 914.085086153834,
      "p95": 20170.0,
      "p99": 20441.48,
      "p50": 19088.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9676556420233463,
      "std": 0.1769344900387925,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 373,
      "max": 25995,
      "mean": 6290.879134241245,
      "std": 3089.4291210571866,
      "p95": 12440.5,
      "p99": 15095.0,
      "p50": 6021.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 34.88022859922179,
      "std": 27.01364846880272,
      "p95": 81.0,
      "p99": 124.0,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 15211.726055469524,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7629.397647212504,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14800.12782048276,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/DEBUG_cache_hit_rate_50_hitrate_160905-202504_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_50_hitrate_160905-202709"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_50_hitrate_160905-202709"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.1225216045329354], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202709",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 397
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 136052,
      "max": 136052,
      "mean": 136052.0,
      "std": null,
      "p95": 136052.0,
      "p99": 136052.0,
      "p50": 136052.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 950,
      "max": 6628,
      "mean": 5081.463476070529,
      "std": 1443.8450163061553,
      "p95": 6628.0,
      "p99": 6628.0,
      "p50": 5762.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.85,
      "std": 11.595257651298655,
      "p95": 36.95,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995552459645178,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.832345246261779,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 8
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 182, alpha = 87.55555553120581, beta = 4052.6666676169916
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 9105.564513231948, baseline: 241.5329289352992, increase: 37.69906055199251
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202709",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 163249
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 82827
    },
    {
      "name": "pred_ones_counter",
      "count": 163249
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 87556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4052667
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9105565
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 241533
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.4887675153976477
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5047687887827796
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23164,
      "mean": 18932.6344844358,
      "std": 928.1563405827076,
      "p95": 20150.0,
      "p99": 20380.829999999998,
      "p50": 19033.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5651750972762646,
      "std": 0.49579429794468146,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 629,
      "max": 31308,
      "mean": 15866.10676070039,
      "std": 5576.41445168537,
      "p95": 19727.0,
      "p99": 23638.0,
      "p50": 18762.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 182,
      "mean": 104.18490566037736,
      "std": 68.8780894598731,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 85.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 16320.11494229892,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8280.26891304713,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9270.240653199395,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_50_hitrate_160905-202709",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 335447
    },
    {
      "name": "queued_predictions",
      "count": 302
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 170225
    },
    {
      "name": "pred_ones_counter",
      "count": 335447
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 87556
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 4052667
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 182
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 9105565
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 241533
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.48516302356820126
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5043360053898232
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17015,
      "max": 20906,
      "mean": 18942.45379377432,
      "std": 920.5925903446234,
      "p95": 20146.0,
      "p99": 20345.0,
      "p50": 19052.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.5578793774319066,
      "std": 0.4966990791516938,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 791,
      "max": 31308,
      "mean": 16147.214858949417,
      "std": 5164.480274605675,
      "p95": 19663.0,
      "p99": 20774.0,
      "p50": 18755.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 182,
      "mean": 111.76953381483914,
      "std": 70.0946989733055,
      "p95": 182.0,
      "p99": 182.0,
      "p50": 119.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 16769.376854646875,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 8509.055939925891,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 9472.746856903874,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "cache_hit_rate_50_hitrate_160905-202833"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 26000
name = "cache_hit_rate_50_hitrate_160905-202833"
cache_hit_rate = 0.5
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0913707574810514], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 398
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137925,
      "max": 137925,
      "mean": 137925.0,
      "std": null,
      "p95": 137925.0,
      "p99": 137925.0,
      "p50": 137925.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 941,
      "max": 6873,
      "mean": 5192.087939698493,
      "std": 1528.8832212062237,
      "p95": 6873.0,
      "p99": 6873.0,
      "p50": 5890.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.9,
      "std": 11.670475568716127,
      "p95": 37.0,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049961374861094889,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.88463315549743,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 9
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 149, alpha = 116.89999990153538, beta = 2547.700002460369
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7462.761326424522, baseline: 375.2908500764088, increase: 19.88527384801711
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 142661
    },
    {
      "name": "queued_predictions",
      "count": 267
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 71843
    },
    {
      "name": "pred_ones_counter",
      "count": 142661
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.496966940703166
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4942415937081613
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 21272,
      "mean": 18945.96206225681,
      "std": 939.4086916121003,
      "p95": 20159.0,
      "p99": 20397.96,
      "p50": 19068.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9236381322957199,
      "std": 0.2656085266946572,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 407,
      "max": 26509,
      "mean": 6509.431663424125,
      "std": 4110.48706235306,
      "p95": 15109.0,
      "p99": 19750.0,
      "p50": 5486.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 31.358795285901356,
      "std": 27.68843396918532,
      "p95": 77.0,
      "p99": 149.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14263.719263198449,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7181.739709793459,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 13142.59234884396,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 295223
    },
    {
      "name": "queued_predictions",
      "count": 276
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 148593
    },
    {
      "name": "pred_ones_counter",
      "count": 295223
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49682401632492836
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4943212419086589
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 25412,
      "mean": 18953.171935797665,
      "std": 947.6827208471192,
      "p95": 20150.35,
      "p99": 20385.22,
      "p50": 19077.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9589007782101168,
      "std": 0.19854385473212272,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 407,
      "max": 26509,
      "mean": 6133.267874513619,
      "std": 3460.9459490258798,
      "p95": 13598.0,
      "p99": 16169.0,
      "p50": 5631.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 32.18388564002599,
      "std": 26.480973521417906,
      "p95": 77.09999999999946,
      "p99": 130.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14757.848502836816,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7430.432819525231,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14145.710864113693,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 452749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 227404
    },
    {
      "name": "pred_ones_counter",
      "count": 452749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.498003306850567
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49455216908264845
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 24811,
      "mean": 18967.23151750973,
      "std": 925.9051273952618,
      "p95": 20160.35,
      "p99": 20385.22,
      "p50": 19089.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9715466926070039,
      "std": 0.16628421759278354,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 407,
      "max": 26509,
      "mean": 6135.645914396887,
      "std": 3280.8124920016327,
      "p95": 12913.0,
      "p99": 15417.0,
      "p50": 5773.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 33.54536067266559,
      "std": 26.798579876299799,
      "p95": 80.0,
      "p99": 122.19999999999982,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 15087.120775509378,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7577.899864220616,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14635.473685298668,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 602749
    },
    {
      "name": "queued_predictions",
      "count": 250
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 302861
    },
    {
      "name": "pred_ones_counter",
      "count": 602749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49770397629183468
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49509663226318087
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 24811,
      "mean": 18964.01848249027,
      "std": 930.606363085469,
      "p95": 20170.0,
      "p99": 20366.87,
      "p50": 19091.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9759241245136187,
      "std": 0.15330343492255339,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 407,
      "max": 26509,
      "mean": 5895.628161478599,
      "std": 3080.5678464706727,
      "p95": 12331.0,
      "p99": 15240.0,
      "p50": 5622.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 32.44613326848249,
      "std": 26.077332251049588,
      "p95": 77.0,
      "p99": 119.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 15064.14549976807,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7569.798591983072,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14686.249900197685,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 747999
    },
    {
      "name": "queued_predictions",
      "count": 272
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 375716
    },
    {
      "name": "pred_ones_counter",
      "count": 747999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49787642362475378
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.49557285504392387
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17014,
      "max": 24811,
      "mean": 18965.161964980543,
      "std": 934.3569061415058,
      "p95": 20183.35,
      "p99": 20398.739999999998,
      "p50": 19092.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9771400778210116,
      "std": 0.14947501360539287,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 407,
      "max": 26509,
      "mean": 5711.197227626459,
      "std": 2910.8402079214476,
      "p95": 10840.25,
      "p99": 15153.0,
      "p50": 5536.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 31.58706225680934,
      "std": 25.56244048490319,
      "p95": 75.0,
      "p99": 116.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14957.547092476681,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7512.123110990108,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14647.97811645199,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_50_hitrate_160905-202833",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 893136
    },
    {
      "name": "queued_predictions",
      "count": 274
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 448531
    },
    {
      "name": "pred_ones_counter",
      "count": 893136
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 116900
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 2547700
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 149
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7462761
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 375291
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.49788562448511766
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4954318267318751
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 24811,
      "mean": 18965.761916342413,
      "std": 926.909688110935,
      "p95": 20171.35,
      "p99": 20371.87,
      "p50": 19092.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9795719844357976,
      "std": 0.1414764268218847,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 318,
      "max": 26509,
      "mean": 5665.900656614786,
      "std": 2854.832252524965,
      "p95": 10401.0,
      "p99": 15086.75,
      "p50": 5531.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 149,
      "mean": 31.061648832684825,
      "std": 25.07727021061754,
      "p95": 74.0,
      "p99": 109.75,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 14882.52352831759,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7473.235212510207,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 14602.773032319199,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_50_hitrate_160905-202833_results.json
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203117"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 28000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203117"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.2:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0050801917497378], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 132540,
      "max": 132540,
      "mean": 132540.0,
      "std": null,
      "p95": 132540.0,
      "p99": 132540.0,
      "p50": 132540.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 933,
      "max": 6888,
      "mean": 5029.902255639097,
      "std": 1488.8614694949498,
      "p95": 6888.0,
      "p99": 6888.0,
      "p50": 5470.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049957229118290379,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.932946367735086,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 8
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 115, alpha = 166.91666692805643, beta = 846.0833235920619
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 5738.09345026122, baseline: 987.1668404326009, increase: 5.81268861071817
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 181749
    },
    {
      "name": "queued_predictions",
      "count": 445
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 72949
    },
    {
      "name": "pred_ones_counter",
      "count": 181749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 166917
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 846083
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 115
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 5738093
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 987167
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5991909722603379
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5483881616955252
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24941,
      "mean": 19212.34873540856,
      "std": 861.0139522717796,
      "p95": 20277.0,
      "p99": 20691.48,
      "p50": 19344.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.943579766536965,
      "std": 0.23075948649469864,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 398,
      "max": 20566,
      "mean": 6027.815418287938,
      "std": 3219.241115439192,
      "p95": 12130.0,
      "p99": 14092.0,
      "p50": 5504.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 31.57965367965368,
      "std": 25.40622618624863,
      "p95": 74.0,
      "p99": 115.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18168.98236244455,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7292.521908605604,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17170.463281051372,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 373761
    },
    {
      "name": "queued_predictions",
      "count": 488
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 149865
    },
    {
      "name": "pred_ones_counter",
      "count": 373761
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 166917
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 846083
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 115
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 5738093
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 987167
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5993496308607371
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5481470779455321
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24315,
      "mean": 19286.102140077823,
      "std": 796.2085039616646,
      "p95": 20280.0,
      "p99": 20590.739999999998,
      "p50": 19425.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9725194552529183,
      "std": 0.16349882368843217,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 364,
      "max": 20566,
      "mean": 5692.254134241245,
      "std": 2819.477850850421,
      "p95": 11769.0,
      "p99": 13082.0,
      "p50": 5432.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 32.45442736523057,
      "std": 23.953583837083476,
      "p95": 72.0,
      "p99": 115.0,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18692.510949093376,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7493.189338854142,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18173.023479607782,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 561749
    },
    {
      "name": "queued_predictions",
      "count": 500
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 225430
    },
    {
      "name": "pred_ones_counter",
      "count": 561749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 166917
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 846083
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 115
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 5738093
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 987167
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5988983528650118
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.547671646945522
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24315,
      "mean": 19292.121108949417,
      "std": 790.3849930807216,
      "p95": 20288.0,
      "p99": 20560.96,
      "p50": 19430.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9788424124513618,
      "std": 0.14392700138567367,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 364,
      "max": 20566,
      "mean": 5577.614421206225,
      "std": 2626.9897549948825,
      "p95": 11218.0,
      "p99": 12607.5,
      "p50": 5417.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 32.23388134381701,
      "std": 23.32474968111789,
      "p95": 71.0,
      "p99": 109.03999999999997,
      "p50": 29.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18725.147848267363,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7513.745536301768,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18360.087201910774,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 754641
    },
    {
      "name": "queued_predictions",
      "count": 358
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 302551
    },
    {
      "name": "pred_ones_counter",
      "count": 754641
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 166917
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 846083
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 115
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 5738093
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 987167
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.599195495623173
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5477253422488309
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24315,
      "mean": 19310.617461089496,
      "std": 781.090676503082,
      "p95": 20289.05,
      "p99": 20578.53,
      "p50": 19454.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9820038910505836,
      "std": 0.13295317891442313,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 364,
      "max": 20566,
      "mean": 5491.976653696498,
      "std": 2519.454773898171,
      "p95": 10566.0,
      "p99": 12446.0,
      "p50": 5377.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 32.25036478599222,
      "std": 23.16652777412441,
      "p95": 70.0,
      "p99": 104.0,
      "p50": 30.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18863.345645405574,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7563.018027258626,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18574.96574088239,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203117",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 949998
    },
    {
      "name": "queued_predictions",
      "count": 251
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 381181
    },
    {
      "name": "pred_ones_counter",
      "count": 949998
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.2:6001:alpha_gauge",
      "count": 166917
    },
    {
      "name": "spark_svm:172.21.0.2:6001:beta_gauge",
      "count": 846083
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_batch_size_gauge",
      "count": 115
    },
    {
      "name": "spark_svm:172.21.0.2:6001:max_thru_gauge",
      "count": 5738093
    },
    {
      "name": "spark_svm:172.21.0.2:6001:base_thru_gauge",
      "count": 987167
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5988209406166173
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.5481695750938423
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 24797,
      "mean": 19334.34362840467,
      "std": 771.8952368934301,
      "p95": 20297.35,
      "p99": 20599.44,
      "p50": 19478.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9851653696498055,
      "std": 0.12090541378538737,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 364,
      "max": 20566,
      "mean": 5471.665004863813,
      "std": 2441.6720600840956,
      "p95": 10100.5,
      "p99": 12385.5,
      "p50": 5391.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 32.798030155642027,
      "std": 23.166947798039545,
      "p95": 71.0,
      "p99": 101.75,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18994.535026589278,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7622.255004380444,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18752.52819158015,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/DEBUG_cache_hit_rate_60_hitrate_160905-203117_results.json
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 30000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203245"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 30000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203245"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.4:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0331008953917344], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 399
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 137768,
      "max": 137768,
      "mean": 137768.0,
      "std": null,
      "p95": 137768.0,
      "p99": 137768.0,
      "p50": 137768.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 948,
      "max": 7569,
      "mean": 5311.8671679198,
      "std": 1669.9320736342882,
      "p95": 7569.0,
      "p99": 7569.0,
      "p50": 5720.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 38,
      "mean": 19.95,
      "std": 11.749468073066116,
      "p95": 37.95,
      "p99": 38.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.04995797535113463,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.933238140048034,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 8
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.3:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 122, alpha = 152.60000027190551, beta = 1392.799988524641
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 6096.951517626873, baseline: 647.0816663967578, increase: 9.422228807033656
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 192476
    },
    {
      "name": "queued_predictions",
      "count": 273
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 77225
    },
    {
      "name": "pred_ones_counter",
      "count": 192477
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 152600
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1392800
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6096952
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 647082
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.599178205853208
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4880479226089351
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17021,
      "max": 21126,
      "mean": 19387.962548638134,
      "std": 716.8502861981034,
      "p95": 20312.0,
      "p99": 20619.61,
      "p50": 19502.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9075875486381323,
      "std": 0.28964252474170379,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 387,
      "max": 23384,
      "mean": 6870.122689688716,
      "std": 3753.7470468576104,
      "p95": 13285.0,
      "p99": 16139.0,
      "p50": 6111.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 124,
      "mean": 39.50127877237852,
      "std": 29.987755491673256,
      "p95": 122.0,
      "p99": 122.0,
      "p50": 33.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19242.764782818533,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7719.63447168411,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17397.985196997728,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 386749
    },
    {
      "name": "queued_predictions",
      "count": 265
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 155306
    },
    {
      "name": "pred_ones_counter",
      "count": 386749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 152600
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1392800
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6096952
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 647082
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5986243391711927
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48756687153683656
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17044,
      "max": 21202,
      "mean": 19399.107490272374,
      "std": 720.9444598939889,
      "p95": 20322.0,
      "p99": 20635.699999999997,
      "p50": 19522.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9489299610894941,
      "std": 0.22016738719004395,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 434,
      "max": 23384,
      "mean": 6185.4231517509729,
      "std": 3177.767722106577,
      "p95": 12230.0,
      "p99": 14559.0,
      "p50": 5688.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 124,
      "mean": 36.46244131455399,
      "std": 26.435410797391403,
      "p95": 83.0,
      "p99": 122.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19331.65147114123,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7764.171136867497,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18378.969404510706,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 573499
    },
    {
      "name": "queued_predictions",
      "count": 500
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 230133
    },
    {
      "name": "pred_ones_counter",
      "count": 573499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 152600
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1392800
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6096952
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 647082
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5989348413498978
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48732604590417769
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 21195,
      "mean": 19329.923151750972,
      "std": 770.537211740425,
      "p95": 20310.35,
      "p99": 20613.87,
      "p50": 19474.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9686284046692607,
      "std": 0.1743410739645483,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 304,
      "max": 23384,
      "mean": 5545.457684824903,
      "std": 3059.8093894240789,
      "p95": 12037.0,
      "p99": 14308.0,
      "p50": 5057.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 124,
      "mean": 31.53370786516854,
      "std": 24.658128999010246,
      "p95": 73.0,
      "p99": 122.0,
      "p50": 27.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19118.347731581893,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7670.705180700107,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18469.42480007168,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 762499
    },
    {
      "name": "queued_predictions",
      "count": 478
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 306360
    },
    {
      "name": "pred_ones_counter",
      "count": 762499
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 152600
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1392800
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6096952
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 647082
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5983719037402177
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.48773441014348875
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 21733,
      "mean": 19291.66755836576,
      "std": 781.7473169529854,
      "p95": 20293.35,
      "p99": 20577.87,
      "p50": 19423.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9744649805447471,
      "std": 0.15776259067842439,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 304,
      "max": 23384,
      "mean": 4969.896522373541,
      "std": 3001.9677922045736,
      "p95": 11880.0,
      "p99": 13885.0,
      "p50": 4297.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 124,
      "mean": 28.256079766536965,
      "std": 23.310170821448755,
      "p95": 69.0,
      "p99": 122.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19056.68986537412,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7657.475190532155,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18515.590121531197,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203245",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 954625
    },
    {
      "name": "queued_predictions",
      "count": 374
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 383356
    },
    {
      "name": "pred_ones_counter",
      "count": 954625
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.4:6001:alpha_gauge",
      "count": 152600
    },
    {
      "name": "spark_svm:172.21.0.4:6001:beta_gauge",
      "count": 1392800
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_batch_size_gauge",
      "count": 122
    },
    {
      "name": "spark_svm:172.21.0.4:6001:max_thru_gauge",
      "count": 6096952
    },
    {
      "name": "spark_svm:172.21.0.4:6001:base_thru_gauge",
      "count": 647082
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5984938204123774
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.487767447950766
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17023,
      "max": 21733,
      "mean": 19286.74854085603,
      "std": 776.7707598933287,
      "p95": 20283.0,
      "p99": 20562.739999999998,
      "p50": 19405.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9776264591439688,
      "std": 0.1479131032750865,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 272,
      "max": 23384,
      "mean": 4956.116123540856,
      "std": 2972.644869127474,
      "p95": 11876.0,
      "p99": 13885.0,
      "p50": 4339.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 124,
      "mean": 28.470817120622568,
      "std": 23.408737448797365,
      "p95": 69.0,
      "p99": 122.0,
      "p50": 24.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19089.109716979834,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7666.022391473726,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18604.72419367824,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/DEBUG_cache_hit_rate_60_hitrate_160905-203245_results.json
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 30000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203414"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 280
target_qps = 30000
name = "DEBUG_cache_hit_rate_60_hitrate_160905-203414"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [1.0766467194252753], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203414",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 396
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 133229,
      "max": 133229,
      "mean": 133229.0,
      "std": null,
      "p95": 133229.0,
      "p99": 133229.0,
      "p50": 133229.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 917,
      "max": 7075,
      "mean": 5189.886363636364,
      "std": 1566.1120349583708,
      "p95": 7075.0,
      "p99": 7075.0,
      "p50": 5752.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 37,
      "mean": 19.8,
      "std": 11.523888232710347,
      "p95": 36.9,
      "p99": 37.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049963534114626447,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.785561486505224,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 9
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 112, alpha = 170.49999871539686, beta = 825.5000218167124
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 5622.06664589629, baseline: 1004.0160435596716, increase: 5.599578494745591
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203414",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 167999
    },
    {
      "name": "queued_predictions",
      "count": 280
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 68543
    },
    {
      "name": "pred_ones_counter",
      "count": 167999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 170500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 825500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 112
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 5622067
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 1004016
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5923674374104909
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4514193536866291
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 24561,
      "mean": 19045.90637159533,
      "std": 937.4845205180242,
      "p95": 20238.0,
      "p99": 20677.309999999998,
      "p50": 19138.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9185311284046692,
      "std": 0.2735870928102371,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 21345,
      "mean": 6227.544868677042,
      "std": 3449.2909369647679,
      "p95": 12045.0,
      "p99": 15720.0,
      "p50": 5789.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 28.884534344711338,
      "std": 25.74705374859243,
      "p95": 79.0,
      "p99": 112.0,
      "p50": 21.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 16794.680213389678,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 6852.167605441187,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 15439.492508050522,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203414",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 357787
    },
    {
      "name": "queued_predictions",
      "count": 332
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 146093
    },
    {
      "name": "pred_ones_counter",
      "count": 357788
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 170500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 825500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 112
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 5622067
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 1004016
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5919875795475805
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4522147193310005
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 24561,
      "mean": 19064.846546692606,
      "std": 878.7737797158437,
      "p95": 20188.0,
      "p99": 20532.35,
      "p50": 19167.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9550097276264592,
      "std": 0.20730798169127469,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 396,
      "max": 21345,
      "mean": 6007.49015077821,
      "std": 3038.3150723392107,
      "p95": 11706.0,
      "p99": 14181.0,
      "p50": 5852.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 30.77585843690752,
      "std": 25.65721683425381,
      "p95": 77.0,
      "p99": 112.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 17886.76820325152,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7302.534090747206,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17122.064681153843,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203414",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 538439
    },
    {
      "name": "queued_predictions",
      "count": 283
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 219811
    },
    {
      "name": "pred_ones_counter",
      "count": 538439
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 170500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 825500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 112
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 5622067
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 1004016
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5919189781685814
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.45263994621489159
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17024,
      "max": 23725,
      "mean": 19065.06785019455,
      "std": 861.8433176491827,
      "p95": 20187.35,
      "p99": 20496.92,
      "p50": 19181.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9644941634241245,
      "std": 0.1850770171490908,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 287,
      "max": 21345,
      "mean": 5733.758633268482,
      "std": 2839.0588237957115,
      "p95": 11397.0,
      "p99": 13459.75,
      "p50": 5675.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 115,
      "mean": 30.069894679250447,
      "std": 24.567306926194797,
      "p95": 73.0,
      "p99": 112.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 17942.83202623516,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7326.236564428594,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17378.619007514193,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: {
  "name": "DEBUG_cache_hit_rate_60_hitrate_160905-203414",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 724018
    },
    {
      "name": "queued_predictions",
      "count": 341
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 295127
    },
    {
      "name": "pred_ones_counter",
      "count": 724018
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 170500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 825500
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 112
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 5622067
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 1004016
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5924534657538596
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4523230085439865
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17039,
      "max": 23725,
      "mean": 19066.9375,
      "std": 854.3767201254736,
      "p95": 20188.0,
      "p99": 20467.739999999998,
      "p50": 19176.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9713035019455253,
      "std": 0.1669724203521528,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 287,
      "max": 21345,
      "mean": 5708.798273346303,
      "std": 2706.192233788763,
      "p95": 11242.5,
      "p99": 12657.0,
      "p50": 5699.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 113,
      "mean": 30.33390077821012,
      "std": 24.557123315667913,
      "p95": 74.0,
      "p99": 112.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18096.808813503965,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7376.069132262739,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17634.416238298272,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 30000
name = "cache_hit_rate_60_hitrate_160905-203537"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper_benchmarks: Args { flag_conf: "/tmp/digits_bench.toml", cmd_digits: true }
INFO:clipper_benchmarks: MNIST data loaded: 10000 points
INFO:clipper::configuration: spark_svm_r0:6001
/tmp/digits_bench.toml contains:
num_message_encodes = 1
use_lsh = false
window_size = -1
load_generator = "uniform"
input_type = "float"
request_generator = "cache_hits"
results_path = "/tmp/benchmarking_logs"
num_update_workers = 1
input_length = 784
num_benchmark_requests = 1000000
redis_ip = "redis"
mnist_path = "/mnist_data/test.data"
bench_batch_size = 250
target_qps = 30000
name = "cache_hit_rate_60_hitrate_160905-203537"
cache_hit_rate = 0.6
salt_cache = false
num_predict_workers = 8
redis_port = 6379
cache_size = 49999
slo_micros = 20000
correction_policy = "logistic_regression"
send_updates = false
[[models]]
version = 1
num_outputs = 1
name = "spark_svm"
addresses = [ "spark_svm_r0:6001",]
[batching]
sample_size = 500
opt_addr = "quantilereg:7777"
strategy = "learned"
INFO:clipper::configuration: quantilereg:7777
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 0 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 0 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 1 
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::server: starting input prediction worker 2 
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 2 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 3 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting prediction worker 1 output thread with 20 ms SLO
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::cmt: RedisCMT connection string redis://redis:6379/1
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting input prediction worker 3 
INFO:clipper::server: starting input prediction worker 4 
INFO:clipper::server: starting prediction worker 4 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 5 output thread with 20 ms SLO
INFO:clipper::server: starting prediction worker 6 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 5 
INFO:clipper::server: starting input prediction worker 6 
INFO:clipper::server: starting prediction worker 7 output thread with 20 ms SLO
INFO:clipper::server: starting input prediction worker 7 
INFO:clipper_benchmarks: starting benchmark
INFO:clipper::cmt: RedisUpdateTable connection string redis://redis:6379/2
INFO:clipper::cmt: Trying to connect to Redis
INFO:clipper::server: starting update worker 0
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Couldn't connect to spark_svm model wrapper. Sleeping 1 second
INFO:clipper::batching: Connected to spark_svm model wrapper at V4(172.21.0.3:6001)
INFO:clipper::server: Error in getting correction state for update: failed to fill whole buffer
INFO:clipper::server: Creating model state for new user: 1
INFO:clipper::correction_policy: OLD correction state: [1], offline_model_order: ["spark_svm"]
INFO:clipper::correction_policy: New correction state: [0.962523492217007], offline_model_order: ["spark_svm"], labels: Some([1, -1])
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 0
    },
    {
      "name": "queued_predictions",
      "count": 0
    },
    {
      "name": "update_counter",
      "count": 1
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 400
    },
    {
      "name": "pred_ones_counter",
      "count": 0
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 0
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": null
    },
    {
      "name": "digits accuracy ratio",
      "ratio": null
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "update_latency",
      "min": 139190,
      "max": 139190,
      "mean": 139190.0,
      "std": null,
      "p95": 139190.0,
      "p99": 139190.0,
      "p50": 139190.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 954,
      "max": 7155,
      "mean": 5255.36,
      "std": 1600.7311723444623,
      "p95": 7155.0,
      "p99": 7155.0,
      "p50": 5816.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 39,
      "mean": 20.0,
      "std": 11.832159566199233,
      "p95": 38.9,
      "p99": 39.0,
      "p50": 20.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.049956680064881738,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 19.9826740224888,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: SLEEP TIME: 8
INFO:clipper_benchmarks: Submitted 0 requests
INFO:clipper_benchmarks: Submitted 20000 requests
INFO:clipper_benchmarks: Submitted 40000 requests
INFO:clipper::batching: Connected to opt server at V4(172.21.0.4:7777)
INFO:clipper::batching: spark_svm BATCHER: Updated batching model: max_batch_size: 150, alpha = 112.07692293743672, beta = 3139.384619990956
INFO:clipper::batching: spark_svm BATCHER: Predicted max thruput: 7518.4491235986125, baseline: 307.55399896237464, increase: 24.445948187844568
INFO:clipper_benchmarks: Submitted 60000 requests
INFO:clipper_benchmarks: Submitted 80000 requests
INFO:clipper_benchmarks: Submitted 100000 requests
INFO:clipper_benchmarks: Submitted 120000 requests
INFO:clipper_benchmarks: Submitted 140000 requests
INFO:clipper_benchmarks: Submitted 160000 requests
INFO:clipper_benchmarks: Submitted 180000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 187999
    },
    {
      "name": "queued_predictions",
      "count": 302
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 75268
    },
    {
      "name": "pred_ones_counter",
      "count": 187999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 112077
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3139385
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7518449
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 307554
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.6001678182040265
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4755876361044474
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17025,
      "max": 21565,
      "mean": 19234.32368677043,
      "std": 782.9644103406677,
      "p95": 20252.35,
      "p99": 20512.739999999998,
      "p50": 19345.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9139105058365759,
      "std": 0.2805302685805994,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 330,
      "max": 25929,
      "mean": 7241.196619649805,
      "std": 4252.669578594118,
      "p95": 15101.0,
      "p99": 20080.0,
      "p50": 6249.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 38.23158963941087,
      "std": 31.175075996318517,
      "p95": 99.5,
      "p99": 150.0,
      "p50": 32.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18795.798533287336,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7526.493575274882,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 17270.154582433497,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 200000 requests
INFO:clipper_benchmarks: Submitted 220000 requests
INFO:clipper_benchmarks: Submitted 240000 requests
INFO:clipper_benchmarks: Submitted 260000 requests
INFO:clipper_benchmarks: Submitted 280000 requests
INFO:clipper_benchmarks: Submitted 300000 requests
INFO:clipper_benchmarks: Submitted 320000 requests
INFO:clipper_benchmarks: Submitted 340000 requests
INFO:clipper_benchmarks: Submitted 360000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 376999
    },
    {
      "name": "queued_predictions",
      "count": 443
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 151239
    },
    {
      "name": "pred_ones_counter",
      "count": 376999
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 112077
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3139385
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7518449
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 307554
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5988231304412334
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47586067867554029
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17031,
      "max": 21251,
      "mean": 19267.401994163425,
      "std": 773.8145960559543,
      "p95": 20262.0,
      "p99": 20499.35,
      "p50": 19380.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9567120622568094,
      "std": 0.2035292759273275,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 330,
      "max": 25929,
      "mean": 6319.853842412452,
      "std": 3624.6485389353476,
      "p95": 14153.75,
      "p99": 16221.0,
      "p50": 5634.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 34.20922868129382,
      "std": 27.102442925864236,
      "p95": 83.0,
      "p99": 139.5599999999995,
      "p50": 31.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18844.648058268805,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7564.871245231592,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18028.927104006136,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 380000 requests
INFO:clipper_benchmarks: Submitted 400000 requests
INFO:clipper_benchmarks: Submitted 420000 requests
INFO:clipper_benchmarks: Submitted 440000 requests
INFO:clipper_benchmarks: Submitted 460000 requests
INFO:clipper_benchmarks: Submitted 480000 requests
INFO:clipper_benchmarks: Submitted 500000 requests
INFO:clipper_benchmarks: Submitted 520000 requests
INFO:clipper_benchmarks: Submitted 540000 requests
INFO:clipper_benchmarks: Submitted 560000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 565582
    },
    {
      "name": "queued_predictions",
      "count": 417
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 227094
    },
    {
      "name": "pred_ones_counter",
      "count": 565582
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 112077
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3139385
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7518449
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 307554
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5985999975264974
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47573119370842778
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17031,
      "max": 22743,
      "mean": 19273.6048151751,
      "std": 780.5839615615392,
      "p95": 20261.0,
      "p99": 20517.0,
      "p50": 19391.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9691147859922179,
      "std": 0.17302773867506603,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 319,
      "max": 25929,
      "mean": 5849.850559338522,
      "std": 3410.459894911489,
      "p95": 12934.0,
      "p99": 15451.0,
      "p50": 5186.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 31.748077729623934,
      "std": 25.508771674391445,
      "p95": 75.0,
      "p99": 110.0,
      "p50": 28.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 18852.958302040755,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7567.66894442525,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18259.25024078114,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 580000 requests
INFO:clipper_benchmarks: Submitted 600000 requests
INFO:clipper_benchmarks: Submitted 620000 requests
INFO:clipper_benchmarks: Submitted 640000 requests
INFO:clipper_benchmarks: Submitted 660000 requests
INFO:clipper_benchmarks: Submitted 680000 requests
INFO:clipper_benchmarks: Submitted 700000 requests
INFO:clipper_benchmarks: Submitted 720000 requests
INFO:clipper_benchmarks: Submitted 740000 requests
INFO:clipper_benchmarks: Submitted 760000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 761749
    },
    {
      "name": "queued_predictions",
      "count": 386
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 305994
    },
    {
      "name": "pred_ones_counter",
      "count": 761749
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 112077
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3139385
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7518449
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 307554
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.598443835041266
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.47580370962088566
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17038,
      "max": 22743,
      "mean": 19323.269455252917,
      "std": 747.3353793087287,
      "p95": 20255.35,
      "p99": 20513.01,
      "p50": 19442.5
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9715466926070039,
      "std": 0.16628421759278354,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 309,
      "max": 25929,
      "mean": 5381.417558365759,
      "std": 3455.1596207170866,
      "p95": 12732.25,
      "p99": 15969.0,
      "p50": 4522.5
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 29.233584630350195,
      "std": 24.836182928925049,
      "p95": 69.0,
      "p99": 109.0,
      "p50": 25.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19038.302415514503,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7648.3213756561449,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18485.045507638402,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 780000 requests
INFO:clipper_benchmarks: Submitted 800000 requests
INFO:clipper_benchmarks: Submitted 820000 requests
INFO:clipper_benchmarks: Submitted 840000 requests
INFO:clipper_benchmarks: Submitted 860000 requests
INFO:clipper_benchmarks: Submitted 880000 requests
INFO:clipper_benchmarks: Submitted 900000 requests
INFO:clipper_benchmarks: Submitted 920000 requests
INFO:clipper_benchmarks: Submitted 940000 requests
INFO:clipper_benchmarks: {
  "name": "cache_hit_rate_60_hitrate_160905-203537",
  "counters": [
    {
      "name": "prediction_counter",
      "count": 952800
    },
    {
      "name": "queued_predictions",
      "count": 449
    },
    {
      "name": "update_counter",
      "count": 0
    },
    {
      "name": "queued_updates",
      "count": 0
    },
    {
      "name": "spark_svm:prediction_counter",
      "count": 382673
    },
    {
      "name": "pred_ones_counter",
      "count": 952800
    },
    {
      "name": "pred_zeros_counter",
      "count": 0
    },
    {
      "name": "spark_svm:172.21.0.3:6001:alpha_gauge",
      "count": 112077
    },
    {
      "name": "spark_svm:172.21.0.3:6001:beta_gauge",
      "count": 3139385
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_batch_size_gauge",
      "count": 150
    },
    {
      "name": "spark_svm:172.21.0.3:6001:max_thru_gauge",
      "count": 7518449
    },
    {
      "name": "spark_svm:172.21.0.3:6001:base_thru_gauge",
      "count": 307554
    }
  ],
  "ratio_counters": [
    {
      "name": "prediction accuracy ratio",
      "ratio": null
    },
    {
      "name": "cache_hits",
      "ratio": 0.5984910553276216
    },
    {
      "name": "digits accuracy ratio",
      "ratio": 0.4761015154266211
    }
  ],
  "histograms": [
    {
      "name": "prediction_latency",
      "min": 17038,
      "max": 22743,
      "mean": 19317.675340466925,
      "std": 750.6220308022175,
      "p95": 20265.05,
      "p99": 20565.35,
      "p50": 19434.0
    },
    {
      "name": "in_time_predictions",
      "min": 0,
      "max": 1,
      "mean": 0.9783560311284046,
      "std": 0.14553576337589983,
      "p95": 1.0,
      "p99": 1.0,
      "p50": 1.0
    },
    {
      "name": "update_latency",
      "min": 0,
      "max": 0,
      "mean": 0.0,
      "std": 0.0,
      "p95": 0.0,
      "p99": 0.0,
      "p50": 0.0
    },
    {
      "name": "spark_svm:model_latency",
      "min": 309,
      "max": 25929,
      "mean": 5376.143482490273,
      "std": 3270.072305763165,
      "p95": 12122.0,
      "p99": 15619.0,
      "p50": 4698.0
    },
    {
      "name": "spark_svm:model_batch_size",
      "min": 1,
      "max": 150,
      "mean": 29.59739785992218,
      "std": 24.50213487017864,
      "p95": 69.0,
      "p99": 105.0,
      "p50": 26.0
    }
  ],
  "meters": [
    {
      "name": "prediction_thruput",
      "rate": 19054.51859388062,
      "unit": "events per second"
    },
    {
      "name": "update_thruput",
      "rate": 0.0,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:model_thruput",
      "rate": 7651.266840872732,
      "unit": "events per second"
    },
    {
      "name": "spark_svm:cache_included_thruput",
      "rate": 18600.98446808236,
      "unit": "events per second"
    }
  ]
}
INFO:clipper_benchmarks: Submitted 960000 requests
INFO:clipper_benchmarks: Submitted 980000 requests
INFO:clipper_benchmarks: writing results to: /tmp/benchmarking_logs/cache_hit_rate_60_hitrate_160905-203537_results.json
INFO:clipper::server: ending input loop: prediction worker 7
INFO:clipper::server: ending input loop: prediction worker 6
INFO:clipper::server: ending input loop: prediction worker 4
INFO:clipper::server: ending input loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 1
INFO:clipper::server: ending input loop: prediction worker 3
INFO:clipper::server: ending input loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 2
INFO:clipper::server: ending input loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 3
INFO:clipper::server: ending output loop: prediction worker 6
INFO:clipper::server: ending output loop: prediction worker 7
INFO:clipper::server: ending output loop: prediction worker 5
INFO:clipper::server: ending output loop: prediction worker 4
INFO:clipper::server: ending output loop: prediction worker 0
INFO:clipper::server: ending output loop: prediction worker 1
INFO:clipper::server: Ending loop: update worker 0
INFO:clipper::server: Dropping ClipperServer
